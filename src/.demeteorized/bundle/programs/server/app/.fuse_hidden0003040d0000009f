var require = meteorInstall({"lib":{"models":{"_shared":{"es_driver.js":["elasticsearch",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/es_driver.js                                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _elasticsearch = require('elasticsearch');                                                                         // 1
                                                                                                                       //
var _elasticsearch2 = _interopRequireDefault(_elasticsearch);                                                          //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
//                                                                                                                     //
//  Allow SimpleSchema to have esDriver field                                                                          //
//                                                                                                                     //
SimpleSchema.extendOptions({                                                                                           // 5
  esDriver: Match.Optional(Boolean),                                                                                   // 6
  esDriverTransformation: Match.Optional(Function)                                                                     // 7
});                                                                                                                    //
                                                                                                                       //
if (Meteor.isServer) {                                                                                                 // 10
  //  ---------------------------------------------------------------------------------------                          //
  //                                                                                                                   //
  //  Declaring our ElasticSearch isntance                                                                             //
  //                                                                                                                   //
  // read meteor settings to get elastic search URL                                                                    //
  var esUrl = process.env.ELASTICSEARCH_URL;                                                                           // 16
  if (!esUrl) throw new Error('Please config ES_URL on settings.json');                                                // 17
                                                                                                                       //
  // instantiate elasticsearch from npm                                                                                //
  //let elasticsearch = Meteor.npmRequire('elasticsearch');                                                            //
  var asyncEsClient = new _elasticsearch2['default'].Client({                                                          // 10
    host: esUrl                                                                                                        // 22
  });                                                                                                                  //
                                                                                                                       //
  //  wraps elasticsearch from npm on sync methods                                                                     //
  esClient = Async.wrap(asyncEsClient, ['index', 'search', 'update', 'delete']);                                       // 10
                                                                                                                       //
  // A better result format on search methods                                                                          //
  esClient.prettySearch = function (searchObject) {                                                                    // 10
                                                                                                                       //
    var searchResponse = this.search(searchObject);                                                                    // 32
    var results = _.map(searchResponse.hits.hits, function (hit) {                                                     // 33
      return _.extend(hit._source, {                                                                                   // 34
        _id: hit._id,                                                                                                  // 35
        _type: hit._type,                                                                                              // 36
        _score: hit._score,                                                                                            // 37
        _highlight: hit.highlight                                                                                      // 38
      });                                                                                                              //
    });                                                                                                                //
                                                                                                                       //
    return {                                                                                                           // 42
      results: results,                                                                                                // 43
      total: searchResponse.hits.total,                                                                                // 44
      took: searchResponse.took                                                                                        // 45
    };                                                                                                                 //
  };                                                                                                                   //
  //  ---------------------------------------------------------------------------------------                          //
                                                                                                                       //
  //                                                                                                                   //
  //  Get array of fields on a mongoDB modifier                                                                        //
  //                                                                                                                   //
  getModifierFields = function getModifierFields(modifier) {                                                           // 10
    // compute modified fields                                                                                         //
    var fields = [];                                                                                                   // 56
    _.each(modifier, function (params, op) {                                                                           // 57
      if (_.contains(['$set', '$unset', '$inc', '$push', '$pull', '$pop', '$rename', '$pullAll', '$addToSet', '$bit'], op)) {
        _.each(_.keys(params), function (field) {                                                                      // 60
          if (!_.contains(fields, field)) {                                                                            // 61
            fields.push(field);                                                                                        // 62
          }                                                                                                            //
        });                                                                                                            //
      } else {                                                                                                         //
        fields.push(op);                                                                                               // 66
      }                                                                                                                //
    });                                                                                                                //
                                                                                                                       //
    return fields;                                                                                                     // 70
  };                                                                                                                   //
                                                                                                                       //
  Mongo.Collection.prototype.esDriver = function (esConn, index, type, transformFunction) {                            // 74
    this.es = {};                                                                                                      // 75
    this.es.conn = esConn;                                                                                             // 76
    this.es.index = index;                                                                                             // 77
    this.es.type = type;                                                                                               // 78
    this.es.transformFunction = transformFunction;                                                                     // 79
    //                                                                                                                 //
    //  check if there is an attached SimpleSchema instance                                                            //
    //                                                                                                                 //
    if (!this.simpleSchema()) {                                                                                        // 74
      throw new Error('Riverable needs an attached SimpleSchema instance.');                                           // 84
    }                                                                                                                  //
                                                                                                                       //
    //                                                                                                                 //
    //  grab collection simpleSchema instance                                                                          //
    //                                                                                                                 //
    var schema = this.simpleSchema().schema();                                                                         // 74
    this.es.keys = [];                                                                                                 // 91
    //                                                                                                                 //
    //  grab keys that have esDriver: true                                                                             //
    //                                                                                                                 //
    for (var key in meteorBabelHelpers.sanitizeForInObject(schema)) {                                                  // 74
      if (schema[key].esDriver) {                                                                                      // 96
        this.es.keys.push(key);                                                                                        // 97
        // also add key.$ if it is an Array                                                                            //
        if (_.isArray(schema[key].type())) {                                                                           // 96
          this.es.keys.push(key + '.$');                                                                               // 100
        }                                                                                                              //
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    //                                                                                                                 //
    //  create a new schema from them                                                                                  //
    //                                                                                                                 //
    this.es.schema = this.simpleSchema().pick(this.es.keys);                                                           // 74
    //                                                                                                                 //
    //  Using self because inside hooks I need "this"                                                                  //
    //                                                                                                                 //
    var self = this;                                                                                                   // 74
    //                                                                                                                 //
    //  "insert" hooks                                                                                                 //
    //                                                                                                                 //
    this.after.insert(function (userId, doc) {                                                                         // 74
      var cleanedDoc = _.clone(doc);                                                                                   // 118
      self.es.schema.clean(cleanedDoc);                                                                                // 119
                                                                                                                       //
      var finalDoc = {};                                                                                               // 121
      if (self.es.transformFunction && typeof self.es.transformFunction === 'function') {                              // 122
        finalDoc = self.es.transformFunction(cleanedDoc, doc, this);                                                   // 123
      } else {                                                                                                         //
        finalDoc = cleanedDoc;                                                                                         // 125
      }                                                                                                                //
                                                                                                                       //
      if (finalDoc) {                                                                                                  // 128
        try {                                                                                                          // 129
          self.es.conn.index({                                                                                         // 130
            index: self.es.index,                                                                                      // 131
            type: self.es.type,                                                                                        // 132
            id: doc._id,                                                                                               // 133
            body: finalDoc                                                                                             // 134
          });                                                                                                          //
        } catch (e) {                                                                                                  //
          console.error('ElasticSearchAdapter error at insert:');                                                      // 137
          console.error(e.message);                                                                                    // 138
        }                                                                                                              //
      }                                                                                                                //
    });                                                                                                                //
                                                                                                                       //
    //                                                                                                                 //
    //  "update" hook                                                                                                  //
    //                                                                                                                 //
    this.after.update(function (userId, doc, fieldNames, modifier) {                                                   // 74
      var modifiedKeys = getModifierFields(modifier);                                                                  // 147
                                                                                                                       //
      //                                                                                                               //
      //  are the modified fields being tracked ?                                                                      //
      //                                                                                                               //
      if (_.intersection(modifiedKeys, self.es.keys).length) {                                                         // 146
        var cleanedDoc = _.clone(doc);                                                                                 // 153
        self.es.schema.clean(cleanedDoc, {                                                                             // 154
          removeEmptyStrings: false                                                                                    // 155
        });                                                                                                            //
                                                                                                                       //
        var finalDoc = {};                                                                                             // 158
        if (self.es.transformFunction && typeof self.es.transformFunction === 'function') {                            // 159
          finalDoc = self.es.transformFunction(cleanedDoc, doc, this);                                                 // 160
        } else {                                                                                                       //
          finalDoc = cleanedDoc;                                                                                       // 162
        }                                                                                                              //
        delete finalDoc._id; //  we will never update the _id                                                          // 164
                                                                                                                       //
        if (finalDoc) {                                                                                                // 152
          try {                                                                                                        // 167
            return self.es.conn.update({                                                                               // 168
              index: self.es.index,                                                                                    // 169
              type: self.es.type,                                                                                      // 170
              id: doc._id,                                                                                             // 171
              body: {                                                                                                  // 172
                doc: finalDoc                                                                                          // 173
              }                                                                                                        //
            });                                                                                                        //
          } catch (e) {                                                                                                //
            console.error('ElasticSearchAdapter error at update:');                                                    // 177
            console.error(e.message);                                                                                  // 178
          }                                                                                                            //
        }                                                                                                              //
      }                                                                                                                //
    });                                                                                                                //
                                                                                                                       //
    //                                                                                                                 //
    //  "remove" hook                                                                                                  //
    //                                                                                                                 //
    this.after.remove(function (userId, doc) {                                                                         // 74
      try {                                                                                                            // 188
        return self.es.conn['delete']({                                                                                // 189
          index: self.es.index,                                                                                        // 190
          type: self.es.type,                                                                                          // 191
          id: doc._id                                                                                                  // 192
        });                                                                                                            //
      } catch (e) {                                                                                                    //
        console.error('ElasticSearchAdapter error at remove:');                                                        // 195
        console.error(e.message);                                                                                      // 196
      }                                                                                                                //
    });                                                                                                                //
  };                                                                                                                   //
}                                                                                                                      //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"log_driver.js":["babel-runtime/helpers/typeof",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/log_driver.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _typeof2 = require('babel-runtime/helpers/typeof');                                                                //
                                                                                                                       //
var _typeof3 = _interopRequireDefault(_typeof2);                                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
var OPERATION_INSERT = 'insert';                                                                                       // 1
var OPERATION_REMOVE = 'remove';                                                                                       // 2
var OPERATION_UPDATE = 'update';                                                                                       // 3
var DEFAULT_REMOVE_DESCRIPTION = 'removed the document';                                                               // 4
var DEFAULT_INSERT_DESCRIPTION = 'inserted the document';                                                              // 5
var DEFAULT_UPDATE_DESCRIPTION = 'updated the document';                                                               // 6
//                                                                                                                     //
//  Allow SimpleSchema to have esDriver field                                                                          //
//                                                                                                                     //
SimpleSchema.extendOptions({                                                                                           // 10
  logDriver: Match.Optional(Boolean)                                                                                   // 11
});                                                                                                                    //
                                                                                                                       //
//                                                                                                                     //
//  Get array of fields on a mongoDB modifier                                                                          //
//                                                                                                                     //
getModifierFields = function getModifierFields(modifier) {                                                             // 17
  // compute modified fields                                                                                           //
  var fields = [];                                                                                                     // 19
  _.each(modifier, function (params, op) {                                                                             // 20
    if (_.contains(['$set', '$unset', '$inc', '$push', '$pull', '$pop', '$rename', '$pullAll', '$addToSet', '$bit'], op)) {
      _.each(_.keys(params), function (field) {                                                                        // 24
        if (!_.contains(fields, field)) {                                                                              // 25
          fields.push(field);                                                                                          // 26
        }                                                                                                              //
      });                                                                                                              //
    } else {                                                                                                           //
      fields.push(op);                                                                                                 // 30
    }                                                                                                                  //
  });                                                                                                                  //
                                                                                                                       //
  return fields;                                                                                                       // 34
};                                                                                                                     //
Mongo.Collection.prototype.logDriver = function (collection, docIdentifier) {                                          // 36
  this.log = {};                                                                                                       // 37
  this.log.collection = collection;                                                                                    // 38
  this.log.docIdentifier = docIdentifier;                                                                              // 39
  //                                                                                                                   //
  //  check if there is an attached SimpleSchema instance                                                              //
  //                                                                                                                   //
  if (!this.simpleSchema()) {                                                                                          // 36
    throw new Error('Log Driver needs an attached SimpleSchema instance.');                                            // 44
  }                                                                                                                    //
                                                                                                                       //
  var collectionName = this._name;                                                                                     // 47
                                                                                                                       //
  function remove$(modifier) {                                                                                         // 49
    var cleanObj = {};                                                                                                 // 50
    if ((typeof modifier === 'undefined' ? 'undefined' : (0, _typeof3['default'])(modifier)) === 'object') {           // 51
      for (var key in meteorBabelHelpers.sanitizeForInObject(modifier)) {                                              // 52
        if (modifier.hasOwnProperty(key)) {                                                                            // 53
          var cleanKey = key;                                                                                          // 54
          if (key.charAt(0) === '$') {                                                                                 // 55
            cleanKey = key.substr(1);                                                                                  // 56
          }                                                                                                            //
          cleanObj[cleanKey] = remove$(modifier[key]);                                                                 // 58
        }                                                                                                              //
      }                                                                                                                //
    } else {                                                                                                           //
      return modifier;                                                                                                 // 62
    }                                                                                                                  //
    return cleanObj;                                                                                                   // 64
  }                                                                                                                    //
                                                                                                                       //
  function logOperation(operation, description, userId, doc, hook, modifier) {                                         // 67
    var docName = docIdentifier(doc, hook);                                                                            // 68
    var obj = {                                                                                                        // 69
      collection: collectionName,                                                                                      // 70
      operation: operation,                                                                                            // 71
      description: description,                                                                                        // 72
      docId: doc._id,                                                                                                  // 73
      docName: docName                                                                                                 // 74
    };                                                                                                                 //
                                                                                                                       //
    if (userId) {                                                                                                      // 77
      obj.userId = userId;                                                                                             // 78
    }                                                                                                                  //
                                                                                                                       //
    if (modifier) {                                                                                                    // 81
      obj.modifier = JSON.stringify(modifier);                                                                         // 82
    }                                                                                                                  //
    collection.insert(obj);                                                                                            // 84
  }                                                                                                                    //
                                                                                                                       //
  //                                                                                                                   //
  //  grab collection simpleSchema instance                                                                            //
  //                                                                                                                   //
  var schema = this.simpleSchema().schema();                                                                           // 36
  this.log.keys = [];                                                                                                  // 92
  //                                                                                                                   //
  //  grab keys that have logDriver: true                                                                              //
  //                                                                                                                   //
  for (var key in meteorBabelHelpers.sanitizeForInObject(schema)) {                                                    // 36
    if (schema[key].logDriver) {                                                                                       // 97
      this.log.keys.push(key);                                                                                         // 98
      // also add key.$ if it is an Array                                                                              //
      if (_.isArray(schema[key].type())) {                                                                             // 97
        this.log.keys.push(key + '.$');                                                                                // 101
      }                                                                                                                //
    }                                                                                                                  //
  }                                                                                                                    //
                                                                                                                       //
  var self = this;                                                                                                     // 106
  //                                                                                                                   //
  //  "insert" hooks                                                                                                   //
  //                                                                                                                   //
  this.after.insert(function (userId, doc) {                                                                           // 36
    logOperation(OPERATION_INSERT, DEFAULT_INSERT_DESCRIPTION, userId, doc, this);                                     // 111
  });                                                                                                                  //
                                                                                                                       //
  //                                                                                                                   //
  //  "update" hook                                                                                                    //
  //                                                                                                                   //
  this.after.update(function (userId, doc, fieldNames, modifier) {                                                     // 36
    var modifiedKeys = getModifierFields(modifier);                                                                    // 118
    //                                                                                                                 //
    //  are the modified fields being tracked ?                                                                        //
    //                                                                                                                 //
    if (_.intersection(modifiedKeys, self.log.keys).length) {                                                          // 117
      logOperation(OPERATION_UPDATE, DEFAULT_UPDATE_DESCRIPTION, userId, doc, this, modifier);                         // 123
    }                                                                                                                  //
  });                                                                                                                  //
                                                                                                                       //
  //                                                                                                                   //
  //  "remove" hook                                                                                                    //
  //                                                                                                                   //
  this.after.remove(function (userId, doc) {                                                                           // 36
    logOperation(OPERATION_REMOVE, DEFAULT_REMOVE_DESCRIPTION, userId, doc, this);                                     // 131
  });                                                                                                                  //
};                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"quick_list.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/quick_list.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Mongo.Collection.prototype.quickList = function () {                                                                   // 1
  var query = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];                                 //
  var identifier = arguments.length <= 1 || arguments[1] === undefined ? 'name' : arguments[1];                        //
                                                                                                                       //
  return this.find(query).map(function (c) {                                                                           // 2
    return {                                                                                                           // 3
      label: c[identifier],                                                                                            // 4
      value: c._id                                                                                                     // 5
    };                                                                                                                 //
  });                                                                                                                  //
};                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"schemas.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/schemas.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Schemas = {};                                                                                                          // 1
Meteor.isClient && Template.registerHelper('Schemas', Schemas);                                                        // 2
                                                                                                                       //
Schemas.StashedTech = new SimpleSchema({                                                                               // 4
  technologyId: {                                                                                                      // 5
    type: String,                                                                                                      // 6
    autoform: {                                                                                                        // 7
      type: 'universe-select',                                                                                         // 8
      uniPlaceholder: 'Search by technology title...',                                                                 // 9
      options: function () {                                                                                           // 10
        function options() {                                                                                           // 10
          return Technologies.quickList({});                                                                           //
        }                                                                                                              //
                                                                                                                       //
        return options;                                                                                                //
      }()                                                                                                              //
    }                                                                                                                  //
  },                                                                                                                   //
  techName: {                                                                                                          // 13
    type: String,                                                                                                      // 14
    optional: true,                                                                                                    // 15
    autoform: {                                                                                                        // 16
      omit: true                                                                                                       // 17
    }                                                                                                                  //
  },                                                                                                                   //
  addedAt: {                                                                                                           // 20
    type: Date,                                                                                                        // 21
    optional: true                                                                                                     // 22
  },                                                                                                                   //
  addedBy: {                                                                                                           // 24
    type: String,                                                                                                      // 25
    optional: true,                                                                                                    // 26
    autoValue: function () {                                                                                           // 27
      function autoValue() {                                                                                           //
        if (Meteor.userId()) {                                                                                         // 28
          return Meteor.userId();                                                                                      // 29
        } else {                                                                                                       //
          this.unset();                                                                                                // 31
        }                                                                                                              //
      }                                                                                                                //
                                                                                                                       //
      return autoValue;                                                                                                //
    }()                                                                                                                //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.validatedMethodUpdateSchema = new SimpleSchema({                                                               // 37
  _id: {                                                                                                               // 38
    type: String                                                                                                       // 39
  },                                                                                                                   //
  modifier: {                                                                                                          // 41
    type: Object,                                                                                                      // 42
    blackbox: true                                                                                                     // 43
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Description = new SimpleSchema({                                                                               // 48
  _id: {                                                                                                               // 49
    type: String                                                                                                       // 50
  },                                                                                                                   //
  createdBy: {                                                                                                         // 52
    type: String                                                                                                       // 53
  },                                                                                                                   //
  createdAt: {                                                                                                         // 55
    type: Date,                                                                                                        // 56
    optional: true,                                                                                                    // 57
    autoform: {                                                                                                        // 58
      omit: true                                                                                                       // 59
    }                                                                                                                  //
  },                                                                                                                   //
  updatedBy: {                                                                                                         // 62
    type: String,                                                                                                      // 63
    optional: true                                                                                                     // 64
  },                                                                                                                   //
  updatedAt: {                                                                                                         // 66
    type: Date,                                                                                                        // 67
    optional: true                                                                                                     // 68
  },                                                                                                                   //
  status: {                                                                                                            // 70
    type: String,                                                                                                      // 71
    allowedValues: ['draft', 'review', 'published'],                                                                   // 72
    autoform: {                                                                                                        // 73
      sortField: ['a'],                                                                                                // 74
      options: function () {                                                                                           // 75
        function options() {                                                                                           //
          return [{                                                                                                    // 76
            s: 'a',                                                                                                    // 77
            label: 'Draft',                                                                                            // 78
            value: 'draft'                                                                                             // 79
          }, {                                                                                                         //
            s: 'b',                                                                                                    // 81
            label: 'Review',                                                                                           // 82
            value: 'review'                                                                                            // 83
          }, {                                                                                                         //
            s: 'c',                                                                                                    // 85
            label: 'Published',                                                                                        // 86
            value: 'published'                                                                                         // 87
          }];                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return options;                                                                                                //
      }()                                                                                                              //
    }                                                                                                                  //
  },                                                                                                                   //
  longText: {                                                                                                          // 92
    type: String,                                                                                                      // 93
    autoform: {                                                                                                        // 94
      type: 'markdownEditor'                                                                                           // 95
    }                                                                                                                  //
  },                                                                                                                   //
  shortText: {                                                                                                         // 98
    type: String,                                                                                                      // 99
    optional: true,                                                                                                    // 100
    max: 140,                                                                                                          // 101
    autoform: {                                                                                                        // 102
      type: 'textarea',                                                                                                // 103
      rows: 3                                                                                                          // 104
    }                                                                                                                  //
                                                                                                                       //
  },                                                                                                                   //
  applications: {                                                                                                      // 108
    type: [String],                                                                                                    // 109
    optional: true,                                                                                                    // 110
    autoform: {                                                                                                        // 111
      omit: true                                                                                                       // 112
    }                                                                                                                  //
  },                                                                                                                   //
  benefits: {                                                                                                          // 115
    type: [String],                                                                                                    // 116
    optional: true,                                                                                                    // 117
    autoform: {                                                                                                        // 118
      omit: true                                                                                                       // 119
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
/*  Opcao 1: selectize                                                                                                 //
type: 'selectize',                                                                                                     //
options() {                                                                                                            //
  return Projects.find().map((project) => {                                                                            //
    return {                                                                                                           //
      value: project._id,                                                                                              //
      label: project.name                                                                                              //
    };                                                                                                                 //
  });                                                                                                                  //
}                                                                                                                      //
*/                                                                                                                     //
/*  Opcao 2: type ahead                                                                                                //
type: 'typeahead',                                                                                                     //
typeaheadDatasets: {                                                                                                   //
  source(query, process) {                                                                                             //
    let opt = {                                                                                                        //
      types: ['projects']                                                                                              //
    };                                                                                                                 //
    SearchSources.globalSearch.search(query, opt);                                                                     //
    let rId = Tracker.autorun((comp) => {                                                                              //
      let status = SearchSources.globalSearch.getStatus();                                                             //
      if (!comp.firstRun) {                                                                                            //
        if (status.loaded) {                                                                                           //
          comp.stop();                                                                                                 //
          process(SearchSources.globalSearch.getData().map((project) => {                                              //
            return {                                                                                                   //
              value: project._id,                                                                                      //
              label: project.name                                                                                      //
            }                                                                                                          //
          }));                                                                                                         //
        } else if (status.error) {                                                                                     //
          comp.stop()                                                                                                  //
        }                                                                                                              //
      }                                                                                                                //
    });                                                                                                                //
  }                                                                                                                    //
}                                                                                                                      //
*/                                                                                                                     //
/* Opcao 3: universe select */                                                                                         //
                                                                                                                       //
Schemas.contextualDescription = new SimpleSchema([Schemas.Description.pick(['userId', 'createdAt', 'applications', 'applications.$', 'benefits', 'benefits.$', 'longText']), {
  projectId: {                                                                                                         // 169
    type: String,                                                                                                      // 170
    autoform: {                                                                                                        // 171
      type: 'universe-select',                                                                                         // 172
      afFieldInput: {                                                                                                  // 173
        options: function () {                                                                                         // 174
          function options() {                                                                                         //
            return Projects.find().map(function (res) {                                                                // 175
              return {                                                                                                 // 176
                label: res.name,                                                                                       // 177
                value: res._id                                                                                         // 178
              };                                                                                                       //
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return options;                                                                                              //
        }()                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
  }                                                                                                                    //
}]);                                                                                                                   //
                                                                                                                       //
Schemas.Url = new SimpleSchema({                                                                                       // 189
  url: {                                                                                                               // 190
    type: String                                                                                                       // 191
  },                                                                                                                   //
  description: {                                                                                                       // 193
    type: String,                                                                                                      // 194
    optional: true                                                                                                     // 195
  },                                                                                                                   //
  type: {                                                                                                              // 197
    type: String,                                                                                                      // 198
    optional: true                                                                                                     // 199
  },                                                                                                                   //
  createdAt: {                                                                                                         // 201
    type: Date,                                                                                                        // 202
    optional: true,                                                                                                    // 203
    autoform: {                                                                                                        // 204
      omit: true                                                                                                       // 205
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Image = new SimpleSchema({                                                                                     // 210
  src: {                                                                                                               // 211
    type: String,                                                                                                      // 212
    autoform: {                                                                                                        // 213
      afFieldInput: {                                                                                                  // 214
        type: 'upload',                                                                                                // 215
        collection: 'Images',                                                                                          // 216
        label: 'Choose file'                                                                                           // 217
      }                                                                                                                //
    },                                                                                                                 //
    //  uploadProgressTemplate: 'customProgressBar'                                                                    //
    label: 'Source'                                                                                                    // 221
  },                                                                                                                   //
  description: {                                                                                                       // 223
    type: String,                                                                                                      // 224
    optional: true                                                                                                     // 225
  },                                                                                                                   //
  height: {                                                                                                            // 227
    type: Number,                                                                                                      // 228
    optional: true,                                                                                                    // 229
    autoform: {                                                                                                        // 230
      omit: true                                                                                                       // 231
    }                                                                                                                  //
  },                                                                                                                   //
  width: {                                                                                                             // 234
    type: Number,                                                                                                      // 235
    optional: true,                                                                                                    // 236
    autoform: {                                                                                                        // 237
      omit: true                                                                                                       // 238
    }                                                                                                                  //
  },                                                                                                                   //
  showcased: {                                                                                                         // 241
    type: Boolean,                                                                                                     // 242
    optional: true                                                                                                     // 243
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Impact = new SimpleSchema({                                                                                    // 247
  userId: {                                                                                                            // 248
    type: String,                                                                                                      // 249
    autoform: {                                                                                                        // 250
      omit: true                                                                                                       // 251
    }                                                                                                                  //
  },                                                                                                                   //
  createdAt: {                                                                                                         // 254
    type: Date,                                                                                                        // 255
    autoform: {                                                                                                        // 256
      omit: true                                                                                                       // 257
    }                                                                                                                  //
  },                                                                                                                   //
  expertise: {                                                                                                         // 260
    type: Number                                                                                                       // 261
  },                                                                                                                   //
  industries: {                                                                                                        // 263
    type: Object                                                                                                       // 264
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Answer = new SimpleSchema({                                                                                    // 268
  q01: {                                                                                                               // 269
    type: Number                                                                                                       // 270
  },                                                                                                                   //
  q02: {                                                                                                               // 272
    type: Number                                                                                                       // 273
  },                                                                                                                   //
  q03: {                                                                                                               // 275
    type: Number                                                                                                       // 276
  },                                                                                                                   //
  q04: {                                                                                                               // 278
    type: Number                                                                                                       // 279
  },                                                                                                                   //
  q05: {                                                                                                               // 281
    type: Number                                                                                                       // 282
  },                                                                                                                   //
  q06: {                                                                                                               // 284
    type: Number                                                                                                       // 285
  },                                                                                                                   //
  q07: {                                                                                                               // 287
    type: Number                                                                                                       // 288
  },                                                                                                                   //
  q08: {                                                                                                               // 290
    type: Number                                                                                                       // 291
  },                                                                                                                   //
  q09: {                                                                                                               // 293
    type: Number                                                                                                       // 294
  },                                                                                                                   //
  q10: {                                                                                                               // 296
    type: Number                                                                                                       // 297
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Scenario = new SimpleSchema({                                                                                  // 301
  name: {                                                                                                              // 302
    type: String                                                                                                       // 303
  },                                                                                                                   //
  description: {                                                                                                       // 305
    type: [Schemas.Description]                                                                                        // 306
  },                                                                                                                   //
  imgs: {                                                                                                              // 308
    type: [Schemas.Image]                                                                                              // 309
  },                                                                                                                   //
  technologiesId: {                                                                                                    // 311
    type: [String]                                                                                                     // 312
  },                                                                                                                   //
  attachmentsId: {                                                                                                     // 314
    type: [String]                                                                                                     // 315
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.KeyPeople = new SimpleSchema({                                                                                 // 319
  _id: {                                                                                                               // 320
    type: String,                                                                                                      // 321
    optional: true                                                                                                     // 322
  },                                                                                                                   //
  name: {                                                                                                              // 324
    type: String                                                                                                       // 325
  },                                                                                                                   //
  role: {                                                                                                              // 327
    type: String                                                                                                       // 328
  },                                                                                                                   //
  image: {                                                                                                             // 330
    type: String,                                                                                                      // 331
    autoform: {                                                                                                        // 332
      type: 'url'                                                                                                      // 333
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Content = new SimpleSchema({                                                                                   // 338
  type: {                                                                                                              // 339
    type: String                                                                                                       // 340
  },                                                                                                                   //
  url: {                                                                                                               // 342
    type: String                                                                                                       // 343
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Search = new SimpleSchema({                                                                                    // 347
  url: {                                                                                                               // 348
    type: String,                                                                                                      // 349
    autoform: {                                                                                                        // 350
      type: 'url'                                                                                                      // 351
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"simple_counter.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/simple_counter.js                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
//                                                                                                                     //
//  Allow SimpleSchema to have counterFor field                                                                        //
//                                                                                                                     //
SimpleSchema.extendOptions({                                                                                           // 4
  counterFor: Match.Optional(String)                                                                                   // 5
});                                                                                                                    //
                                                                                                                       //
Mongo.Collection.prototype.simpleCounter = function () {                                                               // 9
  //                                                                                                                   //
  //  check if there is an attached SimpleSchema instance                                                              //
  //                                                                                                                   //
  if (!this.simpleSchema()) {                                                                                          // 13
    throw new Error('SimpleCounter needs an attached SimpleSchema instance.');                                         // 14
  }                                                                                                                    //
                                                                                                                       //
  //                                                                                                                   //
  //  grab collection simpleSchema instance                                                                            //
  //                                                                                                                   //
  var schema = this.simpleSchema().schema();                                                                           // 9
  this.simpleCounter.keys = [];                                                                                        // 21
  //                                                                                                                   //
  //  grab keys that have esDriver: true                                                                               //
  //                                                                                                                   //
  for (var key in meteorBabelHelpers.sanitizeForInObject(schema)) {                                                    // 9
    if (schema[key].counterFor) {                                                                                      // 26
      this.simpleCounter.keys.push({                                                                                   // 27
        key: key,                                                                                                      // 28
        counterFor: schema[key].counterFor                                                                             // 29
      });                                                                                                              //
    }                                                                                                                  //
  }                                                                                                                    //
                                                                                                                       //
  console.log(this.simpleCounter.keys);                                                                                // 34
                                                                                                                       //
  //                                                                                                                   //
  //  create a new schema from them                                                                                    //
  //                                                                                                                   //
                                                                                                                       //
  //                                                                                                                   //
  //  Using self because inside hooks I need "this"                                                                    //
  //                                                                                                                   //
  var self = this;                                                                                                     // 9
  //                                                                                                                   //
  //  "insert" hooks                                                                                                   //
  //                                                                                                                   //
  this.after.insert(function (userId, doc) {                                                                           // 9
    /*  let $modifier = {                                                                                              //
        $set: {}                                                                                                       //
      };                                                                                                               //
       _.each(self.simpleCounter.keys, (tracked) => {                                                                  //
        let targetField = doc[tracked.counterFor]                                                                      //
        $modifier.$set[tracked.key] = _.isArray(targetField) ? targetField.length : 0;                                 //
        console.log(tracked.key, ' - ', doc[tracked.counterFor]);                                                      //
      })*/                                                                                                             //
  });                                                                                                                  //
                                                                                                                       //
  //                                                                                                                   //
  //  "update" hook                                                                                                    //
  //                                                                                                                   //
  this.after.update(function (userId, doc, fieldNames, modifier) {});                                                  // 9
                                                                                                                       //
  //                                                                                                                   //
  //  "remove" hook                                                                                                    //
  //                                                                                                                   //
  this.after.remove(function (userId, doc) {});                                                                        // 9
};                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"tabular_tables.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/_shared/tabular_tables.js                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
TabularTables = {};                                                                                                    // 1
Meteor.isClient && Template.registerHelper('TabularTables', TabularTables);                                            // 2
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"attachments":{"Attachments.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/attachments/Attachments.js                                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Attachments = new Mongo.Collection('attachments');                                                                     // 1
                                                                                                                       //
// =================================                                                                                   //
// ======== Validations ============                                                                                   //
// =================================                                                                                   //
                                                                                                                       //
Attachments.validations = {                                                                                            // 8
  expectedFileReference: function () {                                                                                 // 10
    function expectedFileReference() {                                                                                 //
      var from = this.field('from').value;                                                                             // 11
                                                                                                                       //
      // Non web references needs a file reference.                                                                    //
      if (from === 'web') return true;                                                                                 // 10
      return this.value !== undefined ? true : 'expectedFileReference';                                                // 15
    }                                                                                                                  //
                                                                                                                       //
    return expectedFileReference;                                                                                      //
  }(),                                                                                                                 //
  expectedFileSourceUrl: function () {                                                                                 // 18
    function expectedFileSourceUrl() {                                                                                 //
      var from = this.field('from').value;                                                                             // 19
                                                                                                                       //
      if (from !== 'url') return true;                                                                                 // 21
      return this.value !== undefined ? true : 'expectedFileSourceUrl';                                                // 22
    }                                                                                                                  //
                                                                                                                       //
    return expectedFileSourceUrl;                                                                                      //
  }(),                                                                                                                 //
  expectedWebReference: function () {                                                                                  // 24
    function expectedWebReference() {                                                                                  //
      var from = this.field('from').value;                                                                             // 25
                                                                                                                       //
      if (from !== 'web') return true;                                                                                 // 27
      return this.value !== undefined ? true : 'expectedWebReference';                                                 // 28
    }                                                                                                                  //
                                                                                                                       //
    return expectedWebReference;                                                                                       //
  }()                                                                                                                  //
};                                                                                                                     //
                                                                                                                       //
SimpleSchema.messages({                                                                                                // 33
  expectedFileReference: 'Expected file reference'                                                                     // 34
});                                                                                                                    //
SimpleSchema.messages({                                                                                                // 36
  expectedWebReference: 'Expected web reference'                                                                       // 37
});                                                                                                                    //
SimpleSchema.messages({                                                                                                // 39
  expectedFileSourceUrl: 'Expected sourceUrl from remote files'                                                        // 40
});                                                                                                                    //
                                                                                                                       //
// =================================                                                                                   //
// ========== Helpers ==============                                                                                   //
// =================================                                                                                   //
                                                                                                                       //
Attachments.helpers({                                                                                                  // 48
  isFromWeb: function () {                                                                                             // 49
    function isFromWeb() {                                                                                             //
      return this.from === 'web';                                                                                      // 50
    }                                                                                                                  //
                                                                                                                       //
    return isFromWeb;                                                                                                  //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
// =================================                                                                                   //
// ========== Schema ==============                                                                                    //
// =================================                                                                                   //
                                                                                                                       //
Schemas.Attachment = new SimpleSchema({                                                                                // 58
  name: {                                                                                                              // 59
    type: String,                                                                                                      // 60
    esDriver: true,                                                                                                    // 61
    logDriver: true                                                                                                    // 62
  },                                                                                                                   //
  description: {                                                                                                       // 64
    type: String,                                                                                                      // 65
    esDriver: true,                                                                                                    // 66
    logDriver: true,                                                                                                   // 67
    optional: true,                                                                                                    // 68
    autoform: {                                                                                                        // 69
      afFieldInput: {                                                                                                  // 70
        type: 'textarea',                                                                                              // 71
        rows: 8                                                                                                        // 72
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  from: {                                                                                                              // 76
    type: String,                                                                                                      // 77
    esDriver: true,                                                                                                    // 78
    allowedValues: ['web', 'url', 'upload']                                                                            // 79
  },                                                                                                                   //
  /*                                                                                                                   //
  tags: {                                                                                                              //
    type: [String],                                                                                                    //
    optional: true,                                                                                                    //
    esDriver: true,                                                                                                    //
    autoform: {                                                                                                        //
      type: 'tags'                                                                                                     //
    }                                                                                                                  //
  },                                                                                                                   //
  */                                                                                                                   //
  type: {                                                                                                              // 91
    type: String,                                                                                                      // 92
    esDriver: true,                                                                                                    // 93
    logDriver: true,                                                                                                   // 94
    allowedValues: ['article', 'whitepaper', 'news', 'news', 'product_page', 'media'],                                 // 95
    autoform: {                                                                                                        // 103
      type: 'selectize',                                                                                               // 104
      options: [{                                                                                                      // 105
        label: 'Article',                                                                                              // 106
        value: 'article'                                                                                               // 107
      }, {                                                                                                             //
        label: 'Whitepaper',                                                                                           // 109
        value: 'whitepaper'                                                                                            // 110
      }, {                                                                                                             //
        label: 'News',                                                                                                 // 112
        value: 'news'                                                                                                  // 113
      }, {                                                                                                             //
        label: 'Product page',                                                                                         // 115
        value: 'product_page'                                                                                          // 116
      }, {                                                                                                             //
        label: 'Media',                                                                                                // 118
        value: 'media'                                                                                                 // 119
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  web: {                                                                                                               // 123
    optional: true,                                                                                                    // 124
    esDriver: true,                                                                                                    // 125
    custom: Attachments.validations.expectedWebReference,                                                              // 126
    type: new SimpleSchema({                                                                                           // 127
      sourceUrl: {                                                                                                     // 128
        type: String,                                                                                                  // 129
        esDriver: true,                                                                                                // 130
        regEx: SimpleSchema.RegEx.Url                                                                                  // 131
      },                                                                                                               //
      thumbnailUrl: {                                                                                                  // 133
        type: String,                                                                                                  // 134
        esDriver: true,                                                                                                // 135
        label: 'Thumbnail',                                                                                            // 136
        regEx: SimpleSchema.RegEx.Url                                                                                  // 137
      }                                                                                                                //
    })                                                                                                                 //
  },                                                                                                                   //
  file: {                                                                                                              // 141
    optional: true,                                                                                                    // 142
    esDriver: true,                                                                                                    // 143
    custom: Attachments.validations.expectedFileReference,                                                             // 144
                                                                                                                       //
    type: new SimpleSchema({                                                                                           // 146
      _id: {                                                                                                           // 147
        esDriver: true,                                                                                                // 148
        type: String                                                                                                   // 149
      },                                                                                                               //
      type: {                                                                                                          // 151
        esDriver: true,                                                                                                // 152
        type: String                                                                                                   // 153
      },                                                                                                               //
      sourceUrl: {                                                                                                     // 155
        esDriver: true,                                                                                                // 156
        optional: true,                                                                                                // 157
        type: String,                                                                                                  // 158
        regEx: SimpleSchema.RegEx.Url,                                                                                 // 159
        custom: Attachments.validations.expectedFileSourceUrl                                                          // 160
      }                                                                                                                //
    })                                                                                                                 //
  }                                                                                                                    //
                                                                                                                       //
});                                                                                                                    //
                                                                                                                       //
Attachments.attachSchema(Schemas.Attachment);                                                                          // 168
Attachments.attachBehaviour('timestampable');                                                                          // 169
Meteor.isServer && Attachments.esDriver(esClient, 'techdb', 'attachments');                                            // 170
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"attachments_methods.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/attachments/attachments_methods.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Attachments.methods = {};                                                                                              // 1
                                                                                                                       //
Attachments.methods.add = new ValidatedMethod({                                                                        // 3
  name: 'Attachments.methods.add',                                                                                     // 4
  validate: Schemas.Attachment.validator(),                                                                            // 5
  run: function () {                                                                                                   // 6
    function run(doc) {                                                                                                //
      if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                    // 7
        return Attachments.insert(doc);                                                                                // 8
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 10
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
Attachments.methods.update = new ValidatedMethod({                                                                     // 13
  name: 'Attachments.methods.update',                                                                                  // 14
  validate: Schemas.validatedMethodUpdateSchema.validator(),                                                           // 15
  run: function () {                                                                                                   // 16
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
      var modifier = _ref.modifier;                                                                                    //
                                                                                                                       //
      if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                    // 17
        return Attachments.update(_id, modifier);                                                                      // 18
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 20
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.methods({                                                                                                       // 24
  'Attachments.methods.remove': function () {                                                                          // 25
    function AttachmentsMethodsRemove(attchId) {                                                                       // 25
      check(attchId, String);                                                                                          // 26
      if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                    // 27
        return Attachments.remove({ _id: attchId });                                                                   // 28
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 30
    }                                                                                                                  //
                                                                                                                       //
    return AttachmentsMethodsRemove;                                                                                   //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"attachments_tabular.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/attachments/attachments_tabular.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
TabularTables.Attachments = new Tabular.Table({                                                                        // 1
  name: 'AttachmentsList',                                                                                             // 2
  collection: Attachments,                                                                                             // 3
  sub: new SubsManager(),                                                                                              // 4
  pub: 'tabularAttachmentsList',                                                                                       // 5
  autoWidth: false,                                                                                                    // 6
  responsive: true,                                                                                                    // 7
  stateSave: true,                                                                                                     // 8
  extraFields: ['_id'],                                                                                                // 9
  columns: [{                                                                                                          // 10
    title: 'Name',                                                                                                     // 12
    data: 'name',                                                                                                      // 13
    width: '50%'                                                                                                       // 14
  }, {                                                                                                                 //
    title: 'Country',                                                                                                  // 17
    data: 'country',                                                                                                   // 18
    width: '40%'                                                                                                       // 19
  }, {                                                                                                                 //
    title: 'Actions',                                                                                                  // 22
    tmpl: Meteor.isClient && Template.attachmentsActions,                                                              // 23
    width: '10%'                                                                                                       // 24
  }],                                                                                                                  //
  bPaginate: true                                                                                                      // 26
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"collections":{"Collections.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collections/Collections.js                                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Collections = new Mongo.Collection('collections');                                                                     // 1
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Schema                                                                                                              //
 *                                                                                                                     //
 */                                                                                                                    //
Schemas.Collection = new SimpleSchema({                                                                                // 8
  name: {                                                                                                              // 9
    type: String                                                                                                       // 10
  },                                                                                                                   //
  description: {                                                                                                       // 12
    type: Schemas.Description.pick(['userId', 'createdAt', 'status', 'longText'])                                      // 13
  },                                                                                                                   //
  projectId: {                                                                                                         // 15
    type: String                                                                                                       // 16
  },                                                                                                                   //
  collectionsSetId: {                                                                                                  // 18
    type: String,                                                                                                      // 19
    optional: true                                                                                                     // 20
  },                                                                                                                   //
  parentId: {                                                                                                          // 22
    type: String,                                                                                                      // 23
    optional: true                                                                                                     // 24
  },                                                                                                                   //
  technologiesId: {                                                                                                    // 26
    type: [String],                                                                                                    // 27
    optional: true                                                                                                     // 28
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Behaviours                                                                                                          //
 *                                                                                                                     //
 */                                                                                                                    //
Collections.attachSchema(Schemas.Collection);                                                                          // 37
Collections.attachBehaviour('timestampable');                                                                          // 38
Meteor.isServer && Collections.esDriver(esClient, 'techdb', 'organizations');                                          // 39
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Helpers                                                                                                             //
 *                                                                                                                     //
 */                                                                                                                    //
Collections.helpers({                                                                                                  // 47
  getProjects: function () {                                                                                           // 48
    function getProjects() {                                                                                           //
      return Projects.find({                                                                                           // 49
        _id: {                                                                                                         // 50
          $in: this.projectsId || []                                                                                   // 51
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return getProjects;                                                                                                //
  }(),                                                                                                                 //
  technologies: function () {                                                                                          // 55
    function technologies() {                                                                                          //
      return Technologies.find({                                                                                       // 56
        _id: {                                                                                                         // 57
          $in: this.technologiesId || []                                                                               // 58
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return technologies;                                                                                               //
  }(),                                                                                                                 //
  attachments: function () {                                                                                           // 62
    function attachments() {                                                                                           //
      return Attachments.find({                                                                                        // 63
        _id: {                                                                                                         // 64
          $in: this.attachmentsId || []                                                                                // 65
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return attachments;                                                                                                //
  }(),                                                                                                                 //
  logoImage: function () {                                                                                             // 69
    function logoImage() {                                                                                             //
      if (this.logo) {                                                                                                 // 70
        return Images.findOne({                                                                                        // 71
          _id: this.logo                                                                                               // 72
        });                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return logoImage;                                                                                                  //
  }(),                                                                                                                 //
  childCollections: function () {                                                                                      // 76
    function childCollections() {                                                                                      //
      return Collections.find({                                                                                        // 77
        parentId: this._id                                                                                             // 78
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return childCollections;                                                                                           //
  }(),                                                                                                                 //
  techCount: function () {                                                                                             // 81
    function techCount() {                                                                                             //
      return this.technologiesId && this.technologiesId.length || 0;                                                   // 82
    }                                                                                                                  //
                                                                                                                       //
    return techCount;                                                                                                  //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collections_hooks.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collections/collections_hooks.js                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Collections.after.insert(function (userId, doc) {                                                                      // 1
  var projectId = doc.projectId;                                                                                       // 2
  Projects.update({                                                                                                    // 3
    _id: projectId                                                                                                     // 4
  }, {                                                                                                                 //
    $inc: {                                                                                                            // 6
      collectionsCount: 1                                                                                              // 7
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.after.insert(function (userId, doc) {                                                                      // 12
  var projectId = doc.projectId;                                                                                       // 13
  Projects.update({                                                                                                    // 14
    _id: projectId                                                                                                     // 15
  }, {                                                                                                                 //
    $inc: {                                                                                                            // 17
      collectionsCount: -1                                                                                             // 18
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collections_methods.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collections/collections_methods.js                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
function checkPermissions() {                                                                                          // 1
  if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                        // 2
    return true;                                                                                                       // 3
  }                                                                                                                    //
  throw new Meteor.Error(403, 'Not authorized');                                                                       // 5
}                                                                                                                      //
                                                                                                                       //
Collections.methods = {};                                                                                              // 9
                                                                                                                       //
Collections.methods.add = new ValidatedMethod({                                                                        // 11
  name: 'Collections.methods.add',                                                                                     // 12
  validate: Schemas.Collection.validator(),                                                                            // 13
  run: function () {                                                                                                   // 14
    function run(doc) {                                                                                                //
      checkPermissions();                                                                                              // 15
      return Collections.insert(doc);                                                                                  // 16
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.remove = new ValidatedMethod({                                                                     // 20
  name: 'Collections.methods.remove',                                                                                  // 21
  validate: new SimpleSchema({                                                                                         // 22
    _id: { type: String }                                                                                              // 23
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 25
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
                                                                                                                       //
      check(_id, String);                                                                                              // 26
      checkPermissions();                                                                                              // 27
      // Delete the collection and all it's children                                                                   //
      return Collections.remove({                                                                                      // 25
        $or: [{                                                                                                        // 30
          _id: _id                                                                                                     // 31
        }, {                                                                                                           //
          parentId: _id                                                                                                // 33
        }]                                                                                                             //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.copy = new ValidatedMethod({                                                                       // 39
  name: 'Collections.methods.copy',                                                                                    // 40
  validate: new SimpleSchema({                                                                                         // 41
    _id: { type: String }                                                                                              // 42
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 44
    function run(_ref2) {                                                                                              //
      var _id = _ref2._id;                                                                                             //
                                                                                                                       //
      check(_id, String);                                                                                              // 45
      checkPermissions();                                                                                              // 46
                                                                                                                       //
      var collection = Collections.findOne({                                                                           // 48
        _id: _id                                                                                                       // 49
      });                                                                                                              //
                                                                                                                       //
      delete collection._id;                                                                                           // 52
      delete collection.updatedAt;                                                                                     // 53
      delete collection.createdAt;                                                                                     // 54
      delete collection.updatedBy;                                                                                     // 55
                                                                                                                       //
      collection.name = collection.name + ' Copy';                                                                     // 57
      return Collections.insert(collection);                                                                           // 58
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.update = new ValidatedMethod({                                                                     // 63
  name: 'Collections.methods.update',                                                                                  // 64
  validate: new SimpleSchema({                                                                                         // 65
    _id: { type: String },                                                                                             // 66
    modifier: { type: Object, blackbox: true }                                                                         // 67
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 69
    function run(_ref3) {                                                                                              //
      var _id = _ref3._id;                                                                                             //
      var modifier = _ref3.modifier;                                                                                   //
                                                                                                                       //
      checkPermissions();                                                                                              // 70
      return Collections.update(_id, modifier);                                                                        // 71
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.pushTechnology = new ValidatedMethod({                                                             // 75
  name: 'Collections.methods.pushTechnology',                                                                          // 76
  validate: function () {                                                                                              // 77
    function validate(_ref4) {                                                                                         //
      var collectionId = _ref4.collectionId;                                                                           //
      var techId = _ref4.techId;                                                                                       //
      var position = _ref4.position;                                                                                   //
                                                                                                                       //
      check(collectionId, String);                                                                                     // 78
      check(techId, String);                                                                                           // 79
      check(position, Match.Maybe(Number));                                                                            // 80
    }                                                                                                                  //
                                                                                                                       //
    return validate;                                                                                                   //
  }(),                                                                                                                 //
  run: function () {                                                                                                   // 82
    function run(_ref5) {                                                                                              //
      var collectionId = _ref5.collectionId;                                                                           //
      var techId = _ref5.techId;                                                                                       //
      var position = _ref5.position;                                                                                   //
                                                                                                                       //
      var pushedObj = { $each: [techId] };                                                                             // 83
      if (position !== null && position >= 0) pushedObj.$position = position;                                          // 84
                                                                                                                       //
      var targetCollection = Collections.findOne({                                                                     // 87
        _id: collectionId                                                                                              // 88
      });                                                                                                              //
                                                                                                                       //
      if (!targetCollection) throw new Meteor.Error('target-not-found');                                               // 91
      if (_.contains(targetCollection.technologiesId, techId)) throw new Meteor.Error('target-already-has-tech');      // 92
                                                                                                                       //
      return Collections.update({                                                                                      // 94
        _id: collectionId                                                                                              // 95
      }, {                                                                                                             //
        $push: {                                                                                                       // 97
          technologiesId: pushedObj                                                                                    // 98
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.pullTechnology = new ValidatedMethod({                                                             // 104
  name: 'Collections.methods.pullTechnology',                                                                          // 105
  validate: function () {                                                                                              // 106
    function validate(_ref6) {                                                                                         //
      var source = _ref6.source;                                                                                       //
      var techId = _ref6.techId;                                                                                       //
                                                                                                                       //
      check(source, String);                                                                                           // 107
      check(techId, String);                                                                                           // 108
    }                                                                                                                  //
                                                                                                                       //
    return validate;                                                                                                   //
  }(),                                                                                                                 //
  run: function () {                                                                                                   // 110
    function run(_ref7) {                                                                                              //
      var source = _ref7.source;                                                                                       //
      var techId = _ref7.techId;                                                                                       //
                                                                                                                       //
      return Collections.update({                                                                                      // 111
        _id: source                                                                                                    // 112
      }, {                                                                                                             //
        $pull: {                                                                                                       // 114
          technologiesId: techId                                                                                       // 115
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Collections.methods.moveTechnology = new ValidatedMethod({                                                             // 122
  name: 'Collections.methods.moveTechnology',                                                                          // 123
  validate: function () {                                                                                              // 124
    function validate(_ref8) {                                                                                         //
      var source = _ref8.source;                                                                                       //
      var target = _ref8.target;                                                                                       //
      var techId = _ref8.techId;                                                                                       //
      var position = _ref8.position;                                                                                   //
                                                                                                                       //
      check(source, String);                                                                                           // 125
      check(target, String);                                                                                           // 126
      check(techId, String);                                                                                           // 127
      check(position, Match.Maybe(Number));                                                                            // 128
    }                                                                                                                  //
                                                                                                                       //
    return validate;                                                                                                   //
  }(),                                                                                                                 //
  run: function () {                                                                                                   // 130
    function run(_ref9) {                                                                                              //
      var source = _ref9.source;                                                                                       //
      var target = _ref9.target;                                                                                       //
      var techId = _ref9.techId;                                                                                       //
      var position = _ref9.position;                                                                                   //
                                                                                                                       //
      var sourceCollection = Collections.findOne({                                                                     // 131
        _id: source                                                                                                    // 132
      });                                                                                                              //
                                                                                                                       //
      if (!sourceCollection) throw new Meteor.Error('source-not-found');                                               // 135
      if (!_.contains(sourceCollection.technologiesId, techId)) throw new Meteor.Error('not-in-source');               // 136
                                                                                                                       //
      var targetCollection = Collections.findOne({                                                                     // 138
        _id: target                                                                                                    // 139
      });                                                                                                              //
                                                                                                                       //
      if (!targetCollection) throw new Meteor.Error('target-not-found');                                               // 142
      if (source !== target && _.contains(targetCollection.technologiesId, techId)) {                                  // 143
        throw new Meteor.Error('target-already-has-tech');                                                             // 144
      }                                                                                                                //
                                                                                                                       //
      var sourceUpdate = Collections.update({                                                                          // 147
        _id: source                                                                                                    // 148
      }, {                                                                                                             //
        $pull: {                                                                                                       // 150
          technologiesId: techId                                                                                       // 151
        }                                                                                                              //
      });                                                                                                              //
                                                                                                                       //
      if (!sourceUpdate) throw new Meteor.Error('source-update-error');                                                // 155
                                                                                                                       //
      var pushedObj = { $each: [techId] };                                                                             // 157
      if (position !== null && position >= 0) pushedObj.$position = position;                                          // 158
                                                                                                                       //
      var targetUpdate = Collections.update({                                                                          // 160
        _id: target                                                                                                    // 161
      }, {                                                                                                             //
        $push: {                                                                                                       // 163
          technologiesId: pushedObj                                                                                    // 164
        }                                                                                                              //
      });                                                                                                              //
                                                                                                                       //
      if (!targetUpdate) throw new Meteor.Error('source-update-error');                                                // 168
                                                                                                                       //
      return true;                                                                                                     // 170
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"collectionsSet":{"CollectionsSet.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collectionsSet/CollectionsSet.js                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
CollectionsSet = new Mongo.Collection('collectionsSet');                                                               // 1
Schemas.CollectionsSet = new SimpleSchema({                                                                            // 2
  name: {                                                                                                              // 3
    type: String                                                                                                       // 4
  },                                                                                                                   //
  collectionsId: {                                                                                                     // 6
    type: [String],                                                                                                    // 7
    optional: true                                                                                                     // 8
  },                                                                                                                   //
  projectId: {                                                                                                         // 10
    type: String                                                                                                       // 11
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
CollectionsSet.helpers({                                                                                               // 16
  project: function () {                                                                                               // 17
    function project() {                                                                                               //
      return Projects.findOne({                                                                                        // 18
        _id: this.projectId                                                                                            // 19
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return project;                                                                                                    //
  }(),                                                                                                                 //
                                                                                                                       //
  // top level collections                                                                                             //
  collections: function () {                                                                                           // 23
    function collections() {                                                                                           //
      var col = Collections.find({                                                                                     // 24
        collectionsSetId: this._id,                                                                                    // 25
        parentId: {                                                                                                    // 26
          $exists: false                                                                                               // 27
        }                                                                                                              //
      });                                                                                                              //
      return col;                                                                                                      // 30
    }                                                                                                                  //
                                                                                                                       //
    return collections;                                                                                                //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
CollectionsSet.attachSchema(Schemas.CollectionsSet);                                                                   // 34
CollectionsSet.attachBehaviour('timestampable');                                                                       // 35
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collections_set_hooks.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collectionsSet/collections_set_hooks.js                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
CollectionsSet.after.insert(function (userId, doc) {                                                                   // 1
  var projectId = doc.projectId;                                                                                       // 2
  Projects.update({                                                                                                    // 3
    _id: projectId                                                                                                     // 4
  }, {                                                                                                                 //
    $inc: {                                                                                                            // 6
      collectionsSetCount: 1                                                                                           // 7
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
CollectionsSet.after.remove(function (userId, doc) {                                                                   // 12
  var projectId = doc.projectId;                                                                                       // 13
  Projects.update({                                                                                                    // 14
    _id: projectId                                                                                                     // 15
  }, {                                                                                                                 //
    $inc: {                                                                                                            // 17
      collectionsSetCount: -1                                                                                          // 18
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collections_set_methods.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/collectionsSet/collections_set_methods.js                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
CollectionsSet.methods = {};                                                                                           // 1
function checkPermissions() {                                                                                          // 2
  if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                        // 3
    return true;                                                                                                       // 4
  }                                                                                                                    //
  throw new Meteor.Error(403, 'Not authorized');                                                                       // 6
}                                                                                                                      //
                                                                                                                       //
CollectionsSet.methods.add = new ValidatedMethod({                                                                     // 10
  name: 'CollectionsSet.methods.add',                                                                                  // 11
  validate: Schemas.CollectionsSet.validator(),                                                                        // 12
  run: function () {                                                                                                   // 13
    function run(doc) {                                                                                                //
      return CollectionsSet.insert(doc);                                                                               // 14
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
CollectionsSet.methods.remove = new ValidatedMethod({                                                                  // 18
  name: 'CollectionsSet.methods.remove',                                                                               // 19
  validate: new SimpleSchema({                                                                                         // 20
    _id: { type: String }                                                                                              // 21
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 23
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
                                                                                                                       //
      check(_id, String);                                                                                              // 24
      checkPermissions();                                                                                              // 25
      CollectionsSet.remove({                                                                                          // 26
        _id: _id                                                                                                       // 27
      });                                                                                                              //
      // Delete all the Collections inside of it.                                                                      //
      Collections.remove({                                                                                             // 23
        collectionsSetId: _id                                                                                          // 31
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"organizations":{"Organizations.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/organizations/Organizations.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Organizations = new Mongo.Collection('organizations');                                                                 // 1
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Schema                                                                                                              //
 *                                                                                                                     //
 */                                                                                                                    //
Schemas.Organization = new SimpleSchema({                                                                              // 8
  name: {                                                                                                              // 9
    type: String,                                                                                                      // 10
    esDriver: true,                                                                                                    // 11
    logDriver: true                                                                                                    // 12
  },                                                                                                                   //
  description: {                                                                                                       // 14
    type: String,                                                                                                      // 15
    esDriver: true,                                                                                                    // 16
    logDriver: true,                                                                                                   // 17
    autoform: {                                                                                                        // 18
      type: 'textarea',                                                                                                // 19
      rows: 4                                                                                                          // 20
    }                                                                                                                  //
  },                                                                                                                   //
  foundingYear: {                                                                                                      // 23
    type: Number,                                                                                                      // 24
    esDriver: true,                                                                                                    // 25
    logDriver: true                                                                                                    // 26
  },                                                                                                                   //
  country: {                                                                                                           // 28
    type: String,                                                                                                      // 29
    esDriver: true,                                                                                                    // 30
    logDriver: true,                                                                                                   // 31
    autoform: {                                                                                                        // 32
      type: 'countryFlags'                                                                                             // 33
    }                                                                                                                  //
  },                                                                                                                   //
  type: {                                                                                                              // 36
    type: String,                                                                                                      // 37
    esDriver: true,                                                                                                    // 38
    logDriver: true,                                                                                                   // 39
    allowedValues: ['academic', 'non-profit', 'governamental', 'private'],                                             // 40
    autoform: {                                                                                                        // 41
      type: 'selectize',                                                                                               // 42
      options: [{                                                                                                      // 43
        label: 'Academic',                                                                                             // 44
        value: 'academic'                                                                                              // 45
      }, {                                                                                                             //
        label: 'Non-Profit',                                                                                           // 47
        value: 'non-profit'                                                                                            // 48
      }, {                                                                                                             //
        label: 'Governamental',                                                                                        // 50
        value: 'governamental'                                                                                         // 51
      }, {                                                                                                             //
        label: 'Private',                                                                                              // 53
        value: 'private'                                                                                               // 54
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  keyPeople: {                                                                                                         // 58
    type: [Schemas.KeyPeople],                                                                                         // 59
    logDriver: true,                                                                                                   // 60
    optional: true                                                                                                     // 61
  },                                                                                                                   //
  logo: {                                                                                                              // 63
    type: String,                                                                                                      // 64
    esDriver: true,                                                                                                    // 65
    logDriver: true,                                                                                                   // 66
    optional: true,                                                                                                    // 67
    autoform: {                                                                                                        // 68
      afFieldInput: {                                                                                                  // 69
        type: 'fileUpload',                                                                                            // 70
        collection: 'Images',                                                                                          // 71
        label: 'Choose file'                                                                                           // 72
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  //  uploadProgressTemplate: 'customProgressBar'                                                                      //
  urls: {                                                                                                              // 77
    type: [Schemas.Url],                                                                                               // 78
    logDriver: true,                                                                                                   // 79
    optional: true                                                                                                     // 80
  },                                                                                                                   //
  /*  projectsId: {                                                                                                    //
      type: [String],                                                                                                  //
      optional: true,                                                                                                  //
      label: 'Related Projects',                                                                                       //
      autoform: {                                                                                                      //
        type: 'universe-select',                                                                                       //
        multiple: true,                                                                                                //
        uniPlaceholder: 'Search projects by title...',                                                                 //
        options() {                                                                                                    //
          return Projects.find().map((project) => {                                                                    //
            return {                                                                                                   //
              label: project.name,                                                                                     //
              value: project._id                                                                                       //
            };                                                                                                         //
          });                                                                                                          //
        }                                                                                                              //
      }                                                                                                                //
    },*/                                                                                                               //
  /*  technologiesId: {                                                                                                //
      type: [String],                                                                                                  //
      optional: true,                                                                                                  //
      label: 'Related Technologies',                                                                                   //
      autoform: {                                                                                                      //
        type: 'universe-select',                                                                                       //
        multiple: true,                                                                                                //
        uniPlaceholder: 'Search technology by title...',                                                               //
        options() {                                                                                                    //
          return Technologies.find().map((tech) => {                                                                   //
            return {                                                                                                   //
              label: tech.name,                                                                                        //
              value: tech._id                                                                                          //
            };                                                                                                         //
          });                                                                                                          //
        }                                                                                                              //
      }                                                                                                                //
    },*/                                                                                                               //
  attachmentsId: {                                                                                                     // 118
    type: [String],                                                                                                    // 119
    optional: true,                                                                                                    // 120
    label: 'Related Attachments',                                                                                      // 121
    autoform: {                                                                                                        // 122
      afFieldInput: {                                                                                                  // 123
        type: 'universe-select',                                                                                       // 124
        multiple: true,                                                                                                // 125
        uniPlaceholder: 'Search attachments by title...',                                                              // 126
        options: function () {                                                                                         // 127
          function options() {                                                                                         //
            return Attachments.find().map(function (attachment) {                                                      // 128
              return {                                                                                                 // 129
                label: attachment.name,                                                                                // 130
                value: attachment._id                                                                                  // 131
              };                                                                                                       //
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return options;                                                                                              //
        }()                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Behaviours                                                                                                          //
 *                                                                                                                     //
 */                                                                                                                    //
Organizations.attachSchema(Schemas.Organization);                                                                      // 146
Organizations.attachBehaviour('timestampable');                                                                        // 147
Meteor.isServer && Organizations.esDriver(esClient, 'techdb', 'organizations');                                        // 148
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Helpers                                                                                                             //
 *                                                                                                                     //
 */                                                                                                                    //
Organizations.helpers({                                                                                                // 156
  /*  getProjects() {                                                                                                  //
      return Projects.find({                                                                                           //
        _id: {                                                                                                         //
          $in: this.projectsId || []                                                                                   //
        }                                                                                                              //
      });                                                                                                              //
    },*/                                                                                                               //
                                                                                                                       //
  getProjects: function () {                                                                                           // 164
    function getProjects() {                                                                                           //
      return Projects.find({                                                                                           // 165
        organizationsId: this._id                                                                                      // 166
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return getProjects;                                                                                                //
  }(),                                                                                                                 //
                                                                                                                       //
  /*  technologies() {                                                                                                 //
      return Technologies.find({                                                                                       //
        _id: {                                                                                                         //
          $in: this.technologiesId || []                                                                               //
        }                                                                                                              //
      });                                                                                                              //
    },*/                                                                                                               //
  technologies: function () {                                                                                          // 176
    function technologies() {                                                                                          //
      return Technologies.find({                                                                                       // 177
        organizationsId: this._id                                                                                      // 178
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return technologies;                                                                                               //
  }(),                                                                                                                 //
  attachments: function () {                                                                                           // 181
    function attachments() {                                                                                           //
      return Attachments.find({                                                                                        // 182
        _id: {                                                                                                         // 183
          $in: this.attachmentsId || []                                                                                // 184
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return attachments;                                                                                                //
  }(),                                                                                                                 //
  logoImage: function () {                                                                                             // 188
    function logoImage() {                                                                                             //
      if (this.logo) {                                                                                                 // 189
        return Images.findOne({                                                                                        // 190
          _id: this.logo                                                                                               // 191
        });                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return logoImage;                                                                                                  //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"organizations_methods.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/organizations/organizations_methods.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Organizations.methods = {};                                                                                            // 1
                                                                                                                       //
function checkPermissions() {                                                                                          // 3
  if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                        // 4
    return true;                                                                                                       // 5
  }                                                                                                                    //
  throw new Meteor.Error(403, 'Not authorized');                                                                       // 7
}                                                                                                                      //
                                                                                                                       //
Organizations.methods.add = new ValidatedMethod({                                                                      // 10
  name: 'Organizations.methods.add',                                                                                   // 11
  validate: Schemas.Organization.validator(),                                                                          // 12
  run: function () {                                                                                                   // 13
    function run(doc) {                                                                                                //
      checkPermissions();                                                                                              // 14
      return Organizations.insert(doc);                                                                                // 15
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Organizations.methods.update = new ValidatedMethod({                                                                   // 20
  name: 'Organizations.methods.update',                                                                                // 21
  validate: Schemas.validatedMethodUpdateSchema.validator(),                                                           // 22
  run: function () {                                                                                                   // 23
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
      var modifier = _ref.modifier;                                                                                    //
                                                                                                                       //
      checkPermissions();                                                                                              // 24
      return Organizations.update(_id, modifier);                                                                      // 25
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.methods({                                                                                                       // 29
  'Organizations.methods.remove': function () {                                                                        // 30
    function OrganizationsMethodsRemove(orgId) {                                                                       // 30
      check(orgId, String);                                                                                            // 31
      checkPermissions();                                                                                              // 32
      return Organizations.remove({                                                                                    // 33
        _id: orgId                                                                                                     // 34
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsRemove;                                                                                 //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.methods({                                                                                                       // 40
  'Organizations.methods.addProject': function () {                                                                    // 41
    function OrganizationsMethodsAddProject(orgId, projectId) {                                                        // 41
      check(projectId, String);                                                                                        // 42
      check(orgId, String);                                                                                            // 43
      checkPermissions();                                                                                              // 44
      Organizations.update({                                                                                           // 45
        _id: orgId                                                                                                     // 46
      }, {                                                                                                             //
        $addToSet: {                                                                                                   // 48
          projectsId: projectId                                                                                        // 49
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsAddProject;                                                                             //
  }(),                                                                                                                 //
  'Organizations.methods.removeProject': function () {                                                                 // 53
    function OrganizationsMethodsRemoveProject(orgId, projectId) {                                                     // 53
      check(projectId, String);                                                                                        // 54
      check(orgId, String);                                                                                            // 55
      checkPermissions();                                                                                              // 56
      Organizations.update({                                                                                           // 57
        _id: orgId                                                                                                     // 58
      }, {                                                                                                             //
        $pull: {                                                                                                       // 60
          projectsId: projectId                                                                                        // 61
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsRemoveProject;                                                                          //
  }(),                                                                                                                 //
  'Organizations.methods.addTechnology': function () {                                                                 // 65
    function OrganizationsMethodsAddTechnology(orgId, techId) {                                                        // 65
      check(techId, String);                                                                                           // 66
      check(orgId, String);                                                                                            // 67
      checkPermissions();                                                                                              // 68
      Organizations.update({                                                                                           // 69
        _id: orgId                                                                                                     // 70
      }, {                                                                                                             //
        $addToSet: {                                                                                                   // 72
          technologiesId: techId                                                                                       // 73
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsAddTechnology;                                                                          //
  }(),                                                                                                                 //
  'Organizations.methods.removeTechnology': function () {                                                              // 77
    function OrganizationsMethodsRemoveTechnology(orgId, techId) {                                                     // 77
      check(techId, String);                                                                                           // 78
      check(orgId, String);                                                                                            // 79
      checkPermissions();                                                                                              // 80
      Organizations.update({                                                                                           // 81
        _id: orgId                                                                                                     // 82
      }, {                                                                                                             //
        $pull: {                                                                                                       // 84
          technologiesId: techId                                                                                       // 85
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsRemoveTechnology;                                                                       //
  }(),                                                                                                                 //
  'Organizations.methods.addAttachment': function () {                                                                 // 89
    function OrganizationsMethodsAddAttachment(orgId, attchId) {                                                       // 89
      check(attchId, String);                                                                                          // 90
      check(orgId, String);                                                                                            // 91
      checkPermissions();                                                                                              // 92
      Organizations.update({                                                                                           // 93
        _id: orgId                                                                                                     // 94
      }, {                                                                                                             //
        $addToSet: {                                                                                                   // 96
          attachmentsId: attchId                                                                                       // 97
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsAddAttachment;                                                                          //
  }(),                                                                                                                 //
  'Organizations.methods.removeAttachment': function () {                                                              // 101
    function OrganizationsMethodsRemoveAttachment(orgId, attchId) {                                                    // 101
      check(attchId, String);                                                                                          // 102
      check(orgId, String);                                                                                            // 103
      checkPermissions();                                                                                              // 104
      Organizations.update({                                                                                           // 105
        _id: orgId                                                                                                     // 106
      }, {                                                                                                             //
        $pull: {                                                                                                       // 108
          attachmentsId: attchId                                                                                       // 109
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsRemoveAttachment;                                                                       //
  }(),                                                                                                                 //
  'Organizations.methods.setLogo': function () {                                                                       // 113
    function OrganizationsMethodsSetLogo(orgId, imageId) {                                                             // 113
      check(orgId, String);                                                                                            // 114
      check(imageId, String);                                                                                          // 115
      checkPermissions();                                                                                              // 116
      Organizations.update({                                                                                           // 117
        _id: orgId                                                                                                     // 118
      }, {                                                                                                             //
        $set: {                                                                                                        // 120
          logo: imageId                                                                                                // 121
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsSetLogo;                                                                                //
  }(),                                                                                                                 //
  'Organizations.methods.addKeyPeople': function () {                                                                  // 125
    function OrganizationsMethodsAddKeyPeople(orgId, doc) {                                                            // 125
      if (Meteor.isServer) {                                                                                           // 126
        chance = new Chance();                                                                                         // 127
        doc._id = chance.string();                                                                                     // 128
      }                                                                                                                //
      check(orgId, String);                                                                                            // 130
      check(doc, Schemas.KeyPeople);                                                                                   // 131
      return Organizations.update({                                                                                    // 132
        _id: orgId                                                                                                     // 133
      }, {                                                                                                             //
        $push: {                                                                                                       // 135
          keyPeople: doc                                                                                               // 136
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsAddKeyPeople;                                                                           //
  }(),                                                                                                                 //
  'Organizations.methods.removeKeyPeople': function () {                                                               // 140
    function OrganizationsMethodsRemoveKeyPeople(orgId, peopleId) {                                                    // 140
      check(orgId, String);                                                                                            // 141
      check(peopleId, String);                                                                                         // 142
                                                                                                                       //
      return Organizations.update({                                                                                    // 144
        _id: orgId                                                                                                     // 145
      }, {                                                                                                             //
        $pull: {                                                                                                       // 147
          keyPeople: {                                                                                                 // 148
            _id: peopleId                                                                                              // 149
          }                                                                                                            //
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return OrganizationsMethodsRemoveKeyPeople;                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"organizations_tabular.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/organizations/organizations_tabular.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
TabularTables.Organizations = new Tabular.Table({                                                                      // 1
  name: 'OrganizationsList',                                                                                           // 2
  collection: Organizations,                                                                                           // 3
  sub: new SubsManager(),                                                                                              // 4
  pub: 'tabularOrganizationsList',                                                                                     // 5
  autoWidth: false,                                                                                                    // 6
  responsive: true,                                                                                                    // 7
  stateSave: true,                                                                                                     // 8
  extraFields: ['_id'],                                                                                                // 9
  columns: [{                                                                                                          // 10
    title: 'Name',                                                                                                     // 12
    data: 'name',                                                                                                      // 13
    width: '50%'                                                                                                       // 14
  }, {                                                                                                                 //
    title: 'Country',                                                                                                  // 17
    data: 'country',                                                                                                   // 18
    width: '40%'                                                                                                       // 19
  }, {                                                                                                                 //
    title: 'Actions',                                                                                                  // 22
    tmpl: Meteor.isClient && Template.organizationsActions,                                                            // 23
    width: '10%'                                                                                                       // 24
  }],                                                                                                                  //
  bPaginate: true                                                                                                      // 26
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"projects":{"Projects.js":["babel-runtime/helpers/extends",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/projects/Projects.js                                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _extends2 = require('babel-runtime/helpers/extends');                                                              //
                                                                                                                       //
var _extends3 = _interopRequireDefault(_extends2);                                                                     //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
Projects = new Mongo.Collection('projects');                                                                           // 1
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Schema                                                                                                              //
 *                                                                                                                     //
 */                                                                                                                    //
                                                                                                                       //
Schemas.Project = new SimpleSchema({                                                                                   // 10
  name: {                                                                                                              // 11
    type: String,                                                                                                      // 12
    esDriver: true,                                                                                                    // 13
    logDriver: true                                                                                                    // 14
  },                                                                                                                   //
  image: {                                                                                                             // 16
    type: String,                                                                                                      // 17
    esDriver: true,                                                                                                    // 18
    logDriver: true,                                                                                                   // 19
    optional: true,                                                                                                    // 20
    autoform: {                                                                                                        // 21
      afFieldInput: {                                                                                                  // 22
        type: 'fileUpload',                                                                                            // 23
        collection: 'Images',                                                                                          // 24
        label: 'Choose file'                                                                                           // 25
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  description: {                                                                                                       // 29
    type: String,                                                                                                      // 30
    esDriver: true,                                                                                                    // 31
    logDriver: true,                                                                                                   // 32
    autoform: {                                                                                                        // 33
      type: 'textarea',                                                                                                // 34
      rows: 6                                                                                                          // 35
    }                                                                                                                  //
  },                                                                                                                   //
  status: {                                                                                                            // 38
    type: String,                                                                                                      // 39
    esDriver: true,                                                                                                    // 40
    allowedValues: ['prospect', 'open', 'closed'],                                                                     // 41
    autoform: {                                                                                                        // 42
      type: 'selectize',                                                                                               // 43
      options: [{                                                                                                      // 44
        value: 'prospect',                                                                                             // 45
        label: 'Prospect'                                                                                              // 46
      }, {                                                                                                             //
        value: 'open',                                                                                                 // 48
        label: 'Open'                                                                                                  // 49
      }, {                                                                                                             //
        value: 'closed',                                                                                               // 51
        label: 'Closed'                                                                                                // 52
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  evId: {                                                                                                              // 56
    type: String,                                                                                                      // 57
    label: 'evId',                                                                                                     // 58
    logDriver: true                                                                                                    // 59
  },                                                                                                                   //
                                                                                                                       //
  url: {                                                                                                               // 62
    type: String,                                                                                                      // 63
    logDriver: true                                                                                                    // 64
  },                                                                                                                   //
  technologiesStash: {                                                                                                 // 66
    type: [Schemas.StashedTech],                                                                                       // 67
    optional: true,                                                                                                    // 68
    label: 'Technologies Stash'                                                                                        // 69
  },                                                                                                                   //
  collectionsCount: {                                                                                                  // 71
    type: Number,                                                                                                      // 72
    optional: true,                                                                                                    // 73
    defaultValue: 0                                                                                                    // 74
  },                                                                                                                   //
  collectionsSetCount: {                                                                                               // 76
    type: Number,                                                                                                      // 77
    optional: true,                                                                                                    // 78
    defaultValue: 0                                                                                                    // 79
  },                                                                                                                   //
  technologiesStashCount: {                                                                                            // 81
    type: Number,                                                                                                      // 82
    optional: true,                                                                                                    // 83
    defaultValue: 0                                                                                                    // 84
  },                                                                                                                   //
  organizationsId: {                                                                                                   // 86
    type: [String],                                                                                                    // 87
    logDriver: true,                                                                                                   // 88
    optional: true,                                                                                                    // 89
    label: 'Organizations',                                                                                            // 90
    autoform: {                                                                                                        // 91
      type: 'universe-select',                                                                                         // 92
      multiple: true,                                                                                                  // 93
      uniPlaceholder: 'Search by organization title...',                                                               // 94
      options: function () {                                                                                           // 95
        function options() {                                                                                           // 95
          return Organizations.quickList();                                                                            //
        }                                                                                                              //
                                                                                                                       //
        return options;                                                                                                //
      }()                                                                                                              //
    }                                                                                                                  //
  },                                                                                                                   //
  attachmentsId: {                                                                                                     // 98
    type: [String],                                                                                                    // 99
    optional: true,                                                                                                    // 100
    label: 'Related Attachments',                                                                                      // 101
    autoform: {                                                                                                        // 102
      afFieldInput: {                                                                                                  // 103
        type: 'universe-select',                                                                                       // 104
        multiple: true,                                                                                                // 105
        uniPlaceholder: 'Search attachments by title...',                                                              // 106
        options: function () {                                                                                         // 107
          function options() {                                                                                         //
            return Attachments.find().map(function (attachment) {                                                      // 108
              return {                                                                                                 // 109
                label: attachment.name,                                                                                // 110
                value: attachment._id                                                                                  // 111
              };                                                                                                       //
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return options;                                                                                              //
        }()                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  usersId: {                                                                                                           // 118
    type: [String],                                                                                                    // 119
    logDriver: true,                                                                                                   // 120
    optional: true                                                                                                     // 121
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
/**                                                                                                                    //
 *                                                                                                                     //
 * Behaviours                                                                                                          //
 *                                                                                                                     //
 */                                                                                                                    //
Projects.attachSchema(Schemas.Project);                                                                                // 130
Projects.attachBehaviour('timestampable');                                                                             // 131
Meteor.isServer && Projects.esDriver(esClient, 'techdb', 'projects');                                                  // 132
                                                                                                                       //
Projects.helpers({                                                                                                     // 135
  link: function () {                                                                                                  // 136
    function link() {                                                                                                  // 136
      return window.location.host + '/projects/' + this._id + '/entry';                                                // 137
    }                                                                                                                  //
                                                                                                                       //
    return link;                                                                                                       //
  }(),                                                                                                                 //
  filteredTechStash: function () {                                                                                     // 139
    function filteredTechStash(query) {                                                                                //
      return this.technologiesStash && Technologies.find((0, _extends3['default'])({                                   // 140
        _id: { $in: this.technologiesStash }                                                                           // 141
      }, query));                                                                                                      //
    }                                                                                                                  //
                                                                                                                       //
    return filteredTechStash;                                                                                          //
  }(),                                                                                                                 //
  collectionsSet: function () {                                                                                        // 145
    function collectionsSet() {                                                                                        //
      return CollectionsSet.find({                                                                                     // 146
        projectId: this._id                                                                                            // 147
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return collectionsSet;                                                                                             //
  }(),                                                                                                                 //
  getOrganizations: function () {                                                                                      // 150
    function getOrganizations() {                                                                                      //
      return Organizations.find({                                                                                      // 151
        projectsId: this._id                                                                                           // 152
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return getOrganizations;                                                                                           //
  }(),                                                                                                                 //
  getParticipants: function () {                                                                                       // 155
    function getParticipants() {                                                                                       //
      return Meteor.users.find({                                                                                       // 156
        projectsId: this._id                                                                                           // 157
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return getParticipants;                                                                                            //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"projects_counters.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/projects/projects_counters.js                                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"projects_hooks.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/projects/projects_hooks.js                                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"projects_methods.js":["../../../imports/api/technologies/technologies",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/projects/projects_methods.js                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../../imports/api/technologies/technologies');                                         // 1
                                                                                                                       //
Projects.methods = {};                                                                                                 // 3
                                                                                                                       //
Projects.methods.add = new ValidatedMethod({                                                                           // 5
  name: 'Projects.methods.add',                                                                                        // 6
  validate: Schemas.Project.validator(),                                                                               // 7
  run: function () {                                                                                                   // 8
    function run(doc) {                                                                                                //
      if (Roles.userIsInRole(Meteor.user(), ['admin'])) {                                                              // 9
        return Projects.insert(doc);                                                                                   // 10
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 12
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Projects.methods.update = new ValidatedMethod({                                                                        // 17
  name: 'Projects.methods.update',                                                                                     // 18
  validate: Schemas.validatedMethodUpdateSchema.validator(),                                                           // 19
  run: function () {                                                                                                   // 20
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
      var modifier = _ref.modifier;                                                                                    //
                                                                                                                       //
      if (Roles.userIsInRole(Meteor.user(), ['admin'])) {                                                              // 21
        return Projects.update(_id, modifier);                                                                         // 22
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 24
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.methods({                                                                                                       // 28
  'Projects.methods.remove': function () {                                                                             // 29
    function ProjectsMethodsRemove(projectId) {                                                                        // 29
      check(projectId, String);                                                                                        // 30
      if (Roles.userIsInRole(Meteor.user(), ['admin'])) {                                                              // 31
        return Projects.remove({ _id: projectId });                                                                    // 32
      }                                                                                                                //
      throw new Meteor.Error(403, 'Not authorized');                                                                   // 34
    }                                                                                                                  //
                                                                                                                       //
    return ProjectsMethodsRemove;                                                                                      //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
/*Projects.methods.pushCollectionsSet = new ValidatedMethod({                                                          //
  name: 'Projects.methods.pushCollectionsSet',                                                                         //
  validate: Schemas.validatedMethodUpdateSchema.validator(),                                                           //
  run({ _id, modifier }) {                                                                                             //
    if (Roles.userIsInRole(Meteor.user(), ['admin'])) {                                                                //
      return Projects.update(_id, modifier);                                                                           //
    }                                                                                                                  //
    throw new Meteor.Error(403, 'Not authorized');                                                                     //
  }                                                                                                                    //
});*/                                                                                                                  //
                                                                                                                       //
Projects.methods.pushTechnologiesStash = new ValidatedMethod({                                                         // 50
  name: 'Projects.methods.pushTechnologiesStash',                                                                      // 51
  validate: function () {                                                                                              // 52
    function validate(_ref2) {                                                                                         //
      var projectId = _ref2.projectId;                                                                                 //
      var techId = _ref2.techId;                                                                                       //
                                                                                                                       //
      check(projectId, String);                                                                                        // 53
      check(techId, String);                                                                                           // 54
    }                                                                                                                  //
                                                                                                                       //
    return validate;                                                                                                   //
  }(),                                                                                                                 //
  run: function () {                                                                                                   // 56
    function run(_ref3) {                                                                                              //
      var projectId = _ref3.projectId;                                                                                 //
      var techId = _ref3.techId;                                                                                       //
                                                                                                                       //
      var project = Projects.findOne({                                                                                 // 57
        _id: projectId,                                                                                                // 58
        'technologiesStash.technologyId': techId                                                                       // 59
      });                                                                                                              //
      if (project) throw new Meteor.Error(500, 'Technology already on stash.');                                        // 61
                                                                                                                       //
      var tech = _technologies.Technologies.findOne({                                                                  // 63
        _id: techId                                                                                                    // 64
      }, {                                                                                                             //
        fields: {                                                                                                      // 66
          name: 1                                                                                                      // 67
        }                                                                                                              //
      });                                                                                                              //
      if (Meteor.isServer && !tech) {                                                                                  // 70
        throw new Meteor.Error(500, 'Technology not found.');                                                          // 71
      }                                                                                                                //
      var techName = tech && tech.name;                                                                                // 73
      var stashedTech = {                                                                                              // 74
        technologyId: techId,                                                                                          // 75
        techName: techName,                                                                                            // 76
        addedAt: new Date()                                                                                            // 77
      };                                                                                                               //
                                                                                                                       //
      return Projects.update({                                                                                         // 80
        _id: projectId                                                                                                 // 81
      }, {                                                                                                             //
        $addToSet: {                                                                                                   // 83
          technologiesStash: stashedTech                                                                               // 84
        },                                                                                                             //
        $inc: {                                                                                                        // 86
          technologiesStashCount: 1                                                                                    // 87
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Projects.methods.pullTechnologiesStash = new ValidatedMethod({                                                         // 93
  name: 'Projects.methods.pullTechnologiesStash',                                                                      // 94
  validate: function () {                                                                                              // 95
    function validate(_ref4) {                                                                                         //
      var projectId = _ref4.projectId;                                                                                 //
      var techId = _ref4.techId;                                                                                       //
                                                                                                                       //
      check(projectId, String);                                                                                        // 96
      check(techId, String);                                                                                           // 97
    }                                                                                                                  //
                                                                                                                       //
    return validate;                                                                                                   //
  }(),                                                                                                                 //
  run: function () {                                                                                                   // 99
    function run(_ref5) {                                                                                              //
      var projectId = _ref5.projectId;                                                                                 //
      var techId = _ref5.techId;                                                                                       //
                                                                                                                       //
      return Projects.update({                                                                                         // 100
        _id: projectId                                                                                                 // 101
      }, {                                                                                                             //
        $pull: {                                                                                                       // 103
          technologiesStash: {                                                                                         // 104
            technologyId: techId                                                                                       // 105
          }                                                                                                            //
        },                                                                                                             //
        $inc: {                                                                                                        // 108
          technologiesStashCount: -1                                                                                   // 109
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
/*Projects.methods.pushCollectionsSet = new ValidatedMethod({                                                          //
  name: 'Projects.methods.pushCollectionsSet',                                                                         //
  validate({projectId, collectionsSet}) {                                                                              //
    check(projectId, String);                                                                                          //
    check(collectionsSet, Schemas.CollectionsSet);                                                                     //
  },                                                                                                                   //
  run({projectId, collectionsSet}) {                                                                                   //
    return Projects.update({                                                                                           //
      _id: projectId                                                                                                   //
    }, {                                                                                                               //
      $push: {                                                                                                         //
        collectionsSet: collectionsSet                                                                                 //
      }                                                                                                                //
    });                                                                                                                //
  }                                                                                                                    //
});                                                                                                                    //
*/                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"projects_tabular.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/projects/projects_tabular.js                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
TabularTables.Projects = new Tabular.Table({                                                                           // 1
  name: 'ProjectsList',                                                                                                // 2
  collection: Projects,                                                                                                // 3
  sub: new SubsManager(),                                                                                              // 4
  pub: 'tabularProjectsList',                                                                                          // 5
  autoWidth: false,                                                                                                    // 6
  responsive: true,                                                                                                    // 7
  stateSave: true,                                                                                                     // 8
  extraFields: ['_id'],                                                                                                // 9
  columns: [{                                                                                                          // 10
    title: 'Name',                                                                                                     // 11
    data: 'name',                                                                                                      // 12
    width: '90%'                                                                                                       // 13
  }, {                                                                                                                 //
    title: 'Actions',                                                                                                  // 15
    tmpl: Meteor.isClient && Template.projectsActions,                                                                 // 16
    width: '10%'                                                                                                       // 17
  }],                                                                                                                  //
  bPaginate: true                                                                                                      // 19
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"technologies":{"Technologies.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/technologies/Technologies.js                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// Mongo.Collection.prototype.quickList = function(query = {}, identifier = 'name') {                                  //
//   return this.find(query).map((c) => {                                                                              //
//     return {                                                                                                        //
//       label: c[identifier],                                                                                         //
//       value: c._id                                                                                                  //
//     };                                                                                                              //
//   });                                                                                                               //
// };                                                                                                                  //
// <<<<<<< HEAD                                                                                                        //
// /**                                                                                                                 //
//  *                                                                                                                  //
//  * Schema                                                                                                           //
//  *                                                                                                                  //
//  */                                                                                                                 //
// Schemas.Technology = new SimpleSchema({                                                                             //
//   techId: {                                                                                                         //
//     type: String,                                                                                                   //
//     label: 'techId',                                                                                                //
//     optional: true,                                                                                                 //
//     esDriver: true                                                                                                  //
//   },                                                                                                                //
//   name: {                                                                                                           //
//     type: String,                                                                                                   //
//     esDriver: true,                                                                                                 //
//     logDriver: true,                                                                                                //
//   },                                                                                                                //
//   synonyms: {                                                                                                       //
//     type: [String],                                                                                                 //
//     optional: true,                                                                                                 //
//     autoform: {                                                                                                     //
//       type: 'tags'                                                                                                  //
//     }                                                                                                               //
//   },                                                                                                                //
//   status: {                                                                                                         //
//     type: String,                                                                                                   //
//     esDriver: true,                                                                                                 //
//     logDriver: true,                                                                                                //
//     allowedValues: ['draft', 'review', 'published'],                                                                //
//     autoform: {                                                                                                     //
//       type: 'selectize',                                                                                            //
//       options: [{                                                                                                   //
//         label: 'Draft',                                                                                             //
//         value: 'draft'                                                                                              //
//       }, {                                                                                                          //
//         label: 'Review',                                                                                            //
//         value: 'review'                                                                                             //
//       }, {                                                                                                          //
//         label: 'Published',                                                                                         //
//         value: 'published'                                                                                          //
//       }]                                                                                                            //
//     }                                                                                                               //
//   },                                                                                                                //
//   tags: {                                                                                                           //
//     type: [String],                                                                                                 //
//     optional: true,                                                                                                 //
//     autoform: {                                                                                                     //
//       type: 'tags'                                                                                                  //
//     }                                                                                                               //
//   },                                                                                                                //
//   description: {                                                                                                    //
//     type: [Schemas.Description],                                                                                    //
//     label: 'Descriptions',                                                                                          //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   contextualDescription: {                                                                                          //
//     type: [Schemas.contextualDescription],                                                                          //
//     label: 'Contextual Descriptions',                                                                               //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   images: {                                                                                                         //
//     type: [Schemas.Image],                                                                                          //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   urls: {                                                                                                           //
//     type: [Schemas.Url],                                                                                            //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   readiness: {                                                                                                      //
//     type: [Schemas.Readiness],                                                                                      //
//     optional: true,                                                                                                 //
//     autoform: {                                                                                                     //
//       omit: true                                                                                                    //
//     }                                                                                                               //
//   },                                                                                                                //
//   impact: {                                                                                                         //
//     type: [Schemas.Impact],                                                                                         //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   attachmentsCount: {                                                                                               //
//     type: Number,                                                                                                   //
//     counterFor: 'attachmentsId',                                                                                    //
//     optional: true                                                                                                  //
//   },                                                                                                                //
//   attachmentsId: {                                                                                                  //
//     type: [String],                                                                                                 //
//     optional: true,                                                                                                 //
//     label: 'Related Attachments',                                                                                   //
//     autoform: {                                                                                                     //
//       afFieldInput: {                                                                                               //
//         type: 'universe-select',                                                                                    //
//         multiple: true,                                                                                             //
//         uniPlaceholder: 'Search attachments by title...',                                                           //
//         options() {                                                                                                 //
//           return Attachments.find().map((attachment) => {                                                           //
//             return {                                                                                                //
//               label: attachment.name,                                                                               //
//               value: attachment._id                                                                                 //
//             };                                                                                                      //
//           });                                                                                                       //
//         }                                                                                                           //
//       }                                                                                                             //
//     }                                                                                                               //
//   },                                                                                                                //
//   organizationsCount: {                                                                                             //
//     type: Number,                                                                                                   //
//     counterFor: 'organizationsId',                                                                                  //
//     optional: true,                                                                                                 //
//     autoValue() {                                                                                                   //
//       let organizationsId = this.field('organizationsId');                                                          //
                                                                                                                       //
//       if (organizationsId.isSet) {                                                                                  //
//         let arr = organizationsId.value;                                                                            //
//         return _.isArray(arr) ? arr.length : 0;                                                                     //
//       }                                                                                                             //
//     }                                                                                                               //
//   },                                                                                                                //
//   organizationsId: {                                                                                                //
//     type: [String],                                                                                                 //
//     optional: true,                                                                                                 //
//     label: 'Related Organizations',                                                                                 //
//     autoform: {                                                                                                     //
//       type: 'universe-select',                                                                                      //
//       multiple: true,                                                                                               //
//       uniPlaceholder: 'Search organizations by title...',                                                           //
//       options() {                                                                                                   //
//         return Organizations.find().map((org) => {                                                                  //
//           return {                                                                                                  //
//             label: org.name,                                                                                        //
//             value: org._id                                                                                          //
//           };                                                                                                        //
//         });                                                                                                         //
//       }                                                                                                             //
//     }                                                                                                               //
//   },                                                                                                                //
//   projectsId: {                                                                                                     //
//     type: [String],                                                                                                 //
//     optional: true,                                                                                                 //
//     label: 'Related Projects',                                                                                      //
//     autoform: {                                                                                                     //
//       type: 'universe-select',                                                                                      //
//       multiple: true,                                                                                               //
//       uniPlaceholder: 'Search projects by title...',                                                                //
//       options() {                                                                                                   //
//         return Projects.find().map((project) => {                                                                   //
//           return {                                                                                                  //
//             label: project.name,                                                                                    //
//             value: project._id                                                                                      //
//           };                                                                                                        //
//         });                                                                                                         //
//       }                                                                                                             //
//     }                                                                                                               //
//   }                                                                                                                 //
// });                                                                                                                 //
                                                                                                                       //
// /**                                                                                                                 //
//  *                                                                                                                  //
//  * Helpers                                                                                                          //
//  *                                                                                                                  //
//  */                                                                                                                 //
// Technologies.helpers({                                                                                              //
//   getPublishedDescription() {                                                                                       //
//     this.description = this.description || [];                                                                      //
//     return _.find(this.description, function(desc) {                                                                //
//       return desc.status === 'published';                                                                           //
//     }) || {};                                                                                                       //
//   },                                                                                                                //
//   getShowcasedImage() {                                                                                             //
//     if (!this.images) return false;                                                                                 //
//     this.images = this.images || [];                                                                                //
//     return _.find(this.images, function(desc) {                                                                     //
//       return desc && desc.showcased;                                                                                //
//     }) || {};                                                                                                       //
//   },                                                                                                                //
//   getCollections() {                                                                                                //
//     return Collections.find({                                                                                       //
//       technologiesId: this._id                                                                                      //
//     });                                                                                                             //
//   }                                                                                                                 //
// });                                                                                                                 //
                                                                                                                       //
// /**                                                                                                                 //
//  *                                                                                                                  //
//  * Behaviours                                                                                                       //
//  *                                                                                                                  //
//  */                                                                                                                 //
                                                                                                                       //
// Technologies.attachSchema(Schemas.Technology);                                                                      //
// //Technologies.simpleCounter();                                                                                     //
// Technologies.attachBehaviour('timestampable');                                                                      //
// Meteor.isServer && Technologies.esDriver(esClient, 'techdb', 'technologies', (cleanedDoc, doc, hook) => {           //
//   let tDoc = hook.transform();                                                                                      //
//   let publishedDescription = tDoc.getPublishedDescription();                                                        //
//   if (publishedDescription && publishedDescription.longText) {                                                      //
//     cleanedDoc.description = TagStripper.strip(publishedDescription.longText);                                      //
//     cleanedDoc.shortDescription = publishedDescription.shortText || '';                                             //
//   } else {                                                                                                          //
//     delete cleanedDoc.description;                                                                                  //
//   }                                                                                                                 //
                                                                                                                       //
//   let showcasedImage = tDoc.getShowcasedImage();                                                                    //
//   if (showcasedImage) {                                                                                             //
//     cleanedDoc.image = showcasedImage.src;                                                                          //
//   }                                                                                                                 //
//   delete cleanedDoc.images;                                                                                         //
                                                                                                                       //
//   return cleanedDoc;                                                                                                //
// });                                                                                                                 //
                                                                                                                       //
// =======                                                                                                             //
// >>>>>>> technologiesEdit                                                                                            //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"technologies_tabular.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/technologies/technologies_tabular.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
// TabularTables.Technologies = new Tabular.Table({                                                                    //
//   name: 'TechnologiesList',                                                                                         //
//   collection: Technologies,                                                                                         //
//   sub: new SubsManager(),                                                                                           //
//   pub: 'tabularTechnologiesList',                                                                                   //
//   autoWidth: false,                                                                                                 //
//   responsive: true,                                                                                                 //
//   stateSave: true,                                                                                                  //
//   extraFields: ['_id'],                                                                                             //
//   columns: [{                                                                                                       //
//     title: 'Name',                                                                                                  //
//     data: 'name',                                                                                                   //
//     width: '90%'                                                                                                    //
//   }, {                                                                                                              //
//     title: 'Actions',                                                                                               //
//     tmpl: Meteor.isClient && Template.technologiesActions,                                                          //
//     width: '10%'                                                                                                    //
//   }],                                                                                                               //
//   bPaginate: true                                                                                                   //
// });                                                                                                                 //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"users":{"Users.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/users/Users.js                                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
//                                       //                                                                            //
//                 SCHEMAS               //                                                                            //
//                                       //                                                                            //
                                                                                                                       //
Schemas.ContactInfo = new SimpleSchema({                                                                               // 5
  twitter: {                                                                                                           // 6
    type: String,                                                                                                      // 7
    optional: true                                                                                                     // 8
  },                                                                                                                   //
  slack: {                                                                                                             // 10
    type: String,                                                                                                      // 11
    optional: true                                                                                                     // 12
  },                                                                                                                   //
  github: {                                                                                                            // 14
    type: String,                                                                                                      // 15
    optional: true                                                                                                     // 16
  },                                                                                                                   //
  skype: {                                                                                                             // 18
    type: String,                                                                                                      // 19
    optional: true                                                                                                     // 20
  },                                                                                                                   //
  phone: {                                                                                                             // 22
    type: String,                                                                                                      // 23
    optional: true,                                                                                                    // 24
    esDriver: true                                                                                                     // 25
  },                                                                                                                   //
  mobile: {                                                                                                            // 27
    type: String,                                                                                                      // 28
    esDriver: true,                                                                                                    // 29
    optional: true                                                                                                     // 30
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
//                                                                                                                     //
// Profile                                                                                                             //
//                                                                                                                     //
Schemas.Profile = new SimpleSchema({                                                                                   // 38
  firstName: {                                                                                                         // 39
    type: String,                                                                                                      // 40
    optional: true                                                                                                     // 41
  },                                                                                                                   //
  lastName: {                                                                                                          // 43
    type: String,                                                                                                      // 44
    optional: true                                                                                                     // 45
  },                                                                                                                   //
  fullName: {                                                                                                          // 47
    type: String,                                                                                                      // 48
    esDriver: true,                                                                                                    // 49
    logDriver: true,                                                                                                   // 50
    optional: true,                                                                                                    // 51
    autoValue: function () {                                                                                           // 52
      function autoValue() {                                                                                           // 52
        var firstName = this.field('profile.firstName');                                                               // 53
        var lastName = this.field('profile.lastName');                                                                 // 54
        if (firstName.isSet && lastName.isSet) {                                                                       // 55
          return firstName.value + ' ' + lastName.value;                                                               // 56
        }                                                                                                              //
        return firstName.value;                                                                                        // 58
      }                                                                                                                //
                                                                                                                       //
      return autoValue;                                                                                                //
    }(),                                                                                                               //
    autoform: {                                                                                                        // 60
      omit: true                                                                                                       // 61
    }                                                                                                                  //
  },                                                                                                                   //
  birth: {                                                                                                             // 64
    type: Date,                                                                                                        // 65
    optional: true,                                                                                                    // 66
    logDriver: true,                                                                                                   // 67
    autoform: {                                                                                                        // 68
      type: 'bootstrap-datepicker',                                                                                    // 69
      datePickerOptions: {                                                                                             // 70
        format: 'yyyy/mm/dd',                                                                                          // 71
        language: 'en-US'                                                                                              // 72
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  gender: {                                                                                                            // 76
    type: String,                                                                                                      // 77
    optional: true,                                                                                                    // 78
    logDriver: true,                                                                                                   // 79
    allowedValues: ['male', 'female'],                                                                                 // 80
    autoform: {                                                                                                        // 81
      label: 'Gender',                                                                                                 // 82
      type: 'select-radio-inline',                                                                                     // 83
      options: [{                                                                                                      // 84
        value: 'male',                                                                                                 // 85
        label: 'Male'                                                                                                  // 86
      }, {                                                                                                             //
        value: 'female',                                                                                               // 88
        label: 'Female'                                                                                                // 89
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  affiliation: {                                                                                                       // 93
    type: String,                                                                                                      // 94
    esDriver: true,                                                                                                    // 95
    logDriver: true,                                                                                                   // 96
    optional: true                                                                                                     // 97
  },                                                                                                                   //
  address: {                                                                                                           // 99
    type: String,                                                                                                      // 100
    esDriver: true,                                                                                                    // 101
    logDriver: true,                                                                                                   // 102
    optional: true,                                                                                                    // 103
    autoform: {                                                                                                        // 104
      label: 'Address'                                                                                                 // 105
    }                                                                                                                  //
  },                                                                                                                   //
  about: {                                                                                                             // 108
    type: String,                                                                                                      // 109
    optional: true,                                                                                                    // 110
    logDriver: true,                                                                                                   // 111
    autoform: {                                                                                                        // 112
      type: 'textarea',                                                                                                // 113
      rows: 6                                                                                                          // 114
    }                                                                                                                  //
  },                                                                                                                   //
  imageId: {                                                                                                           // 117
    type: String,                                                                                                      // 118
    esDriver: true,                                                                                                    // 119
    logDriver: true,                                                                                                   // 120
    optional: true                                                                                                     // 121
  },                                                                                                                   //
  country: {                                                                                                           // 123
    type: String,                                                                                                      // 124
    esDriver: true,                                                                                                    // 125
    logDriver: true,                                                                                                   // 126
    optional: true,                                                                                                    // 127
    autoform: {                                                                                                        // 128
      type: 'countryFlags'                                                                                             // 129
    }                                                                                                                  //
  },                                                                                                                   //
  contactInfo: {                                                                                                       // 132
    type: Schemas.ContactInfo,                                                                                         // 133
    esDriver: true,                                                                                                    // 134
    logDriver: true,                                                                                                   // 135
    optional: true,                                                                                                    // 136
    blackbox: true                                                                                                     // 137
  },                                                                                                                   //
  bio: {                                                                                                               // 139
    type: String,                                                                                                      // 140
    optional: true,                                                                                                    // 141
    logDriver: true,                                                                                                   // 142
    autoform: {                                                                                                        // 143
      rows: 6                                                                                                          // 144
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
//                                                                                                                     //
// Invite                                                                                                              //
//                                                                                                                     //
InviteSchema = new SimpleSchema({                                                                                      // 152
  email: {                                                                                                             // 153
    type: String,                                                                                                      // 154
    autoform: {                                                                                                        // 155
      label: 'Email'                                                                                                   // 156
    }                                                                                                                  //
  },                                                                                                                   //
  roles: {                                                                                                             // 159
    type: String,                                                                                                      // 160
    allowedValues: ['admin', 'editor', 'viewer'],                                                                      // 161
    autoform: {                                                                                                        // 162
      label: 'Role',                                                                                                   // 163
      firstOption: 'Select a role',                                                                                    // 164
      type: 'selectize',                                                                                               // 165
      options: [{                                                                                                      // 166
        value: 'admin',                                                                                                // 167
        label: 'Admin'                                                                                                 // 168
      }, {                                                                                                             //
        value: 'editor',                                                                                               // 170
        label: 'Editor'                                                                                                // 171
      }, {                                                                                                             //
        value: 'viewer',                                                                                               // 173
        label: 'Viewer'                                                                                                // 174
      }]                                                                                                               //
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.Email = new SimpleSchema({                                                                                     // 181
  address: {                                                                                                           // 182
    type: String,                                                                                                      // 183
    esDriver: true,                                                                                                    // 184
    regEx: SimpleSchema.RegEx.Email                                                                                    // 185
  },                                                                                                                   //
  verified: {                                                                                                          // 187
    type: Boolean                                                                                                      // 188
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Schemas.GlobalRoles = new SimpleSchema({                                                                               // 193
  __global_roles__: {                                                                                                  // 194
    type: [String],                                                                                                    // 195
    esDriver: true                                                                                                     // 196
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
//                                                                                                                     //
// Users                                                                                                               //
//                                                                                                                     //
Schemas.Users = new SimpleSchema({                                                                                     // 203
  username: {                                                                                                          // 204
    type: String,                                                                                                      // 205
    esDriver: true,                                                                                                    // 206
    logDriver: true,                                                                                                   // 207
    optional: true                                                                                                     // 208
  },                                                                                                                   //
  emails: {                                                                                                            // 210
    type: [Schemas.Email],                                                                                             // 211
    esDriver: true,                                                                                                    // 212
    logDriver: true,                                                                                                   // 213
    autoform: {                                                                                                        // 214
      omit: true                                                                                                       // 215
    }                                                                                                                  //
  },                                                                                                                   //
  profile: {                                                                                                           // 218
    type: Schemas.Profile,                                                                                             // 219
    optional: true,                                                                                                    // 220
    blackbox: true,                                                                                                    // 221
    autoform: {                                                                                                        // 222
      omit: true                                                                                                       // 223
    }                                                                                                                  //
  },                                                                                                                   //
  services: {                                                                                                          // 226
    type: Object,                                                                                                      // 227
    optional: true,                                                                                                    // 228
    blackbox: true,                                                                                                    // 229
    autoform: {                                                                                                        // 230
      omit: true                                                                                                       // 231
    }                                                                                                                  //
  },                                                                                                                   //
  roles: {                                                                                                             // 234
    type: [String],                                                                                                    // 235
    optional: true,                                                                                                    // 236
    esDriver: true,                                                                                                    // 237
    logDriver: true,                                                                                                   // 238
    blackbox: true                                                                                                     // 239
  },                                                                                                                   //
  status: {                                                                                                            // 241
    type: Object,                                                                                                      // 242
    blackbox: true,                                                                                                    // 243
    optional: true                                                                                                     // 244
  },                                                                                                                   //
  active: {                                                                                                            // 246
    type: Boolean,                                                                                                     // 247
    autoValue: function () {                                                                                           // 248
      function autoValue() {                                                                                           //
        return false;                                                                                                  // 249
      }                                                                                                                //
                                                                                                                       //
      return autoValue;                                                                                                //
    }()                                                                                                                //
  },                                                                                                                   //
  projectsId: {                                                                                                        // 252
    type: [String],                                                                                                    // 253
    logDriver: true,                                                                                                   // 254
    optional: true                                                                                                     // 255
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Meteor.users.attachSchema(Schemas.Users);                                                                              // 259
Meteor.users.attachBehaviour('timestampable');                                                                         // 260
Meteor.isServer && Meteor.users.esDriver(esClient, 'techdb', 'users');                                                 // 261
                                                                                                                       //
//                                       //                                                                            //
//                 EXTENSIONS            //                                                                            //
//                                       //                                                                            //
Meteor.users.quickList = function () {                                                                                 // 266
  return this.find().map(function (c) {                                                                                // 267
    var nome = c.profile.nomeCompleto ? c.profile.nomeCompleto : c.emails[0].address;                                  // 268
    return {                                                                                                           // 269
      label: nome,                                                                                                     // 270
      value: c._id                                                                                                     // 271
    };                                                                                                                 //
  });                                                                                                                  //
};                                                                                                                     //
                                                                                                                       //
//                                       //                                                                            //
//                 HELPERS               //                                                                            //
//                                       //                                                                            //
Meteor.users.helpers({                                                                                                 // 279
  role: function () {                                                                                                  // 280
    function role() {                                                                                                  //
      var roles = Roles.getRolesForUser(this._id);                                                                     // 281
      return roles[0];                                                                                                 // 282
    }                                                                                                                  //
                                                                                                                       //
    return role;                                                                                                       //
  }(),                                                                                                                 //
  link: function () {                                                                                                  // 284
    function link() {                                                                                                  //
      return FlowRouter.path('usersEntry', {                                                                           // 285
        id: this._id                                                                                                   // 286
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return link;                                                                                                       //
  }(),                                                                                                                 //
  identification: function () {                                                                                        // 289
    function identification() {                                                                                        //
      var _this = this;                                                                                                //
                                                                                                                       //
      var priority = arguments.length <= 0 || arguments[0] === undefined ? ['fullName', 'username', 'email'] : arguments[0];
                                                                                                                       //
      var foundIdentification = 'unknown';                                                                             // 290
      _.some(priority, function (p) {                                                                                  // 291
        switch (p) {                                                                                                   // 292
          case 'fullName':                                                                                             // 293
            if (_this.profile && _this.profile.fullName) {                                                             // 294
              foundIdentification = _this.profile.fullName;                                                            // 295
              return true;                                                                                             // 296
            }                                                                                                          //
            return false;                                                                                              // 298
          case 'username':                                                                                             // 292
            if (_this.username) {                                                                                      // 300
              foundIdentification = _this.username;                                                                    // 301
              return true;                                                                                             // 302
            }                                                                                                          //
            return false;                                                                                              // 304
          case 'email':                                                                                                // 292
            if (_this.emails && _this.emails.length) {                                                                 // 306
              foundIdentification = _this.emails[0].address;                                                           // 307
              return true;                                                                                             // 308
            }                                                                                                          //
            return false;                                                                                              // 310
          default:                                                                                                     // 292
            return true;                                                                                               // 312
        }                                                                                                              // 292
      });                                                                                                              //
      return foundIdentification;                                                                                      // 315
    }                                                                                                                  //
                                                                                                                       //
    return identification;                                                                                             //
  }(),                                                                                                                 //
  profileImage: function () {                                                                                          // 317
    function profileImage() {                                                                                          //
      if (this.profile && this.profile.imageId) {                                                                      // 318
        return Images.findOne({                                                                                        // 319
          _id: this.profile.imageId                                                                                    // 320
        });                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return profileImage;                                                                                               //
  }(),                                                                                                                 //
  projects: function () {                                                                                              // 324
    function projects() {                                                                                              //
      return this.projectsId && Projects.find({                                                                        // 325
        _id: { $in: this.projectsId }                                                                                  // 326
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return projects;                                                                                                   //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
//                                       //                                                                            //
//                 DATATABLE             //                                                                            //
//                                       //                                                                            //
TabularTables.Users = new Tabular.Table({                                                                              // 334
  name: 'UsersList',                                                                                                   // 335
  pub: 'tabular_UsersList',                                                                                            // 336
  collection: Meteor.users,                                                                                            // 337
  sub: new SubsManager(),                                                                                              // 338
  autoWidth: false,                                                                                                    // 339
  responsive: true,                                                                                                    // 340
  stateSave: true,                                                                                                     // 341
  extraFields: ['_id', 'profile', 'emails', 'roles'],                                                                  // 342
  columns: [{                                                                                                          // 343
    title: 'Email',                                                                                                    // 344
    data: 'emails.0.address',                                                                                          // 345
    width: '20%',                                                                                                      // 346
    sType: 'html'                                                                                                      // 347
  }, {                                                                                                                 //
    title: 'Full Name',                                                                                                // 349
    data: 'profile.fullName',                                                                                          // 350
    width: '60%'                                                                                                       // 351
  }, {                                                                                                                 //
    title: 'Role',                                                                                                     // 353
    data: 'role()'                                                                                                     // 354
  }, {                                                                                                                 //
    title: 'Actions',                                                                                                  // 356
    tmpl: Meteor.isClient && Template.usersActions,                                                                    // 357
    width: '10%'                                                                                                       // 358
  }],                                                                                                                  //
  bLengthChange: false,                                                                                                // 360
  bPaginate: true,                                                                                                     // 361
  type: 'html'                                                                                                         // 362
});                                                                                                                    //
                                                                                                                       //
var pwdField = AccountsTemplates.removeField('password');                                                              // 366
AccountsTemplates.addFields([{                                                                                         // 367
  _id: 'firstName',                                                                                                    // 368
  type: 'text',                                                                                                        // 369
  required: true,                                                                                                      // 370
  displayName: 'First Name',                                                                                           // 371
  placeholder: 'First Name'                                                                                            // 372
}, {                                                                                                                   //
  _id: 'lastName',                                                                                                     // 374
  type: 'text',                                                                                                        // 375
  required: true,                                                                                                      // 376
  displayName: 'Last Name',                                                                                            // 377
  placeholder: 'Last Name'                                                                                             // 378
}, pwdField]);                                                                                                         //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"user_methods.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/users/user_methods.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.users.methods = {};                                                                                             // 1
                                                                                                                       //
function isProfileOwner(documentId) {                                                                                  // 3
  return Meteor.userId() === documentId;                                                                               // 4
}                                                                                                                      //
                                                                                                                       //
if (Meteor.isServer) {                                                                                                 // 9
  Meteor.methods({                                                                                                     // 10
    inviteUser: function () {                                                                                          // 11
      function inviteUser(doc) {                                                                                       //
        if (!Meteor.userId() || !Roles.userIsInRole(Meteor.userId(), ['admin', 'god'])) {                              // 12
          throw new Meteor.Error(403, 'Access denied');                                                                // 13
        }                                                                                                              //
        this.unblock();                                                                                                // 15
        check(doc, InviteSchema);                                                                                      // 16
                                                                                                                       //
        chance = new Chance();                                                                                         // 18
        var password = chance.bb_pin();                                                                                // 19
        var options = {                                                                                                // 20
          email: doc.email,                                                                                            // 21
          password: password                                                                                           // 22
        };                                                                                                             //
                                                                                                                       //
        try {                                                                                                          // 25
          var userId = Accounts.createUser(options);                                                                   // 26
          Accounts.sendEnrollmentEmail(userId, doc.email);                                                             // 27
          Roles.addUsersToRoles(userId, doc.roles);                                                                    // 28
          return true;                                                                                                 // 29
        } catch (e) {                                                                                                  //
          throw new Meteor.Error(e.toString());                                                                        // 31
        }                                                                                                              //
      }                                                                                                                //
                                                                                                                       //
      return inviteUser;                                                                                               //
    }(),                                                                                                               //
                                                                                                                       //
    /**                                                                                                                //
     * update a user's permissions                                                                                     //
     *                                                                                                                 //
     * @param {Object} targetUserId Id of user to update                                                               //
     * @param {Array} roles User's new permissions                                                                     //
     * @param {String} group Company to update permissions for                                                         //
     */                                                                                                                //
    'Users.updateRoles': function () {                                                                                 // 41
      function UsersUpdateRoles(targetUserId, role) {                                                                  // 41
        check(targetUserId, String);                                                                                   // 42
        check(role, String);                                                                                           // 43
        var loggedInUser = Meteor.user();                                                                              // 44
                                                                                                                       //
        if (!loggedInUser || !Roles.userIsInRole(loggedInUser, ['admin', 'god'])) {                                    // 46
          throw new Meteor.Error(403, 'Access denied');                                                                // 47
        }                                                                                                              //
        Roles.setUserRoles(targetUserId, role);                                                                        // 49
      }                                                                                                                //
                                                                                                                       //
      return UsersUpdateRoles;                                                                                         //
    }()                                                                                                                //
  });                                                                                                                  //
}                                                                                                                      //
                                                                                                                       //
Meteor.methods({                                                                                                       // 55
  'Users.methods.setUserImage': function () {                                                                          // 56
    function UsersMethodsSetUserImage(userId, imageId) {                                                               // 56
      check(userId, String);                                                                                           // 57
      check(imageId, String);                                                                                          // 58
      Meteor.users.update({                                                                                            // 59
        _id: userId                                                                                                    // 60
      }, {                                                                                                             //
        $set: {                                                                                                        // 62
          'profile.imageId': imageId                                                                                   // 63
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsSetUserImage;                                                                                   //
  }(),                                                                                                                 //
  'Users.methods.edit': function () {                                                                                  // 67
    function UsersMethodsEdit(modifier, documentId) {                                                                  // 67
      check(modifier, Meteor.users.Schema);                                                                            // 68
      check(documentId, String);                                                                                       // 69
                                                                                                                       //
      if (isAdmin() || isProfileOwner(documentId)) {                                                                   // 71
        return Meteor.users.update({                                                                                   // 72
          _id: documentId                                                                                              // 73
        }, modifier);                                                                                                  //
      }                                                                                                                //
      throw new Meteor.Error(403, 'No tem permisso.');                                                               // 76
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsEdit;                                                                                           //
  }(),                                                                                                                 //
  'Users.methods.remove': function () {                                                                                // 78
    function UsersMethodsRemove(userId) {                                                                              // 78
      check(userId, String);                                                                                           // 79
      return Meteor.users.remove({ _id: userId });                                                                     // 80
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsRemove;                                                                                         //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
// ********************************                                                                                    //
// ***** Projects Permissions *****                                                                                    //
// ********************************                                                                                    //
Meteor.methods({                                                                                                       // 88
  'Users.methods.addProject': function () {                                                                            // 89
    function UsersMethodsAddProject(targetUserId, projectId) {                                                         // 89
      check(targetUserId, String);                                                                                     // 90
      check(projectId, String);                                                                                        // 91
                                                                                                                       //
      if (isAdmin() || isEditor()) {                                                                                   // 93
        Meteor.users.update({                                                                                          // 94
          _id: targetUserId                                                                                            // 95
        }, {                                                                                                           //
          $addToSet: {                                                                                                 // 97
            projectsId: projectId                                                                                      // 98
          }                                                                                                            //
        });                                                                                                            //
      } else {                                                                                                         //
        throw new Meteor.Error('not-authorized');                                                                      // 102
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsAddProject;                                                                                     //
  }(),                                                                                                                 //
  'Users.methods.removeProject': function () {                                                                         // 105
    function UsersMethodsRemoveProject(targetUserId, projectId) {                                                      // 105
      check(targetUserId, String);                                                                                     // 106
      check(projectId, String);                                                                                        // 107
                                                                                                                       //
      if (isAdmin()) {                                                                                                 // 109
        Meteor.users.update({                                                                                          // 110
          _id: targetUserId                                                                                            // 111
        }, {                                                                                                           //
          $pull: {                                                                                                     // 113
            projectsId: projectId                                                                                      // 114
          }                                                                                                            //
        });                                                                                                            //
      } else {                                                                                                         //
        throw new Meteor.Error(403, 'No tem permisso');                                                              // 118
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsRemoveProject;                                                                                  //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.methods({                                                                                                       // 123
  'Users.methods.updateProfile': function () {                                                                         // 124
    function UsersMethodsUpdateProfile(modifier, documentId) {                                                         // 124
      check(modifier, Schemas.Users);                                                                                  // 125
      check(documentId, String);                                                                                       // 126
      return Meteor.users.update({                                                                                     // 127
        _id: documentId                                                                                                // 128
      }, modifier);                                                                                                    //
    }                                                                                                                  //
                                                                                                                       //
    return UsersMethodsUpdateProfile;                                                                                  //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"Backups.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/Backups.js                                                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Backups = new Mongo.Collection('Backups');                                                                             // 1
                                                                                                                       //
/*                                      */                                                                             //
/*                SCHEMA                */                                                                             //
/*                                      */                                                                             //
                                                                                                                       //
Backups.Schema = new SimpleSchema({                                                                                    // 7
  model: {                                                                                                             // 8
    type: String                                                                                                       // 9
  },                                                                                                                   //
  docId: {                                                                                                             // 11
    type: String                                                                                                       // 12
  },                                                                                                                   //
  userId: {                                                                                                            // 14
    type: String                                                                                                       // 15
  },                                                                                                                   //
  doc: {                                                                                                               // 17
    type: Object,                                                                                                      // 18
    blackbox: true                                                                                                     // 19
  }                                                                                                                    //
});                                                                                                                    //
Backups.attachSchema(Backups.Schema);                                                                                  // 22
Backups.attachBehaviour('timestampable');                                                                              // 23
                                                                                                                       //
/*                                      */                                                                             //
/*                EXTENSES             */                                                                             //
/*                                      */                                                                             //
                                                                                                                       //
Backups.quickList = function (modelo, docId) {                                                                         // 31
  return this.find({ modelo: modelo, docId: docId }).map(function (c) {                                                // 32
    return { label: formatarData(c.data), value: c._id };                                                              // 33
  });                                                                                                                  //
};                                                                                                                     //
                                                                                                                       //
/*                                      */                                                                             //
/*                SEGURANA             */                                                                             //
/*                                      */                                                                             //
                                                                                                                       //
if (Meteor.isServer) {                                                                                                 // 41
  Backups.allow({                                                                                                      // 42
    insert: function () {                                                                                              // 43
      function insert() {                                                                                              // 43
        return true;                                                                                                   // 44
      }                                                                                                                //
                                                                                                                       //
      return insert;                                                                                                   //
    }(),                                                                                                               //
    update: function () {                                                                                              // 46
      function update() {                                                                                              // 46
        return true;                                                                                                   // 47
      }                                                                                                                //
                                                                                                                       //
      return update;                                                                                                   //
    }(),                                                                                                               //
    remove: function () {                                                                                              // 49
      function remove() {                                                                                              // 49
        return true;                                                                                                   // 50
      }                                                                                                                //
                                                                                                                       //
      return remove;                                                                                                   //
    }()                                                                                                                //
  });                                                                                                                  //
}                                                                                                                      //
                                                                                                                       //
/*                                      */                                                                             //
/*                HELPERS               */                                                                             //
/*                                      */                                                                             //
                                                                                                                       //
Backups.helpers({                                                                                                      // 59
  link: function () {                                                                                                  // 60
    function link() {                                                                                                  // 60
      return FlowRouter.path('areas.view', { id: this._id });                                                          // 61
    }                                                                                                                  //
                                                                                                                       //
    return link;                                                                                                       //
  }(),                                                                                                                 //
  user: function () {                                                                                                  // 63
    function user() {                                                                                                  // 63
      return Meteor.users.findOne({ _id: this.userId });                                                               // 64
    }                                                                                                                  //
                                                                                                                       //
    return user;                                                                                                       //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"Log.js":["../../imports/api/technologies/technologies.js",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/Log.js                                                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../imports/api/technologies/technologies.js');                                         // 1
                                                                                                                       //
Logs = new Mongo.Collection('logs');                                                                                   // 4
                                                                                                                       //
Logs.Schema = new SimpleSchema({                                                                                       // 7
  collection: {                                                                                                        // 8
    type: String                                                                                                       // 9
  },                                                                                                                   //
  operation: {                                                                                                         // 11
    type: String                                                                                                       // 12
  },                                                                                                                   //
  userId: {                                                                                                            // 14
    type: String,                                                                                                      // 15
    optional: true                                                                                                     // 16
  },                                                                                                                   //
  username: {                                                                                                          // 18
    type: String,                                                                                                      // 19
    optional: true                                                                                                     // 20
  },                                                                                                                   //
  description: {                                                                                                       // 22
    type: String                                                                                                       // 23
  },                                                                                                                   //
  docId: {                                                                                                             // 25
    type: String                                                                                                       // 26
  },                                                                                                                   //
  docName: {                                                                                                           // 28
    type: String                                                                                                       // 29
  },                                                                                                                   //
  modifier: {                                                                                                          // 31
    type: String,                                                                                                      // 32
    optional: true                                                                                                     // 33
  }                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Logs.attachBehaviour('timestampable');                                                                                 // 37
Logs.attachSchema(Logs.Schema);                                                                                        // 38
                                                                                                                       //
Logs.helpers({                                                                                                         // 41
  user: function () {                                                                                                  // 42
    function user() {                                                                                                  //
      if (this.userId) {                                                                                               // 43
        return Meteor.users.findOne({                                                                                  // 44
          _id: this.userId                                                                                             // 45
        });                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return user;                                                                                                       //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Organizations.logDriver(Logs, function (doc) {                                                                         // 51
  return doc.name;                                                                                                     // 52
});                                                                                                                    //
_technologies.Technologies.logDriver(Logs, function (doc) {                                                            // 54
  return doc.name;                                                                                                     // 55
});                                                                                                                    //
Attachments.logDriver(Logs, function (doc) {                                                                           // 57
  return doc.name;                                                                                                     // 58
});                                                                                                                    //
                                                                                                                       //
Projects.logDriver(Logs, function (doc) {                                                                              // 61
  return doc.name;                                                                                                     // 62
});                                                                                                                    //
                                                                                                                       //
Meteor.users.logDriver(Logs, function (doc, hook) {                                                                    // 65
  var tDoc = hook.transform();                                                                                         // 66
  return tDoc.identification(['username', 'email', 'fullName']);                                                       // 67
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"images.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/images.js                                                                                                //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
                                                                                                                       //
FS.File.prototype.cloudinaryId = function (store) {                                                                    // 3
  var key = this.copies && this.copies[store] && this.copies[store].key;                                               // 4
  return Meteor.settings['public'].Cloudinarys3MappingFolder + '/' + key;                                              // 5
};                                                                                                                     //
                                                                                                                       //
/*                                                                                                                     //
FS.File.prototype.S3Url = function(storeName) {                                                                        //
  let store = this.getCollection().storesLookup[storeName];                                                            //
  let urlHost = 'https://s3.amazonaws.com';                                                                            //
  if (this.copies && this.copies[storeName]) {                                                                         //
    // TODO: Fix hardcoded amazon url                                                                                  //
    let bucket = 'envisioning';                                                                                        //
    let folder = 'tdb';                                                                                                //
    let key = this.copies[storeName].key;                                                                              //
                                                                                                                       //
    console.log([store.bucket, store.folder, this.copies[storeName].key].join('/'));                                   //
                                                                                                                       //
    return `${urlHost}/${bucket}/${folder}/${key}`;                                                                    //
                                                                                                                       //
  }                                                                                                                    //
};                                                                                                                     //
*/                                                                                                                     //
                                                                                                                       //
if (Meteor.isServer) {                                                                                                 // 26
  var imageStore = new FS.Store.S3('images', {                                                                         // 27
    accessKeyId: process.env.AWS_ACCESS_KEY_ID,                                                                        // 28
    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,                                                                // 29
    bucket: process.env.AWS_S3_BUCKET,                                                                                 // 30
    region: process.env.AWS_S3_REGION,                                                                                 // 31
    folder: process.env.AWS_S3_FOLDER,                                                                                 // 32
    ACL: 'public-read',                                                                                                // 33
    fileKeyMaker: function () {                                                                                        // 34
      function fileKeyMaker(fileObj) {                                                                                 //
        var store = fileObj && fileObj._getInfo('images');                                                             // 35
        if (store && store.key) return store.key;                                                                      // 36
        return fileObj.collectionName + '/' + fileObj._id;                                                             // 37
      }                                                                                                                //
                                                                                                                       //
      return fileKeyMaker;                                                                                             //
    }()                                                                                                                //
  });                                                                                                                  //
  Images = new FS.Collection('images', {                                                                               // 40
    stores: [imageStore],                                                                                              // 41
    filter: {                                                                                                          // 42
      allow: {                                                                                                         // 43
        contentTypes: ['image/*']                                                                                      // 44
      }                                                                                                                //
    }                                                                                                                  //
  });                                                                                                                  //
}                                                                                                                      //
                                                                                                                       //
// On the client just create a generic FS Store as don't have                                                          //
// access (or want access) to S3 settings on client                                                                    //
if (Meteor.isClient) {                                                                                                 // 53
  var _imageStore = new FS.Store.S3('images');                                                                         // 54
  Images = new FS.Collection('images', {                                                                               // 55
    stores: [_imageStore],                                                                                             // 56
    filter: {                                                                                                          // 57
      allow: {                                                                                                         // 58
        contentTypes: ['image/*']                                                                                      // 59
      },                                                                                                               //
      onInvalid: function () {                                                                                         // 61
        function onInvalid(message) {                                                                                  // 61
          toastr.error(message);                                                                                       // 62
        }                                                                                                              //
                                                                                                                       //
        return onInvalid;                                                                                              //
      }()                                                                                                              //
    }                                                                                                                  //
  });                                                                                                                  //
}                                                                                                                      //
                                                                                                                       //
// Allow rules                                                                                                         //
Images.allow({                                                                                                         // 69
  insert: function () {                                                                                                // 70
    function insert() {                                                                                                // 70
      return true;                                                                                                     // 71
    }                                                                                                                  //
                                                                                                                       //
    return insert;                                                                                                     //
  }(),                                                                                                                 //
  update: function () {                                                                                                // 73
    function update() {                                                                                                // 73
      return true;                                                                                                     // 74
    }                                                                                                                  //
                                                                                                                       //
    return update;                                                                                                     //
  }(),                                                                                                                 //
  download: function () {                                                                                              // 76
    function download() {                                                                                              // 76
      return true;                                                                                                     // 77
    }                                                                                                                  //
                                                                                                                       //
    return download;                                                                                                   //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"readiness.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/models/readiness.js                                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Readiness = new Mongo.Collection('readiness');                                                                         // 1
                                                                                                                       //
Schemas.Readiness = new SimpleSchema({                                                                                 // 3
  userId: {                                                                                                            // 4
    type: String,                                                                                                      // 5
    autoform: {                                                                                                        // 6
      omit: true                                                                                                       // 7
    }                                                                                                                  //
  },                                                                                                                   //
  createdAt: {                                                                                                         // 10
    type: Date,                                                                                                        // 11
    autoform: {                                                                                                        // 12
      omit: true                                                                                                       // 13
    }                                                                                                                  //
  },                                                                                                                   //
  expertise: {                                                                                                         // 16
    type: Number                                                                                                       // 17
  },                                                                                                                   //
  answers: {                                                                                                           // 19
    type: [Schemas.Answer]                                                                                             // 20
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"config":{"cloudinary.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/config/cloudinary.js                                                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collection_behavior.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/config/collection_behavior.js                                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
CollectionBehaviours.configure('timestampable', {                                                                      // 1
  createdAt: 'createdAt',                                                                                              // 2
  createdBy: 'createdBy',                                                                                              // 3
  updatedAt: 'updatedAt',                                                                                              // 4
  updatedBy: 'updatedBy',                                                                                              // 5
  systemId: '0'                                                                                                        // 6
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"mo_format.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/config/mo_format.js                                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
mo.configure({                                                                                                         // 1
  formatTokens: {                                                                                                      // 2
    shortDate: 'DD/MM/YYYY',                                                                                           // 3
    longDate: 'Do [of] MMMM[,] YYYY'                                                                                   // 4
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"typeahead.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/config/typeahead.js                                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"help.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/help.js                                                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
capitalizeFirstLetter = function capitalizeFirstLetter(string) {                                                       // 1
  if (!string) return '';                                                                                              // 2
  return string.charAt(0).toUpperCase() + string.slice(1);                                                             // 3
};                                                                                                                     //
                                                                                                                       //
isAdmin = function isAdmin() {                                                                                         // 6
  return Meteor.userId() && Roles.userIsInRole(Meteor.userId(), ['admin', 'god']);                                     // 7
};                                                                                                                     //
                                                                                                                       //
isEditor = function isEditor() {                                                                                       // 10
  return Meteor.userId() && Roles.userIsInRole(Meteor.userId(), ['editor']);                                           // 11
};                                                                                                                     //
                                                                                                                       //
safeFind = function safeFind() {                                                                                       // 14
  if (_.isArray(array) && array.length) {                                                                              // 15
    return _.find(this.description, function (desc) {                                                                  // 16
      return desc.status === 'Published';                                                                              // 17
    });                                                                                                                //
  }                                                                                                                    //
  return {};                                                                                                           // 20
};                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"subs.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// lib/subs.js                                                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
subs = new SubsManager();                                                                                              // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"server":{"lib":{"stores":{"files.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/stores/files.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Files = new FS.Collection('files', {                                                                                   // 1
  stores: [new FS.Store.S3('files', {                                                                                  // 2
    accessKeyId: process.env.AWS_ACCESS_KEY_ID,                                                                        // 3
    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,                                                                // 4
    bucket: process.env.AWS_S3_BUCKET,                                                                                 // 5
    region: process.env.AWS_S3_REGION,                                                                                 // 6
    folder: process.env.AWS_S3_FOLDER,                                                                                 // 7
    ACL: 'public-read',                                                                                                // 8
    fileKeyMaker: function () {                                                                                        // 9
      function fileKeyMaker(fileObj) {                                                                                 //
        var store = fileObj && fileObj._getInfo('files');                                                              // 10
        if (store && store.key) return store.key;                                                                      // 11
        return fileObj.collectionName + '/' + fileObj._id;                                                             // 12
      }                                                                                                                //
                                                                                                                       //
      return fileKeyMaker;                                                                                             //
    }()                                                                                                                //
  })],                                                                                                                 //
  filter: {                                                                                                            // 15
    allow: {                                                                                                           // 16
      contentTypes: Meteor.settings['public'].allowContentTypes                                                        // 17
    },                                                                                                                 //
    onInvalid: function () {                                                                                           // 19
      function onInvalid(message) {}                                                                                   // 19
                                                                                                                       //
      return onInvalid;                                                                                                //
    }()                                                                                                                //
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"elastic_search.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/elastic_search.js                                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"environment.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/environment.js                                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.methods({                                                                                                       // 1
  env: function () {                                                                                                   // 2
    function env() {                                                                                                   // 2
      return process.env.NODE_ENV;                                                                                     // 3
    }                                                                                                                  //
                                                                                                                       //
    return env;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"meta_inspector.js":["node-metainspector",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/meta_inspector.js                                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _nodeMetainspector = require('node-metainspector');                                                                // 1
                                                                                                                       //
var _nodeMetainspector2 = _interopRequireDefault(_nodeMetainspector);                                                  //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
Meteor.methods({                                                                                                       // 3
  getMetadataFromUrl: function () {                                                                                    // 4
    function getMetadataFromUrl(url) {                                                                                 // 4
      check(url, String);                                                                                              // 5
                                                                                                                       //
      function fetch(remoteUrl, callback) {                                                                            // 7
        var client = new _nodeMetainspector2['default'](remoteUrl, {                                                   // 8
          timeout: 5000                                                                                                // 9
        });                                                                                                            //
                                                                                                                       //
        client.on("fetch", function () {                                                                               // 12
          callback(null, {                                                                                             // 13
            title: client.title,                                                                                       // 14
            description: client.description,                                                                           // 15
            image: client.image,                                                                                       // 16
            url: client.url                                                                                            // 17
          });                                                                                                          //
        });                                                                                                            //
                                                                                                                       //
        client.on('error', function (err) {                                                                            // 21
          callback(err);                                                                                               // 22
        });                                                                                                            //
                                                                                                                       //
        client.fetch();                                                                                                // 25
      }                                                                                                                //
                                                                                                                       //
      try {                                                                                                            // 28
        var syncFetch = Async.wrap(fetch);                                                                             // 29
        return syncFetch(url);                                                                                         // 30
      } catch (e) {                                                                                                    //
        console.log(e);                                                                                                // 32
        throw new Meteor.Error(e.code);                                                                                // 33
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return getMetadataFromUrl;                                                                                         //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"upload_file_from_url.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/upload_file_from_url.js                                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.methods({                                                                                                       // 1
  /*                                                                                                                   //
  uploadImagesFromUrls: function(urls){                                                                                //
    check(urls, [String])                                                                                              //
    function uploadImages(urls, callback) {                                                                            //
      let images = [];                                                                                                 //
      urls.forEach((link) => {                                                                                         //
        Meteor.call('uploadImageFromUrl', link, (error, fileId) => {                                                   //
          images.push({                                                                                                //
            src: fileId,                                                                                               //
            description: 'No Description',                                                                             //
            showcased: false                                                                                           //
          });                                                                                                          //
        });                                                                                                            //
      });                                                                                                              //
      // This guy don't wait the loop ends...                                                                          //
      callback(null, images);                                                                                          //
    }                                                                                                                  //
     let uploadImagesSync = Async.wrap(uploadImages);                                                                  //
    return uploadImagesSync;                                                                                           //
  },                                                                                                                   //
  */                                                                                                                   //
                                                                                                                       //
  // Need to be on the server to avoid CORS.                                                                           //
  uploadImageFromUrl: function () {                                                                                    // 26
    function uploadImageFromUrl(url) {                                                                                 // 26
      this.unblock();                                                                                                  // 27
      check(url, String);                                                                                              // 28
                                                                                                                       //
      function upload(_url, callback) {                                                                                // 30
        console.info('Starting to download file from remote url:', _url);                                              // 31
                                                                                                                       //
        try {                                                                                                          // 33
          Images.insert(_url, function (error, fileObj) {                                                              // 34
            if (error) return callback(error);                                                                         // 35
                                                                                                                       //
            return callback(null, fileObj._id);                                                                        // 37
          });                                                                                                          //
        } catch (e) {                                                                                                  //
          return callback(e);                                                                                          // 40
        }                                                                                                              //
      }                                                                                                                //
                                                                                                                       //
      // Async to get file metadata.                                                                                   //
      var uploadImageFromUrlSync = Async.wrap(upload);                                                                 // 26
      return uploadImageFromUrlSync(url);                                                                              // 46
    }                                                                                                                  //
                                                                                                                       //
    return uploadImageFromUrl;                                                                                         //
  }(),                                                                                                                 //
  // Need to be on the server to avoid CORS.                                                                           //
  uploadFileFromUrl: function () {                                                                                     // 49
    function uploadFileFromUrl(url) {                                                                                  // 49
      check(url, String);                                                                                              // 50
                                                                                                                       //
      function upload(_url, callback) {                                                                                // 52
        console.info('Starting to download file from remote url:', _url);                                              // 53
                                                                                                                       //
        // https://github.com/CollectionFS/Meteor-CollectionFS#storing-fsfile-references-in-your-objects               //
        // Cant get file reference from the server                                                                     //
        try {                                                                                                          // 52
          Files.insert(_url, function (error, fileObj) {                                                               // 58
            if (error) return callback(error);                                                                         // 59
                                                                                                                       //
            return callback(null, fileObj._id);                                                                        // 61
          });                                                                                                          //
        } catch (e) {                                                                                                  //
          return callback(e);                                                                                          // 64
        }                                                                                                              //
      }                                                                                                                //
                                                                                                                       //
      // Async to get file metadata.                                                                                   //
      var uploadFileFromUrlSync = Async.wrap(upload);                                                                  // 49
      return uploadFileFromUrlSync(url);                                                                               // 70
    }                                                                                                                  //
                                                                                                                       //
    return uploadFileFromUrl;                                                                                          //
  }(),                                                                                                                 //
  attachData: function () {                                                                                            // 72
    function attachData(url) {                                                                                         // 72
      check(url, String);                                                                                              // 73
                                                                                                                       //
      function attach(_url, callback) {                                                                                // 75
        var mockFile = new FS.File();                                                                                  // 76
        mockFile.attachData(_url, function (err) {                                                                     // 77
          return callback(err);                                                                                        // 78
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      var attachAsync = Async.wrap(attach);                                                                            // 82
      return attachAsync(url);                                                                                         // 83
    }                                                                                                                  //
                                                                                                                       //
    return attachData;                                                                                                 //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"useraccounts.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/useraccounts.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Accounts.urls.enrollAccount = function (token) {                                                                       // 1
  return Meteor.absoluteUrl('enroll-account/' + token);                                                                // 2
};                                                                                                                     //
                                                                                                                       //
Accounts.urls.resetPassword = function (token) {                                                                       // 5
  return Meteor.absoluteUrl('reset-password/' + token);                                                                // 6
};                                                                                                                     //
                                                                                                                       //
Accounts.onCreateUser(function (options, user) {                                                                       // 9
  if (options.info) {                                                                                                  // 10
    user.info = options.info;                                                                                          // 11
  }                                                                                                                    //
  user.profile = options.profile || {};                                                                                // 13
  return user;                                                                                                         // 14
});                                                                                                                    //
                                                                                                                       //
// Custom email                                                                                                        //
Accounts.emailTemplates.siteName = "tdb.envisioning.io";                                                               // 19
Accounts.emailTemplates.from = "Envisioning <hello@envisioning.io>";                                                   // 20
Accounts.emailTemplates.enrollAccount.subject = function (user) {                                                      // 21
  return "[TDB] Complete your registration ";                                                                          // 22
};                                                                                                                     //
Accounts.emailTemplates.enrollAccount.text = function (user, url) {                                                    // 24
  return "You have been selected to participate in building a better future!" + " To activate your account, simply click the link below:\n\n" + url;
};                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"yaml.min.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/lib/yaml.min.js                                                                                              //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
YAML = function () {                                                                                                   // 1
  function i(e) {                                                                                                      // 1
    return { parent: null, length: 0, level: e, lines: [], children: [], addChild: function () {                       // 1
        function addChild(e) {                                                                                         // 1
          this.children.push(e);e.parent = this;++this.length;                                                         // 1
        }                                                                                                              //
                                                                                                                       //
        return addChild;                                                                                               //
      }() };                                                                                                           //
  }function s() {                                                                                                      //
    var e;try {                                                                                                        // 1
      e = new XMLHttpRequest();                                                                                        // 1
    } catch (t) {                                                                                                      //
      var n = new Array("MSXML2.XMLHTTP.5.0", "MSXML2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP");var r = false;for (var i = 0; i < n.length && !r; i++) {
        try {                                                                                                          // 1
          e = new ActiveXObject(n[i]);r = true;                                                                        // 1
        } catch (t) {}                                                                                                 //
      }if (!r) {                                                                                                       //
        throw new Error("Unable to create XMLHttpRequest.");                                                           // 1
      }                                                                                                                //
    }return e;                                                                                                         //
  }function o(e, t) {                                                                                                  //
    var n = s();n.onreadystatechange = function () {                                                                   // 1
      if (this.readyState == 4 || this.status == 200) {                                                                // 1
        var e = this.responseText;t(YAML.eval(e));                                                                     // 1
      }                                                                                                                //
    };n.open("GET", e);n.send();                                                                                       //
  }function u(t) {                                                                                                     //
    var n = r["regLevel"];var s = r["invalidLine"];var o = t.split("\n");var u;var a = 0,                              // 1
        f = 0;var l = [];var c = new i(-1);var h = new i(0);c.addChild(h);var p = [];var d = "";l.push(h);p.push(a);for (var v = 0, m = o.length; v < m; ++v) {
      d = o[v];if (d.match(s)) {                                                                                       // 1
        continue;                                                                                                      // 1
      }if (u = n.exec(d)) {                                                                                            //
        a = u[1].length;                                                                                               // 1
      } else a = 0;if (a > f) {                                                                                        //
        var g = h;h = new i(a);g.addChild(h);l.push(h);p.push(a);                                                      // 1
      } else if (a < f) {                                                                                              //
        var y = false;var b = p.length - 1;for (; b >= 0; --b) {                                                       // 1
          if (p[b] == a) {                                                                                             // 1
            h = new i(a);l.push(h);p.push(a);if (l[b].parent != null) l[b].parent.addChild(h);y = true;break;          // 1
          }                                                                                                            //
        }if (!y) {                                                                                                     //
          e.push("Error: Invalid indentation at line " + v + ": " + d);return;                                         // 1
        }                                                                                                              //
      }h.lines.push(d.replace(r["trim"], ""));f = a;                                                                   //
    }return c;                                                                                                         //
  }function a(e) {                                                                                                     //
    e = e.replace(r["trim"], "");var t = null;if (e == "true") {                                                       // 1
      return true;                                                                                                     // 1
    } else if (e == "false") {                                                                                         //
      return false;                                                                                                    // 1
    } else if (e == ".NaN") {                                                                                          //
      return Number.NaN;                                                                                               // 1
    } else if (e == "null") {                                                                                          //
      return null;                                                                                                     // 1
    } else if (e == ".inf") {                                                                                          //
      return Number.POSITIVE_INFINITY;                                                                                 // 1
    } else if (e == "-.inf") {                                                                                         //
      return Number.NEGATIVE_INFINITY;                                                                                 // 1
    } else if (t = e.match(r["dashesString"])) {                                                                       //
      return t[1];                                                                                                     // 1
    } else if (t = e.match(r["quotesString"])) {                                                                       //
      return t[1];                                                                                                     // 1
    } else if (t = e.match(r["float"])) {                                                                              //
      return parseFloat(t[0]);                                                                                         // 1
    } else if (t = e.match(r["integer"])) {                                                                            //
      return parseInt(t[0]);                                                                                           // 1
    } else if (!isNaN(t = Date.parse(e))) {                                                                            //
      return new Date(t);                                                                                              // 1
    } else if (t = e.match(r["single_key_value"])) {                                                                   //
      var n = {};n[t[1]] = a(t[2]);return n;                                                                           // 1
    } else if (t = e.match(r["array"])) {                                                                              //
      var i = 0,                                                                                                       // 1
          s = " ";var n = [];var o = "";var u = false;for (var f = 0, l = t[1].length; f < l; ++f) {                   //
        s = t[1][f];if (s == "'" || s == '"') {                                                                        // 1
          if (u === false) {                                                                                           // 1
            u = s;o += s;continue;                                                                                     // 1
          } else if (s == "'" && u == "'" || s == '"' && u == '"') {                                                   //
            u = false;o += s;continue;                                                                                 // 1
          }                                                                                                            //
        } else if (u === false && (s == "[" || s == "{")) {                                                            //
          ++i;                                                                                                         // 1
        } else if (u === false && (s == "]" || s == "}")) {                                                            //
          --i;                                                                                                         // 1
        } else if (u === false && i == 0 && s == ",") {                                                                //
          n.push(a(o));o = "";continue;                                                                                // 1
        }o += s;                                                                                                       //
      }if (o.length > 0) n.push(a(o));return n;                                                                        //
    } else if (t = e.match(r["map"])) {                                                                                //
      var i = 0,                                                                                                       // 1
          s = " ";var n = [];var o = "";var u = false;for (var f = 0, l = t[1].length; f < l; ++f) {                   //
        s = t[1][f];if (s == "'" || s == '"') {                                                                        // 1
          if (u === false) {                                                                                           // 1
            u = s;o += s;continue;                                                                                     // 1
          } else if (s == "'" && u == "'" || s == '"' && u == '"') {                                                   //
            u = false;o += s;continue;                                                                                 // 1
          }                                                                                                            //
        } else if (u === false && (s == "[" || s == "{")) {                                                            //
          ++i;                                                                                                         // 1
        } else if (u === false && (s == "]" || s == "}")) {                                                            //
          --i;                                                                                                         // 1
        } else if (u === false && i == 0 && s == ",") {                                                                //
          n.push(o);o = "";continue;                                                                                   // 1
        }o += s;                                                                                                       //
      }if (o.length > 0) n.push(o);var c = {};for (var f = 0, l = n.length; f < l; ++f) {                              //
        if (t = n[f].match(r["key_value"])) {                                                                          // 1
          c[t[1]] = a(t[2]);                                                                                           // 1
        }                                                                                                              //
      }return c;                                                                                                       //
    } else return e;                                                                                                   //
  }function f(e) {                                                                                                     //
    var t = e.lines;var n = e.children;var r = t.join(" ");var i = [r];for (var s = 0, o = n.length; s < o; ++s) {     // 1
      i.push(f(n[s]));                                                                                                 // 1
    }return i.join("\n");                                                                                              //
  }function l(e) {                                                                                                     //
    var t = e.lines;var n = e.children;var r = t.join("\n");for (var i = 0, s = n.length; i < s; ++i) {                // 1
      r += l(n[i]);                                                                                                    // 1
    }return r;                                                                                                         //
  }function c(n) {                                                                                                     //
    var i = null;var s = {};var o = null;var u = null;var h = null;var p = -1;var d = [];var v = true;for (var m = 0, g = n.length; m < g; ++m) {
      if (p != -1 && p != n[m].level) continue;d.push(m);p = n[m].level;o = n[m].lines;u = n[m].children;h = null;for (var y = 0, b = o.length; y < b; ++y) {
        var w = o[y];if (i = w.match(r["key"])) {                                                                      // 1
          var E = i[1];if (E[0] == "-") {                                                                              // 1
            E = E.replace(r["item"], "");if (v) {                                                                      // 1
              v = false;if (typeof s.length === "undefined") {                                                         // 1
                s = [];                                                                                                // 1
              }                                                                                                        //
            }if (h != null) s.push(h);h = {};v = true;                                                                 //
          }if (typeof i[2] != "undefined") {                                                                           //
            var S = i[2].replace(r["trim"], "");if (S[0] == "&") {                                                     // 1
              var x = c(u);if (h != null) h[E] = x;else s[E] = x;t[S.substr(1)] = x;                                   // 1
            } else if (S[0] == "|") {                                                                                  //
              if (h != null) h[E] = l(u.shift());else s[E] = l(u.shift());                                             // 1
            } else if (S[0] == "*") {                                                                                  //
              var T = S.substr(1);var N = {};if (typeof t[T] == "undefined") {                                         // 1
                e.push("Reference '" + T + "' not found!");                                                            // 1
              } else {                                                                                                 //
                for (var C in meteorBabelHelpers.sanitizeForInObject(t[T])) {                                          // 1
                  N[C] = t[T][C];                                                                                      // 1
                }if (h != null) h[E] = N;else s[E] = N;                                                                //
              }                                                                                                        //
            } else if (S[0] == ">") {                                                                                  //
              if (h != null) h[E] = f(u.shift());else s[E] = f(u.shift());                                             // 1
            } else {                                                                                                   //
              if (h != null) h[E] = a(S);else s[E] = a(S);                                                             // 1
            }                                                                                                          //
          } else {                                                                                                     //
            if (h != null) h[E] = c(u);else s[E] = c(u);                                                               // 1
          }                                                                                                            //
        } else if (w.match(/^-\s*$/)) {                                                                                //
          if (v) {                                                                                                     // 1
            v = false;if (typeof s.length === "undefined") {                                                           // 1
              s = [];                                                                                                  // 1
            }                                                                                                          //
          }if (h != null) s.push(h);h = {};v = true;continue;                                                          //
        } else if (i = w.match(/^-\s*(.*)/)) {                                                                         //
          if (h != null) h.push(a(i[1]));else {                                                                        // 1
            if (v) {                                                                                                   // 1
              v = false;if (typeof s.length === "undefined") {                                                         // 1
                s = [];                                                                                                // 1
              }                                                                                                        //
            }s.push(a(i[1]));                                                                                          //
          }continue;                                                                                                   //
        }                                                                                                              //
      }if (h != null) {                                                                                                //
        if (v) {                                                                                                       // 1
          v = false;if (typeof s.length === "undefined") {                                                             // 1
            s = [];                                                                                                    // 1
          }                                                                                                            //
        }s.push(h);                                                                                                    //
      }                                                                                                                //
    }for (var m = d.length - 1; m >= 0; --m) {                                                                         //
      n.splice.call(n, d[m], 1);                                                                                       // 1
    }return s;                                                                                                         //
  }function h(e) {                                                                                                     //
    var t = c(e.children);return t;                                                                                    // 1
  }function p(e) {                                                                                                     //
    var t;var n = e.split("\n");var i = r["comment"];for (var s in meteorBabelHelpers.sanitizeForInObject(n)) {        // 1
      if (t = n[s].match(i)) {                                                                                         // 1
        if (typeof t[3] !== "undefined") {                                                                             // 1
          n[s] = t[0].substr(0, t[0].length - t[3].length);                                                            // 1
        }                                                                                                              //
      }                                                                                                                //
    }return n.join("\n");                                                                                              //
  }function d(r) {                                                                                                     //
    e = [];t = [];n = new Date().getTime();var i = p(r);var s = u(i);var o = h(s);n = new Date().getTime() - n;return o;
  }var e = [],                                                                                                         //
      t = [],                                                                                                          //
      n = 0,                                                                                                           //
      r = { regLevel: new RegExp("^([\\s\\-]+)"), invalidLine: new RegExp("^\\-\\-\\-|^\\.\\.\\.|^\\s*#.*|^\\s*$"), dashesString: new RegExp('^\\s*\\"([^\\"]*)\\"\\s*$'), quotesString: new RegExp("^\\s*\\'([^\\']*)\\'\\s*$"), "float": new RegExp("^[+-]?[0-9]+\\.[0-9]+(e[+-]?[0-9]+(\\.[0-9]+)?)?$"), integer: new RegExp("^[+-]?[0-9]+$"), array: new RegExp("\\[\\s*(.*)\\s*\\]"), map: new RegExp("\\{\\s*(.*)\\s*\\}"), key_value: new RegExp("([a-z0-9_-][ a-z0-9_-]*):( .+)", "i"), single_key_value: new RegExp("^([a-z0-9_-][ a-z0-9_-]*):( .+?)$", "i"), key: new RegExp("([a-z0-9_-][ a-z0-9_-]+):( .+)?", "i"), item: new RegExp("^-\\s+"), trim: new RegExp("^\\s+|\\s+$"), comment: new RegExp("([^\\'\\\"#]+([\\'\\\"][^\\'\\\"]*[\\'\\\"])*)*(#.*)?") };return { fromURL: o, eval: d, getErrors: function () {
      function getErrors() {                                                                                           // 1
        return e;                                                                                                      // 1
      }                                                                                                                //
                                                                                                                       //
      return getErrors;                                                                                                //
    }(), getProcessingTime: function () {                                                                              //
      function getProcessingTime() {                                                                                   // 1
        return n;                                                                                                      // 1
      }                                                                                                                //
                                                                                                                       //
      return getProcessingTime;                                                                                        //
    }() };                                                                                                             //
}();                                                                                                                   //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"adapters":{"elastic_search_adapter.js":["babel-runtime/helpers/classCallCheck",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/adapters/elastic_search_adapter.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                                //
                                                                                                                       //
var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
/**                                                                                                                    //
 * ElasticSearchAdapter                                                                                                //
 * must implement insertDoc, removeDoc, updateDoc                                                                      //
 *                                                                                                                     //
 * constructor:                                                                                                        //
 * @client {elasticsearch} elastic search connection instance                                                          //
 * @index {String} elastic search index                                                                                //
 * @type {String} elastic search type                                                                                  //
 * @docTransformer {simpleSchema} must implement clean                                                                 //
 */                                                                                                                    //
ElasticSearchAdapter = function () {                                                                                   // 11
  // implements riverOperations                                                                                        //
                                                                                                                       //
  function ElasticSearchAdapter(client, index, type, docTransformer, config) {                                         // 12
    (0, _classCallCheck3['default'])(this, ElasticSearchAdapter);                                                      //
                                                                                                                       //
    if (!client) throw new Error('Client must be specified');                                                          // 13
    if (!index) throw new Error('Index must be specified');                                                            // 14
    if (!type) throw new Error('Type must be specified');                                                              // 15
                                                                                                                       //
    this.index = index;                                                                                                // 17
    this.type = type;                                                                                                  // 18
    this.client = client;                                                                                              // 19
    this.docTransformer = docTransformer;                                                                              // 20
    this.config = config || {};                                                                                        // 21
  }                                                                                                                    //
                                                                                                                       //
  ElasticSearchAdapter.prototype.insertDoc = function () {                                                             // 11
    function insertDoc(userId, doc) {                                                                                  //
      var finalDoc = this.docTransformer(doc);                                                                         // 25
      try {                                                                                                            // 26
        return this.client.index({                                                                                     // 27
          index: this.index,                                                                                           // 28
          type: this.type,                                                                                             // 29
          id: doc._id,                                                                                                 // 30
          body: finalDoc                                                                                               // 31
        });                                                                                                            //
      } catch (e) {                                                                                                    //
        console.log('ElasticSearchAdapter error at insert:');                                                          // 34
        console.log(e.message);                                                                                        // 35
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return insertDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  ElasticSearchAdapter.prototype.removeDoc = function () {                                                             // 11
    function removeDoc(userId, doc) {                                                                                  //
      try {                                                                                                            // 40
        return this.client['delete']({                                                                                 // 41
          index: this.index,                                                                                           // 42
          type: this.type,                                                                                             // 43
          id: doc._id                                                                                                  // 44
        });                                                                                                            //
      } catch (e) {                                                                                                    //
        console.log('ElasticSearchAdapter error at remove:');                                                          // 47
        console.log(e.message);                                                                                        // 48
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return removeDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  ElasticSearchAdapter.prototype.updateDoc = function () {                                                             // 11
    function updateDoc(userId, doc, fieldNames, modifier) {                                                            //
      var id = doc._id;                                                                                                // 53
      var finalDoc = this.docTransformer(doc, modifier);                                                               // 54
      delete finalDoc._id;                                                                                             // 55
      if (!finalDoc) return false;                                                                                     // 56
                                                                                                                       //
      if (this.config.trackedFields) {                                                                                 // 58
        if (!_.intersection(fieldNames, this.config.trackedFields).length) {                                           // 59
          return false;                                                                                                // 60
        }                                                                                                              //
      }                                                                                                                //
      try {                                                                                                            // 63
        return this.client.update({                                                                                    // 64
          index: this.index,                                                                                           // 65
          type: this.type,                                                                                             // 66
          id: id,                                                                                                      // 67
          body: {                                                                                                      // 68
            doc: finalDoc                                                                                              // 69
          }                                                                                                            //
        });                                                                                                            //
      } catch (e) {                                                                                                    //
        console.log('ElasticSearchAdapter error at update:');                                                          // 73
        console.dir(e.message);                                                                                        // 74
      }                                                                                                                //
    }                                                                                                                  //
                                                                                                                       //
    return updateDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  return ElasticSearchAdapter;                                                                                         //
}();                                                                                                                   //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"log_adapter.js":["babel-runtime/helpers/classCallCheck",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/adapters/log_adapter.js                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                                //
                                                                                                                       //
var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                       //
                                                                                                                       //
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                      //
                                                                                                                       //
var OPERATION_INSERT = 'insert';                                                                                       // 1
var OPERATION_REMOVE = 'remove';                                                                                       // 2
var OPERATION_UPDATE = 'update';                                                                                       // 3
var DEFAULT_REMOVE_DESCRIPTION = 'removed the document';                                                               // 4
var DEFAULT_INSERT_DESCRIPTION = 'inserted the document';                                                              // 5
var DEFAULT_UPDATE_DESCRIPTION = 'updated the document';                                                               // 6
                                                                                                                       //
LogAdapter = function () {                                                                                             // 8
  function LogAdapter(logCollection, collection, getDocIdentifier, config) {                                           // 9
    (0, _classCallCheck3['default'])(this, LogAdapter);                                                                //
                                                                                                                       //
    if (!collection) throw new Error('Collection must be specified');                                                  // 10
    if (!getDocIdentifier) throw new Error('Must pass function to get doc name');                                      // 11
    this.collection = collection;                                                                                      // 12
    this.getDocIdentifier = getDocIdentifier;                                                                          // 13
    this.logCollection = logCollection;                                                                                // 14
    this.config = config || {};                                                                                        // 15
  }                                                                                                                    //
                                                                                                                       //
  LogAdapter.prototype.getEntityName = function () {                                                                   // 8
    function getEntityName() {                                                                                         //
      return this.collection._name;                                                                                    // 19
    }                                                                                                                  //
                                                                                                                       //
    return getEntityName;                                                                                              //
  }();                                                                                                                 //
                                                                                                                       //
  LogAdapter.prototype.logOperation = function () {                                                                    // 8
    function logOperation(operation, description, userId, doc) {                                                       //
      var collection = this.collection._name;                                                                          // 23
      var docName = this.getDocIdentifier(doc);                                                                        // 24
      var obj = {                                                                                                      // 25
        collection: collection,                                                                                        // 26
        operation: operation,                                                                                          // 27
        description: description,                                                                                      // 28
        docId: doc._id,                                                                                                // 29
        docName: docName                                                                                               // 30
      };                                                                                                               //
                                                                                                                       //
      if (userId) {                                                                                                    // 33
        obj.userId = userId;                                                                                           // 34
      }                                                                                                                //
                                                                                                                       //
      this.logCollection.insert(obj);                                                                                  // 37
    }                                                                                                                  //
                                                                                                                       //
    return logOperation;                                                                                               //
  }();                                                                                                                 //
                                                                                                                       //
  LogAdapter.prototype.insertDoc = function () {                                                                       // 8
    function insertDoc(userId, doc) {                                                                                  //
      this.logOperation(OPERATION_INSERT, DEFAULT_INSERT_DESCRIPTION, userId, doc);                                    // 42
    }                                                                                                                  //
                                                                                                                       //
    return insertDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  LogAdapter.prototype.removeDoc = function () {                                                                       // 8
    function removeDoc(userId, doc) {                                                                                  //
      this.logOperation(OPERATION_REMOVE, DEFAULT_REMOVE_DESCRIPTION, userId, doc);                                    // 46
    }                                                                                                                  //
                                                                                                                       //
    return removeDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  LogAdapter.prototype.updateDoc = function () {                                                                       // 8
    function updateDoc(userId, doc, fieldNames, modifier, options) {                                                   //
      if (this.config.trackedFields) {                                                                                 // 50
        if (!_.intersection(fieldNames, this.config.trackedFields).length) return false;                               // 51
      }                                                                                                                //
                                                                                                                       //
      this.logOperation(OPERATION_UPDATE, DEFAULT_UPDATE_DESCRIPTION, userId, doc);                                    // 54
                                                                                                                       //
      /*                                                                                                               //
      for (let property in object) {                                                                                   //
        if (object.hasOwnProperty(property)) {                                                                         //
          console.log(property);                                                                                       //
        }                                                                                                              //
      }                                                                                                                //
      */                                                                                                               //
    }                                                                                                                  // 49
                                                                                                                       //
    return updateDoc;                                                                                                  //
  }();                                                                                                                 //
                                                                                                                       //
  return LogAdapter;                                                                                                   //
}();                                                                                                                   //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"behaviours":{"river.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/behaviours/river.js                                                                                          //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/**                                                                                                                    //
 * river                                                                                                               //
 * simply hooks all mongo operations and drives them to an adapter                                                     //
 *                                                                                                                     //
 */                                                                                                                    //
/*                                                                                                                     //
CollectionBehaviours.define('river', function(options) {                                                               //
 let collection = this.collection;                                                                                     //
 let defaultOptions = _.defaults(options, this.options, defaultOptions);                                               //
 let adapters = options.adapters || [];                                                                                //
 if (!adapters.length) throw new Error('Must pass at least one adapter');                                              //
  // Behaviour logic goes here                                                                                         //
 collection.after.insert(function(userId, doc) {                                                                       //
   let transformedDoc = this.transform();                                                                              //
   _.each(adapters, function(adapter) {                                                                                //
     adapter.insertDoc(userId, transformedDoc);                                                                        //
   });                                                                                                                 //
 });                                                                                                                   //
  collection.after.update(function(userId, doc, fieldNames, modifier) {                                                //
   let transformedDoc = this.transform();                                                                              //
   _.each(adapters, function(adapter) {                                                                                //
     adapter.updateDoc(userId, transformedDoc, fieldNames, modifier);                                                  //
   });                                                                                                                 //
 });                                                                                                                   //
  collection.after.remove(function(userId, doc) {                                                                      //
   let transformedDoc = this.transform();                                                                              //
   _.each(adapters, function(adapter) {                                                                                //
     adapter.removeDoc(userId, transformedDoc);                                                                        //
   });                                                                                                                 //
 });                                                                                                                   //
});                                                                                                                    //
*/                                                                                                                     //
                                                                                                                       //
/*                                                                                                                     //
Organizations.attachBehaviour('river', {                                                                               //
  adapters: [                                                                                                          //
    new ElasticSearchAdapter(esClient, 'techdb', 'organizations', (doc) => {                                           //
      let finalDoc = _.clone(doc);                                                                                     //
                                                                                                                       //
      let schema = new SimpleSchema({                                                                                  //
        name: {                                                                                                        //
          type: String                                                                                                 //
        },                                                                                                             //
        logo: {                                                                                                        //
          type: String                                                                                                 //
        }                                                                                                              //
      });                                                                                                              //
      schema.clean(finalDoc);                                                                                          //
                                                                                                                       //
      //  grab cloudinaryId and put on the ES doc                                                                      //
      let img = Images.findOne({_id: doc.logo});                                                                       //
      if (img) {                                                                                                       //
        finalDoc.cloudinaryId = img.cloudinaryId();                                                                    //
      }                                                                                                                //
      return finalDoc;                                                                                                 //
    }),                                                                                                                //
    new LogAdapter(Logs, Organizations, function(doc) {                                                                //
      return doc.name;                                                                                                 //
    })                                                                                                                 //
  ]                                                                                                                    //
});                                                                                                                    //
*/                                                                                                                     //
                                                                                                                       //
/*                                                                                                                     //
Attachments.attachBehaviour('river', {                                                                                 //
  adapters: [                                                                                                          //
    new ElasticSearchAdapter(esClient, 'techdb', 'attachments', (doc) => {                                             //
      let finalDoc = _.clone(doc);                                                                                     //
                                                                                                                       //
      let schema = new SimpleSchema({                                                                                  //
        name: {                                                                                                        //
          type: String                                                                                                 //
        },                                                                                                             //
        description: {                                                                                                 //
          type: String                                                                                                 //
        },                                                                                                             //
        imageUrl: {                                                                                                    //
          type: String                                                                                                 //
        }                                                                                                              //
      });                                                                                                              //
                                                                                                                       //
      schema.clean(finalDoc);                                                                                          //
      return finalDoc;                                                                                                 //
    }),                                                                                                                //
    new LogAdapter(Logs, Attachments, function(doc) {                                                                  //
      return doc.name;                                                                                                 //
    })                                                                                                                 //
  ]                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
Projects.attachBehaviour('river', {                                                                                    //
  adapters: [                                                                                                          //
    new ElasticSearchAdapter(esClient, 'techdb', 'projects', (doc) => {                                                //
      let finalDoc = _.clone(doc);                                                                                     //
      let schema = new SimpleSchema({                                                                                  //
        name: {                                                                                                        //
          type: String                                                                                                 //
        },                                                                                                             //
        description: {                                                                                                 //
          type: String                                                                                                 //
        }                                                                                                              //
      });                                                                                                              //
      schema.clean(finalDoc);                                                                                          //
      return finalDoc;                                                                                                 //
    }),                                                                                                                //
    new LogAdapter(Logs, Projects, function(doc) {                                                                     //
      return doc.name;                                                                                                 //
    })                                                                                                                 //
  ]                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
                                                                                                                       //
Technologies.attachBehaviour('river', {                                                                                //
  adapters: [                                                                                                          //
    new ElasticSearchAdapter(esClient, 'techdb', 'technologies', (doc) => {                                            //
      let finalDoc = _.clone(doc);                                                                                     //
                                                                                                                       //
      let schema = new SimpleSchema({                                                                                  //
        name: {                                                                                                        //
          type: String                                                                                                 //
        },                                                                                                             //
        description: {                                                                                                 //
          type: [Schemas.Description]                                                                                  //
        }                                                                                                              //
      });                                                                                                              //
                                                                                                                       //
      schema.clean(finalDoc);                                                                                          //
      let publishedDescription = doc.getPublishedDescription();                                                        //
      if (publishedDescription && publishedDescription.longText) {                                                     //
        finalDoc.description = TagStripper.strip(publishedDescription.longText);                                       //
      }else {                                                                                                          //
        delete finalDoc.description;                                                                                   //
      }                                                                                                                //
      return finalDoc;                                                                                                 //
    }),                                                                                                                //
    new LogAdapter(Logs, Technologies, function(doc) {                                                                 //
      return doc.name;                                                                                                 //
    })                                                                                                                 //
  ]                                                                                                                    //
});                                                                                                                    //
                                                                                                                       //
                                                                                                                       //
Meteor.users.attachBehaviour('river', {                                                                                //
  adapters: [                                                                                                          //
    new ElasticSearchAdapter(esClient, 'techdb', 'users', (doc, modifier) => {                                         //
      let finalDoc = _.clone(doc);                                                                                     //
                                                                                                                       //
      let schema = new SimpleSchema({                                                                                  //
        _id: {                                                                                                         //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.fullName': {                                                                                          //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.country': {                                                                                           //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.address': {                                                                                           //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.imageId': {                                                                                           //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.affiliation': {                                                                                       //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.contactInfo.mobile': {                                                                                //
          type: String                                                                                                 //
        },                                                                                                             //
        'profile.contactInfo.phone': {                                                                                 //
          type: String                                                                                                 //
        },                                                                                                             //
        username: {                                                                                                    //
          type: [Schemas.Description]                                                                                  //
        },                                                                                                             //
        emails: {                                                                                                      //
          type: [Object],                                                                                              //
          blackbox: true                                                                                               //
        }                                                                                                              //
      });                                                                                                              //
                                                                                                                       //
                                                                                                                       //
      schema.clean(finalDoc);                                                                                          //
                                                                                                                       //
      // get user's Email                                                                                              //
      finalDoc.emails = finalDoc.emails.length && finalDoc.emails.map(function(email) {                                //
        return email.address;                                                                                          //
      });                                                                                                              //
                                                                                                                       //
      //  get user's role                                                                                              //
      finalDoc.role = Roles.getRolesForUser(finalDoc._id)[0];                                                          //
      return finalDoc;                                                                                                 //
    }, {                                                                                                               //
      trackedFields: ['profile', 'emails', 'username']                                                                 //
    }),                                                                                                                //
    new LogAdapter(Logs, Meteor.users, function(doc) {                                                                 //
      return doc.identification(['username', 'email', 'fullName']);                                                    //
    }, {                                                                                                               //
      trackedFields: ['profile', 'emails', 'username']                                                                 //
    })                                                                                                                 //
  ]                                                                                                                    //
});                                                                                                                    //
*/                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"config":{"cloudinary.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/config/cloudinary.js                                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Cloudinary.config({                                                                                                    // 1
  cloud_name: Meteor.settings["public"].CloudinaryName,                                                                // 2
  api_key: process.env.CLOUDINARY_ACCESS_KEY_ID,                                                                       // 3
  api_secret: process.env.CLOUDINARY_SECRET_ACCESS_KEY                                                                 // 4
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"kadira.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/config/kadira.js                                                                                             //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Kadira.connect(process.env.KADIRA_APP_KEY, process.env.KADIRA_APP_SECRET);                                             // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"security.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/config/security.js                                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"fixtures":{"admin_account.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/fixtures/admin_account.js                                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var ROLES = ['god', 'admin', 'editor', 'viewer'];                                                                      // 1
Meteor.startup(function () {                                                                                           // 2
  //                                                                                                                   //
  //  Add root                                                                                                         //
  //                                                                                                                   //
  if (!Meteor.users.findOne({                                                                                          // 6
    'emails.address': 'admin@admin.com'                                                                                // 7
  })) {                                                                                                                //
    var userId = Accounts.createUser({                                                                                 // 9
      email: 'admin@admin.com',                                                                                        // 10
      password: 'q1w2e3'                                                                                               // 11
    });                                                                                                                //
    Roles.addUsersToRoles(userId, 'admin');                                                                            // 13
  }                                                                                                                    //
                                                                                                                       //
  //                                                                                                                   //
  //  Preserve only determined ROLES, add them if do not exist                                                         //
  //                                                                                                                   //
  Meteor.roles.remove({                                                                                                // 2
    name: { $nin: ROLES }                                                                                              // 20
  });                                                                                                                  //
  _.each(ROLES, function (role, index) {                                                                               // 22
    var existingRole = Meteor.roles.findOne({ name: role });                                                           // 23
    Meteor.roles.upsert({                                                                                              // 24
      name: role                                                                                                       // 25
    }, {                                                                                                               //
      name: role,                                                                                                      // 27
      hierarchy: index                                                                                                 // 28
    });                                                                                                                //
  });                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"publications":{"attachments_publications.js":["../../imports/api/technologies/technologies",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/attachments_publications.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../imports/api/technologies/technologies');                                            // 1
                                                                                                                       //
Meteor.publishComposite('tabularAttachmentsList', function (tableName, ids, fields) {                                  // 3
  check(tableName, String);                                                                                            // 4
  check(ids, Array);                                                                                                   // 5
  check(fields, Match.Optional(Object));                                                                               // 6
  this.unblock();                                                                                                      // 7
  return {                                                                                                             // 8
    find: function () {                                                                                                // 9
      function find() {                                                                                                //
        this.unblock();                                                                                                // 10
        return Attachments.find({                                                                                      // 11
          _id: {                                                                                                       // 12
            $in: ids                                                                                                   // 13
          }                                                                                                            //
        }, {                                                                                                           //
          fields: fields                                                                                               // 16
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }()                                                                                                                //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publishComposite('attachments.single', function (attachmentId) {                                                // 22
  check(attachmentId, String);                                                                                         // 23
  this.unblock();                                                                                                      // 24
                                                                                                                       //
  var childQuery = {                                                                                                   // 26
    attachmentsId: {                                                                                                   // 27
      $in: [attachmentId]                                                                                              // 28
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  var childOptions = {                                                                                                 // 32
    fields: {                                                                                                          // 33
      _id: true,                                                                                                       // 34
      name: true,                                                                                                      // 35
      attachmentsId: true                                                                                              // 36
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  return {                                                                                                             // 40
    find: function () {                                                                                                // 41
      function find() {                                                                                                // 41
        this.unblock();                                                                                                // 42
        return Attachments.find({                                                                                      // 43
          _id: attachmentId                                                                                            // 44
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
    children: [{                                                                                                       // 47
      find: function () {                                                                                              // 48
        function find(attachment) {                                                                                    // 48
          return Meteor.users.find({                                                                                   // 49
            _id: attachment.createdBy                                                                                  // 50
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 54
        function find(attachment) {                                                                                    // 54
          return Projects.find(childQuery, childOptions);                                                              // 55
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 58
        function find(attachment) {                                                                                    // 58
          return _technologies.Technologies.find(childQuery, childOptions);                                            // 59
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 62
        function find(attachment) {                                                                                    // 62
          return Organizations.find(childQuery, childOptions);                                                         // 63
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('attachments.quickList', function () {                                                                  // 69
  return Attachments.find({}, {                                                                                        // 70
    fields: {                                                                                                          // 71
      name: 1                                                                                                          // 72
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('last-attachment-added', function () {                                                                  // 77
  return Attachments.find({}, {                                                                                        // 78
    sort: {                                                                                                            // 79
      createdAt: -1                                                                                                    // 80
    },                                                                                                                 //
    limit: 1                                                                                                           // 82
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('attachments-counter', function () {                                                                    // 86
  Counts.publish(this, 'attachments-total', Attachments.find());                                                       // 87
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('attachment-relations-counter', function (attachmentId) {                                               // 91
  check(attachmentId, String);                                                                                         // 92
                                                                                                                       //
  Counts.publish(this, 'attachment-technologies-' + attachmentId, _technologies.Technologies.find({                    // 94
    attachmentsId: attachmentId                                                                                        // 95
  }));                                                                                                                 //
  Counts.publish(this, 'attachment-organizations-' + attachmentId, Organizations.find({                                // 97
    attachmentsId: attachmentId                                                                                        // 98
  }));                                                                                                                 //
  Counts.publish(this, 'attachment-projects-' + attachmentId, Projects.find({                                          // 100
    attachmentsId: attachmentId                                                                                        // 101
  }));                                                                                                                 //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"collections_publications.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/collections_publications.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.publishComposite('collections.single', function (collectionId) {                                                // 1
  return {                                                                                                             // 2
    find: function () {                                                                                                // 3
      function find() {                                                                                                //
        return Collections.find({ _id: collectionId });                                                                // 4
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 6
      find: function () {                                                                                              // 7
        function find(collection) {                                                                                    //
          return Collections.find({ parentId: collection._id });                                                       // 8
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 11
        function find(collection) {                                                                                    //
          if (collection.technologiesId && collections.technologiesId.length) {                                        // 12
            return Technologies.find({                                                                                 // 13
              _id: { $in: collection.technologiesId }                                                                  // 14
            });                                                                                                        //
          }                                                                                                            //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('collections.single.noChildren', function (collectionId) {                                              // 22
  check(collectionId, String);                                                                                         // 23
  return Collections.find({                                                                                            // 24
    _id: collectionId                                                                                                  // 25
  });                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"collections_set_publications.js":["../../imports/api/technologies/technologies",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/collections_set_publications.js                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../imports/api/technologies/technologies');                                            // 1
                                                                                                                       //
Meteor.publishComposite('collectionsSet.single', function (collectionsSetId) {                                         // 3
  check(collectionsSetId, String);                                                                                     // 4
  return {                                                                                                             // 5
    find: function () {                                                                                                // 6
      function find() {                                                                                                //
        return CollectionsSet.find({ _id: collectionsSetId });                                                         // 7
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 9
      find: function () {                                                                                              // 10
        function find(collectionsSet) {                                                                                //
          return Projects.find({ _id: collectionsSet.projectId });                                                     // 11
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }(),                                                                                                             //
                                                                                                                       //
      children: [{                                                                                                     // 13
        find: function () {                                                                                            // 14
          function find(project) {                                                                                     //
            return _technologies.Technologies.find({                                                                   // 15
              _id: { $in: _.pluck(project.technologiesStash, 'technologyId') }                                         // 16
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return find;                                                                                                 //
        }()                                                                                                            //
      }]                                                                                                               //
    }, {                                                                                                               //
      find: function () {                                                                                              // 21
        function find(collectionsSet) {                                                                                //
          return Collections.find({                                                                                    // 22
            collectionsSetId: collectionsSet._id                                                                       // 23
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }(),                                                                                                             //
                                                                                                                       //
      children: [{                                                                                                     // 26
        find: function () {                                                                                            // 27
          function find(collection) {                                                                                  //
            return Collections.find({                                                                                  // 28
              parentId: collection._id                                                                                 // 29
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return find;                                                                                                 //
        }()                                                                                                            //
      }]                                                                                                               //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"counters.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/counters.js                                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.publish('recentUpdatesCounter', function (selector) {                                                           // 1
  Counts.publish(this, 'recentUpdatesCounter', Logs.find(selector));                                                   // 2
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"files_publications.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/files_publications.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.publish('files.single', function (fileId) {                                                                     // 1
  check(fileId, String);                                                                                               // 2
  return Files.find({ _id: fileId });                                                                                  // 3
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"images.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/images.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.publish('images.single', function (imageId) {                                                                   // 1
  check(imageId, String);                                                                                              // 2
  return Images.find({ _id: imageId });                                                                                // 3
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"organizations_publications.js":["../../imports/api/technologies/technologies",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/organizations_publications.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../imports/api/technologies/technologies');                                            // 1
                                                                                                                       //
Meteor.publishComposite('tabularOrganizationsList', function (tableName, ids, fields) {                                // 3
  check(tableName, String);                                                                                            // 4
  check(ids, Array);                                                                                                   // 5
  check(fields, Match.Optional(Object));                                                                               // 6
  this.unblock();                                                                                                      // 7
  return {                                                                                                             // 8
    find: function () {                                                                                                // 9
      function find() {                                                                                                //
        this.unblock();                                                                                                // 10
        return Organizations.find({                                                                                    // 11
          _id: {                                                                                                       // 12
            $in: ids                                                                                                   // 13
          }                                                                                                            //
        }, {                                                                                                           //
          fields: fields                                                                                               // 16
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }()                                                                                                                //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publishComposite('organizations.single', function (organizationId) {                                            // 22
  check(organizationId, String);                                                                                       // 23
  this.unblock();                                                                                                      // 24
  return {                                                                                                             // 25
    find: function () {                                                                                                // 26
      function find() {                                                                                                //
        this.unblock();                                                                                                // 27
        return Organizations.find({                                                                                    // 28
          _id: organizationId                                                                                          // 29
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 32
      find: function () {                                                                                              // 33
        function find(org) {                                                                                           //
          /*return org.projectsId && Projects.find({                                                                   //
            _id: {                                                                                                     //
              $in: org.projectsId                                                                                      //
            }                                                                                                          //
          });*/                                                                                                        //
          return Projects.find({                                                                                       // 39
            organizationsId: org._id                                                                                   // 40
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 44
        function find(org) {                                                                                           //
          /*        return org.technologiesId && Technologies.find({                                                   //
                    _id: {                                                                                             //
                      $in: org.technologiesId                                                                          //
                    }                                                                                                  //
                  });*/                                                                                                //
          return _technologies.Technologies.find({                                                                     // 50
            organizationsId: org._id                                                                                   // 51
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 55
        function find(org) {                                                                                           //
          return org.attachmentsId && Attachments.find({                                                               // 56
            _id: {                                                                                                     // 57
              $in: org.attachmentsId                                                                                   // 58
            }                                                                                                          //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 63
        function find(org) {                                                                                           //
          if (org.logo) {                                                                                              // 64
            return Images.find({                                                                                       // 65
              _id: org.logo                                                                                            // 66
            });                                                                                                        //
          }                                                                                                            //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('organizations.keyPeople', function (orgId) {                                                           // 74
  check(orgId, String);                                                                                                // 75
  return Organizations.find({                                                                                          // 76
    _id: orgId                                                                                                         // 77
  }, {                                                                                                                 //
    fields: {                                                                                                          // 79
      keyPeople: 1                                                                                                     // 80
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('organizations.quickList', function () {                                                                // 85
  return Organizations.find({}, {                                                                                      // 86
    fields: {                                                                                                          // 87
      name: 1                                                                                                          // 88
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('last-organization-added', function () {                                                                // 93
  return Organizations.find({}, {                                                                                      // 94
    sort: {                                                                                                            // 95
      createdAt: -1                                                                                                    // 96
    },                                                                                                                 //
    limit: 1                                                                                                           // 98
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('organizations-counter', function () {                                                                  // 103
  Counts.publish(this, 'organizations-total', Organizations.find());                                                   // 104
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('organization-relations-counter', function (organizationId) {                                           // 107
  check(organizationId, String);                                                                                       // 108
  Counts.publish(this, 'organization-technologies-' + organizationId, _technologies.Technologies.find({                // 109
    organizationsId: organizationId                                                                                    // 110
  }));                                                                                                                 //
  Counts.publish(this, 'organization-projects-' + organizationId, Projects.find({                                      // 112
    organizationsId: organizationId                                                                                    // 113
  }));                                                                                                                 //
  Counts.publish(this, 'organization-attachments-' + organizationId, Organizations.find({                              // 115
    _id: organizationId                                                                                                // 116
  }), { countFromFieldLength: 'attachmentsId' });                                                                      //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"projects_publications.js":["../../imports/api/technologies/technologies",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/projects_publications.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../../imports/api/technologies/technologies');                                            // 1
                                                                                                                       //
Meteor.publishComposite('tabularProjectsList', function (tableName, ids, fields) {                                     // 3
  check(tableName, String);                                                                                            // 4
  check(ids, Array);                                                                                                   // 5
  check(fields, Match.Optional(Object));                                                                               // 6
  this.unblock();                                                                                                      // 7
  return {                                                                                                             // 8
    find: function () {                                                                                                // 9
      function find() {                                                                                                //
        this.unblock();                                                                                                // 10
        return Projects.find({                                                                                         // 11
          _id: {                                                                                                       // 12
            $in: ids                                                                                                   // 13
          }                                                                                                            //
        }, {                                                                                                           //
          fields: fields                                                                                               // 16
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }()                                                                                                                //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publishComposite('projects.single', function (projectId) {                                                      // 23
  check(projectId, String);                                                                                            // 24
  this.unblock();                                                                                                      // 25
  return {                                                                                                             // 26
    find: function () {                                                                                                // 27
      function find() {                                                                                                //
        this.unblock();                                                                                                // 28
        return Projects.find({                                                                                         // 29
          _id: projectId                                                                                               // 30
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 33
      find: function () {                                                                                              // 34
        function find(project) {                                                                                       //
          return CollectionsSet.find({ projectId: project._id });                                                      // 35
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }(),                                                                                                             //
                                                                                                                       //
      children: [{                                                                                                     // 37
        find: function () {                                                                                            // 38
          function find(collectionSet) {                                                                               //
            return Collections.find({                                                                                  // 39
              collectionsSetId: collectionSet._id                                                                      // 40
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return find;                                                                                                 //
        }()                                                                                                            //
      }]                                                                                                               //
    }, {                                                                                                               //
      find: function () {                                                                                              // 45
        function find(project) {                                                                                       //
          return Organizations.find({                                                                                  // 46
            projectsId: project._id                                                                                    // 47
          }, {                                                                                                         //
            fields: {                                                                                                  // 49
              name: 1,                                                                                                 // 50
              projectsId: 1                                                                                            // 51
            }                                                                                                          //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 56
        function find(project) {                                                                                       //
          return _technologies.Technologies.find({                                                                     // 57
            _id: { $in: _.pluck(project.technologiesStash, 'technologyId') }                                           // 58
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }(),                                                                                                             //
                                                                                                                       //
      children: [{                                                                                                     // 61
        find: function () {                                                                                            // 62
          function find(technology) {                                                                                  //
            return Collections.find({                                                                                  // 63
              technologiesId: technology._id                                                                           // 64
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return find;                                                                                                 //
        }()                                                                                                            //
      }]                                                                                                               //
    }, {                                                                                                               //
      find: function () {                                                                                              // 69
        function find(project) {                                                                                       //
          return Meteor.users.find({                                                                                   // 70
            projectsId: project._id                                                                                    // 71
          }, {                                                                                                         //
            fields: {                                                                                                  // 73
              'profile.fullName': 1,                                                                                   // 74
              emails: 1,                                                                                               // 75
              username: 1,                                                                                             // 76
              projectsId: 1                                                                                            // 77
            }                                                                                                          //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('projects.quickList', function () {                                                                     // 85
  return Projects.find({}, {                                                                                           // 86
    fields: {                                                                                                          // 87
      name: 1                                                                                                          // 88
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('projects-status-counter', function () {                                                                // 94
  Counts.publish(this, 'projects-total', Projects.find());                                                             // 95
                                                                                                                       //
  Counts.publish(this, 'projects-prospect', Projects.find({                                                            // 97
    status: 'prospect'                                                                                                 // 98
  }));                                                                                                                 //
  Counts.publish(this, 'projects-open', Projects.find({                                                                // 100
    status: 'open'                                                                                                     // 101
  }));                                                                                                                 //
  Counts.publish(this, 'projects-closed', Projects.find({                                                              // 103
    status: 'closed'                                                                                                   // 104
  }));                                                                                                                 //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('project-relations-counter', function (projectId) {                                                     // 108
  check(projectId, String);                                                                                            // 109
  Counts.publish(this, 'project-collections-' + projectId, Collections.find({                                          // 110
    projectId: projectId                                                                                               // 111
  }));                                                                                                                 //
  Counts.publish(this, 'project-technologies-stash-' + projectId, Projects.find({                                      // 113
    _id: projectId                                                                                                     // 114
  }), { countFromFieldLength: 'technologiesStash' });                                                                  //
  Counts.publish(this, 'project-attachments-' + projectId, Projects.find({                                             // 116
    _id: projectId                                                                                                     // 117
  }), { countFromFieldLength: 'attachmentsId' });                                                                      //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('project-tech-stash', function (projectId) {                                                            // 122
  check(projectId, String);                                                                                            // 123
  var project = Projects.findOne(projectId);                                                                           // 124
  var techIds = _.pluck(project.technologiesStash, 'technologyId');                                                    // 125
  var cursor = _technologies.Technologies.find({                                                                       // 126
    _id: { $in: techIds },                                                                                             // 127
    status: 'review'                                                                                                   // 128
  });                                                                                                                  //
                                                                                                                       //
  Counts.publish(this, 'project-tech-stash-review', cursor);                                                           // 131
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('last-project-added', function () {                                                                     // 134
  return Projects.find({}, {                                                                                           // 135
    sort: {                                                                                                            // 136
      createdAt: -1                                                                                                    // 137
    },                                                                                                                 //
    limit: 1                                                                                                           // 139
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
/*Meteor.publishComposite('projects.techStash', function(projectId) {                                                  //
  check(projectId, String);                                                                                            //
  return {                                                                                                             //
    find() {                                                                                                           //
      return Projects.find({                                                                                           //
        _id: projectId                                                                                                 //
      }, {                                                                                                             //
        fields: {                                                                                                      //
          technologiesStash: 1                                                                                         //
        }                                                                                                              //
      });                                                                                                              //
    },                                                                                                                 //
    children: [{                                                                                                       //
      find(project) {                                                                                                  //
                                                                                                                       //
      }                                                                                                                //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
*/                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"recent_updates.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/recent_updates.js                                                                               //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var ALL_COLLECTIONS_CHAR = '*';                                                                                        // 1
var COUNTER_PREFIX = 'recentUpdatesCounter-';                                                                          // 2
                                                                                                                       //
Meteor.publish('recentUpdates', function (selector, counterId, limit) {                                                // 4
  check(selector, Object);                                                                                             // 5
  check(counterId, String);                                                                                            // 6
  check(limit, Number);                                                                                                // 7
                                                                                                                       //
  Counts.publish(this, COUNTER_PREFIX + counterId, Logs.find(selector));                                               // 9
                                                                                                                       //
  if (limit !== 0) {                                                                                                   // 12
    return Logs.find(selector, {                                                                                       // 13
      limit: limit,                                                                                                    // 14
      sort: {                                                                                                          // 15
        createdAt: -1                                                                                                  // 16
      }                                                                                                                //
    });                                                                                                                //
  }                                                                                                                    //
  this.ready();                                                                                                        // 20
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"roles_publications.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/roles_publications.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
Meteor.publish(null, function () {                                                                                     // 2
  return Meteor.roles.find({});                                                                                        // 3
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"stashed_tech_publications.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/stashed_tech_publications.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"users_publications.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/publications/users_publications.js                                                                           //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.publish('user.enrollAccount', function (token) {                                                                // 1
  check(token, String);                                                                                                // 2
  return Meteor.users.find({                                                                                           // 3
    'services.password.reset.token': token                                                                             // 4
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
//                                                                                                                     //
//  Publication da lista de users                                                                                      //
//                                                                                                                     //
Meteor.publishComposite('tabular_UsersList', function (tableName, ids, fields) {                                       // 12
  check(tableName, String);                                                                                            // 13
  check(ids, Array);                                                                                                   // 14
  check(fields, Match.Optional(Object));                                                                               // 15
  this.unblock();                                                                                                      // 16
  return {                                                                                                             // 17
    find: function () {                                                                                                // 18
      function find() {                                                                                                //
        this.unblock();                                                                                                // 19
        if (!this.userId || !Roles.userIsInRole(this.userId, ['admin', 'god'])) {                                      // 20
          return false;                                                                                                // 21
        }                                                                                                              //
                                                                                                                       //
        return Meteor.users.find({                                                                                     // 24
          _id: {                                                                                                       // 25
            $in: ids                                                                                                   // 26
          }                                                                                                            //
        }, {                                                                                                           //
          fields: fields                                                                                               // 29
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }()                                                                                                                //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
// TODO: SECURITY                                                                                                      //
Meteor.publish('singleUser', function (userId) {                                                                       // 36
  check(userId, String);                                                                                               // 37
                                                                                                                       //
  return Meteor.users.find({                                                                                           // 39
    _id: userId                                                                                                        // 40
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('users.extraData', function () {                                                                        // 45
  return Meteor.users.find({                                                                                           // 46
    _id: this.userId                                                                                                   // 47
  }, {                                                                                                                 //
    fields: {                                                                                                          // 49
      roles: 1,                                                                                                        // 50
      status: 1,                                                                                                       // 51
      emails: 1,                                                                                                       // 52
      projectsId: 1                                                                                                    // 53
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publishComposite('users.single', function (userId) {                                                            // 59
  check(userId, String);                                                                                               // 60
  this.unblock();                                                                                                      // 61
  return {                                                                                                             // 62
    find: function () {                                                                                                // 63
      function find() {                                                                                                //
        this.unblock();                                                                                                // 64
        return Meteor.users.find({                                                                                     // 65
          _id: userId                                                                                                  // 66
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 69
      find: function () {                                                                                              // 70
        function find(user) {                                                                                          //
          if (user.profile && user.profile.imageId) {                                                                  // 71
            return Images.find({                                                                                       // 72
              _id: user.profile.imageId                                                                                // 73
            });                                                                                                        //
          }                                                                                                            //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }, {                                                                                                               //
      find: function () {                                                                                              // 78
        function find(user) {                                                                                          //
          if (user.projectsId) {                                                                                       // 79
            return Projects.find({                                                                                     // 80
              _id: {                                                                                                   // 81
                $in: user.projectsId                                                                                   // 82
              }                                                                                                        //
            }, {                                                                                                       //
              fields: {                                                                                                // 85
                name: 1                                                                                                // 86
              }                                                                                                        //
            });                                                                                                        //
          }                                                                                                            //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('Users.roles', function () {                                                                            // 96
  return Meteor.users.find({}, {                                                                                       // 97
    fields: {                                                                                                          // 98
      roles: 1                                                                                                         // 99
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('user.status', function (userId) {                                                                      // 104
  check(userId, String);                                                                                               // 105
  return Meteor.users.find({                                                                                           // 106
    _id: userId                                                                                                        // 107
  }, {                                                                                                                 //
    fields: {                                                                                                          // 109
      status: 1                                                                                                        // 110
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('user.projects', function (userId) {                                                                    // 115
  check(userId, String);                                                                                               // 116
  return Meteor.users.find({                                                                                           // 117
    _id: userId                                                                                                        // 118
  }, {                                                                                                                 //
    fields: {                                                                                                          // 120
      projectsId: 1                                                                                                    // 121
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('user.info', function (userId) {                                                                        // 126
  check(userId, String);                                                                                               // 127
  return Meteor.users.find({                                                                                           // 128
    _id: userId                                                                                                        // 129
  }, {                                                                                                                 //
    fields: {                                                                                                          // 131
      'profile.firstName': 1,                                                                                          // 132
      'profile.lastName': 1,                                                                                           // 133
      'profile.affiliation': 1,                                                                                        // 134
      'profile.country': 1,                                                                                            // 135
      'profile.birth': 1,                                                                                              // 136
      'profile.gender': 1,                                                                                             // 137
      'profile.address': 1                                                                                             // 138
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
Meteor.publish('users-roles-counter', function () {                                                                    // 144
  Counts.publish(this, 'users-admin', Roles.getUsersInRole('admin'));                                                  // 145
  Counts.publish(this, 'users-editor', Roles.getUsersInRole('editor'));                                                // 146
  Counts.publish(this, 'users-viewer', Roles.getUsersInRole('viewer'));                                                // 147
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"search":{"search_source.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/search/search_source.js                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/**                                                                                                                    //
 * SearchSouce globalSearch                                                                                            //
 * get data from any source (in this case, esEngine)                                                                   //
 *                                                                                                                     //
 * options:                                                                                                            //
 * @from {Integer} defines the offset from the first result you want to fetch                                          //
 * @size {Integer} allows you to configure the maximum amount of hits to be returned                                   //
 * @nameBoost {Integer} the weight of Name on the calculation of relevance                                             //
 * @nameFuzziness {Integer} Name's level of fuzziness                                                                  //
 * @descriptionBoost {Integer} the weight of Description/Description.longText on the calculation of relevance          //
 * @descriptionFuzziness {Integer} Description/DEscription.longText 's level of fuzziness                              //
 * returns:                                                                                                            //
 * {object}                                                                                                            //
 *  @data -> results                                                                                                   //
 *  @metadata -> total, took                                                                                           //
 */                                                                                                                    //
                                                                                                                       //
SearchSource.defineSource('globalSearch', function (searchText, _ref) {                                                // 18
  var _ref$from = _ref.from;                                                                                           //
  var from = _ref$from === undefined ? 0 : _ref$from;                                                                  //
  var _ref$size = _ref.size;                                                                                           //
  var size = _ref$size === undefined ? 8 : _ref$size;                                                                  //
  var _ref$types = _ref.types;                                                                                         //
  var types = _ref$types === undefined ? [] : _ref$types;                                                              //
  var _ref$nameBoost = _ref.nameBoost;                                                                                 //
  var nameBoost = _ref$nameBoost === undefined ? 100 : _ref$nameBoost;                                                 //
  var _ref$nameFuzziness = _ref.nameFuzziness;                                                                         //
  var nameFuzziness = _ref$nameFuzziness === undefined ? 2 : _ref$nameFuzziness;                                       //
  var _ref$descriptionBoost = _ref.descriptionBoost;                                                                   //
  var descriptionBoost = _ref$descriptionBoost === undefined ? 1 : _ref$descriptionBoost;                              //
  var _ref$descriptionFuzzi = _ref.descriptionFuzziness;                                                               //
  var descriptionFuzziness = _ref$descriptionFuzzi === undefined ? 1 : _ref$descriptionFuzzi;                          //
  var _ref$techIdBoost = _ref.techIdBoost;                                                                             //
  var techIdBoost = _ref$techIdBoost === undefined ? 200 : _ref$techIdBoost;                                           //
  var _ref$excludeIds = _ref.excludeIds;                                                                               //
  var excludeIds = _ref$excludeIds === undefined ? [] : _ref$excludeIds;                                               //
                                                                                                                       //
  searchText = searchText.toLowerCase();                                                                               // 29
  var words = searchText.trim().split(' ');                                                                            // 30
  var lastWord = words[words.length - 1] || '';                                                                        // 31
                                                                                                                       //
  var query = {                                                                                                        // 33
    bool: {                                                                                                            // 34
      must: [//  At least one must match                                                                               // 35
      {                                                                                                                // 36
        bool: {                                                                                                        // 37
          should: [// Any of these conditions should match, the most, more relevant                                    // 38
          {                                                                                                            // 39
            match: { // Tech Id                                                                                        // 40
              techId: {                                                                                                // 41
                query: searchText,                                                                                     // 42
                boost: techIdBoost                                                                                     // 43
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 47
              techId: {                                                                                                // 48
                value: lastWord,                                                                                       // 49
                boost: techIdBoost                                                                                     // 50
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            match: { // Name                                                                                           // 54
              name: {                                                                                                  // 55
                query: searchText,                                                                                     // 56
                boost: nameBoost                                                                                       // 57
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 61
              name: {                                                                                                  // 62
                value: lastWord,                                                                                       // 63
                boost: nameBoost                                                                                       // 64
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            match: { // Description                                                                                    // 68
              description: {                                                                                           // 69
                query: searchText,                                                                                     // 70
                boost: descriptionBoost                                                                                // 71
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 75
              description: {                                                                                           // 76
                value: lastWord,                                                                                       // 77
                boost: descriptionBoost                                                                                // 78
              }                                                                                                        //
            }                                                                                                          //
          }]                                                                                                           //
        }                                                                                                              //
      }],                                                                                                              //
      should: [{                                                                                                       // 86
        match_phrase_prefix: {                                                                                         // 87
          name: {                                                                                                      // 88
            query: searchText,                                                                                         // 89
            boost: nameBoost,                                                                                          // 90
            slop: 5                                                                                                    // 91
          }                                                                                                            //
        }                                                                                                              //
      }, {                                                                                                             //
        match_phrase_prefix: {                                                                                         // 95
          description: {                                                                                               // 96
            query: searchText,                                                                                         // 97
            boost: descriptionBoost,                                                                                   // 98
            slop: 5                                                                                                    // 99
          }                                                                                                            //
        }                                                                                                              //
      }]                                                                                                               //
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  var filter = {};                                                                                                     // 106
                                                                                                                       //
  if (excludeIds.length) {                                                                                             // 108
    filter = {                                                                                                         // 109
      bool: {                                                                                                          // 110
        must_not: [{                                                                                                   // 111
          ids: {                                                                                                       // 112
            values: excludeIds                                                                                         // 113
          }                                                                                                            //
        }]                                                                                                             //
      }                                                                                                                //
    };                                                                                                                 //
  }                                                                                                                    //
                                                                                                                       //
  var finalQuery = {                                                                                                   // 120
    filtered: {                                                                                                        // 121
      filter: filter,                                                                                                  // 122
      query: query                                                                                                     // 123
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  var search = esClient.prettySearch({                                                                                 // 127
    index: 'techdb',                                                                                                   // 128
    type: types.join(','), // filter types                                                                             // 129
    body: {                                                                                                            // 130
      from: from,                                                                                                      // 131
      size: size,                                                                                                      // 132
      sort: ['_score', {                                                                                               // 133
        name: {                                                                                                        // 134
          order: 'desc'                                                                                                // 135
        }                                                                                                              //
      }],                                                                                                              //
      query: finalQuery,                                                                                               // 138
      highlight: {                                                                                                     // 139
        pre_tags: ['<em>'],                                                                                            // 140
        post_tags: ['</em>'],                                                                                          // 141
        fields: {                                                                                                      // 142
          name: {},                                                                                                    // 143
          description: {}                                                                                              // 144
        }                                                                                                              //
      }                                                                                                                //
    }                                                                                                                  //
  });                                                                                                                  //
                                                                                                                       //
  var metadata = {                                                                                                     // 150
    total: search.total,                                                                                               // 151
    took: search.took                                                                                                  // 152
  };                                                                                                                   //
                                                                                                                       //
  return {                                                                                                             // 155
    data: search.results,                                                                                              // 156
    metadata: metadata                                                                                                 // 157
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
SearchSource.defineSource('userSearch', function (searchText) {                                                        // 161
  var _ref2 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];                                 //
                                                                                                                       //
  var _ref2$from = _ref2.from;                                                                                         //
  var from = _ref2$from === undefined ? 0 : _ref2$from;                                                                //
  var _ref2$size = _ref2.size;                                                                                         //
  var size = _ref2$size === undefined ? 8 : _ref2$size;                                                                //
  var _ref2$nameBoost = _ref2.nameBoost;                                                                               //
  var nameBoost = _ref2$nameBoost === undefined ? 1 : _ref2$nameBoost;                                                 //
  var _ref2$emailBoost = _ref2.emailBoost;                                                                             //
  var emailBoost = _ref2$emailBoost === undefined ? 5 : _ref2$emailBoost;                                              //
  var _ref2$usernameBoost = _ref2.usernameBoost;                                                                       //
  var usernameBoost = _ref2$usernameBoost === undefined ? 10 : _ref2$usernameBoost;                                    //
                                                                                                                       //
                                                                                                                       //
  searchText = searchText.toLowerCase();                                                                               // 169
  var words = searchText.trim().split(' ');                                                                            // 170
  var lastWord = words[words.length - 1] || '';                                                                        // 171
                                                                                                                       //
  var query = {                                                                                                        // 173
    bool: {                                                                                                            // 174
      must: [//  At least one must match                                                                               // 175
      {                                                                                                                // 176
        bool: {                                                                                                        // 177
          should: [// Any of these conditions should match, the most, more relevant                                    // 178
          {                                                                                                            // 179
            match: {                                                                                                   // 180
              'profile.fullName': {                                                                                    // 181
                query: searchText,                                                                                     // 182
                boost: nameBoost                                                                                       // 183
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 187
              'profile.fullName': {                                                                                    // 188
                value: lastWord,                                                                                       // 189
                boost: nameBoost                                                                                       // 190
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            match: {                                                                                                   // 194
              username: {                                                                                              // 195
                query: searchText,                                                                                     // 196
                boost: usernameBoost                                                                                   // 197
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 201
              username: {                                                                                              // 202
                value: lastWord,                                                                                       // 203
                boost: usernameBoost                                                                                   // 204
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            match: {                                                                                                   // 208
              'emails.address': {                                                                                      // 209
                query: searchText,                                                                                     // 210
                boost: emailBoost                                                                                      // 211
              }                                                                                                        //
            }                                                                                                          //
          }, {                                                                                                         //
            prefix: {                                                                                                  // 215
              'emails.address': {                                                                                      // 216
                value: lastWord,                                                                                       // 217
                boost: emailBoost                                                                                      // 218
              }                                                                                                        //
            }                                                                                                          //
          }]                                                                                                           //
        }                                                                                                              //
      }],                                                                                                              //
      should: [{                                                                                                       // 226
        match_phrase_prefix: {                                                                                         // 227
          'profile.fullName': {                                                                                        // 228
            query: searchText,                                                                                         // 229
            boost: nameBoost,                                                                                          // 230
            slop: 5                                                                                                    // 231
          }                                                                                                            //
        }                                                                                                              //
      }]                                                                                                               //
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  var finalQuery = {                                                                                                   // 238
    filtered: {                                                                                                        // 239
      filter: {},                                                                                                      // 240
      query: query                                                                                                     // 241
    }                                                                                                                  //
  };                                                                                                                   //
                                                                                                                       //
  var search = esClient.prettySearch({                                                                                 // 245
    index: 'techdb',                                                                                                   // 246
    type: 'users',                                                                                                     // 247
    body: {                                                                                                            // 248
      query: finalQuery,                                                                                               // 249
      highlight: {                                                                                                     // 250
        pre_tags: ['<b>'],                                                                                             // 251
        post_tags: ['</b>'],                                                                                           // 252
        fields: {                                                                                                      // 253
          name: {},                                                                                                    // 254
          username: {}                                                                                                 // 255
        }                                                                                                              //
      }                                                                                                                //
    }                                                                                                                  //
  });                                                                                                                  //
                                                                                                                       //
  var metadata = {                                                                                                     // 261
    total: search.total,                                                                                               // 262
    took: search.took                                                                                                  // 263
  };                                                                                                                   //
                                                                                                                       //
  return {                                                                                                             // 267
    data: search.results,                                                                                              // 268
    metadata: metadata                                                                                                 // 269
  };                                                                                                                   //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"startup":{"loadFixtures.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/startup/loadFixtures.js                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"loadUsers.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/startup/loadUsers.js                                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"bootstrap.js":function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/bootstrap.js                                                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
Meteor.startup(function () {});                                                                                        // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"main.js":["../imports/startup/server",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// server/main.js                                                                                                      //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../imports/startup/server');                                                                                  // 1
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"imports":{"api":{"technologies":{"server":{"es_config.js":["../technologies.js",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/server/es_config.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _technologies = require('../technologies.js');                                                                     // 1
                                                                                                                       //
_technologies.Technologies.esDriver(esClient, 'techdb', 'technologies', function (cleanedDoc, doc, hook) {             // 3
  var tDoc = hook.transform();                                                                                         // 4
  var publishedDescription = tDoc.getPublishedDescription();                                                           // 5
  if (publishedDescription && publishedDescription.longText) {                                                         // 6
    cleanedDoc.description = TagStripper.strip(publishedDescription.longText);                                         // 7
    cleanedDoc.shortDescription = publishedDescription.shortText || '';                                                // 8
  } else {                                                                                                             //
    delete cleanedDoc.description;                                                                                     // 10
  }                                                                                                                    //
                                                                                                                       //
  var showcasedImage = tDoc.getShowcasedImage();                                                                       // 13
  if (showcasedImage) {                                                                                                // 14
    cleanedDoc.image = showcasedImage.src;                                                                             // 15
  }                                                                                                                    //
  delete cleanedDoc.images;                                                                                            // 17
                                                                                                                       //
  return cleanedDoc;                                                                                                   // 19
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"hooks.js":["meteor/meteor","../technologies.js","remove-markdown",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/server/hooks.js                                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _meteor = require('meteor/meteor');                                                                                // 1
                                                                                                                       //
var _technologies = require('../technologies.js');                                                                     // 2
                                                                                                                       //
var _removeMarkdown = require('remove-markdown');                                                                      // 3
                                                                                                                       //
var TECH_ID_PAD_SIZE = 4;                                                                                              // 5
var SHORT_TEXT_TRUNCATE_AT = 144;                                                                                      // 6
                                                                                                                       //
function generateShortDescription(userId, doc) {                                                                       // 8
  // create truncated shortText without markdown based on longText                                                     //
  if (doc.description && Array.isArray(doc.description)) {                                                             // 10
    doc.description = _.map(doc.description, function (desc) {                                                         // 11
      if (!desc.shortText && desc.longText) {                                                                          // 12
        var noMarkdown = (0, _removeMarkdown.removeMarkdown)(desc.longText) || '';                                     // 13
        desc.shortText = noMarkdown.substring(0, SHORT_TEXT_TRUNCATE_AT);                                              // 14
      }                                                                                                                //
      return desc;                                                                                                     // 16
    });                                                                                                                //
  }                                                                                                                    //
}                                                                                                                      //
                                                                                                                       //
function generateTechId(userId, doc) {                                                                                 // 21
  doc.techId = s.lpad(AtomicCounter.increment('techId', 1), TECH_ID_PAD_SIZE, '0');                                    // 22
}                                                                                                                      //
                                                                                                                       //
if (_meteor.Meteor.isServer) {                                                                                         // 25
  _technologies.Technologies.before.insert(generateShortDescription);                                                  // 26
  _technologies.Technologies.before.insert(generateTechId);                                                            // 27
}                                                                                                                      //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"publications.js":["meteor/meteor","meteor/check","meteor/aldeed:simple-schema","meteor/tmeasday:publish-counts","../technologies.js","../../technologies_descriptions/technologies_descriptions",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/server/publications.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
var _meteor = require('meteor/meteor');                                                                                // 1
                                                                                                                       //
var _check = require('meteor/check');                                                                                  // 2
                                                                                                                       //
var _aldeedSimpleSchema = require('meteor/aldeed:simple-schema');                                                      // 4
                                                                                                                       //
var _tmeasdayPublishCounts = require('meteor/tmeasday:publish-counts');                                                // 5
                                                                                                                       //
var _technologies = require('../technologies.js');                                                                     // 7
                                                                                                                       //
var _technologies_descriptions = require('../../technologies_descriptions/technologies_descriptions');                 // 8
                                                                                                                       //
/**                                                                                                                    //
 * Publish as sigle technology                                                                                         //
 * @param  {String} technologyId The technology _id.                                                                   //
 * @param  {Boolean} options.organizations  If {true}, publish the related organizations. Default {false}.             //
 * @param  {Boolean} options.projects If {true}, publish the related projects. Default {false}.                        //
 * @param  {Boolean} options.attachments If {true}, publish the related attachments. Default {false}.                  //
 */                                                                                                                    //
_meteor.Meteor.publishComposite('technologies.single', function (technologyId) {                                       // 17
  var options = arguments.length <= 1 || arguments[1] === undefined ? {                                                //
    organizations: false,                                                                                              // 18
    projects: false,                                                                                                   // 19
    attachments: false                                                                                                 // 20
  } : arguments[1];                                                                                                    //
                                                                                                                       //
  (0, _check.check)(technologyId, String);                                                                             // 22
  (0, _check.check)(options, Object);                                                                                  // 23
  if (options.organizations !== undefined) (0, _check.check)(options.organizations, Boolean);                          // 24
  if (options.projects !== undefined) (0, _check.check)(options.projects, Boolean);                                    // 25
  if (options.attachments !== undefined) (0, _check.check)(options.attachments, Boolean);                              // 26
                                                                                                                       //
  this.unblock();                                                                                                      // 28
                                                                                                                       //
  var children = [{                                                                                                    // 30
    find: function () {                                                                                                // 31
      function find(technology) {                                                                                      //
        if (technology.images) {                                                                                       // 32
          var imagesId = _.pluck(technology.images, 'src') || [];                                                      // 33
          return Images.find({                                                                                         // 34
            _id: {                                                                                                     // 35
              $in: imagesId                                                                                            // 36
            }                                                                                                          //
          });                                                                                                          //
        }                                                                                                              //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }()                                                                                                                //
  }, {                                                                                                                 //
    find: function () {                                                                                                // 42
      function find(technology) {                                                                                      //
        return _technologies_descriptions.TechnologiesDescriptions.find({                                              // 43
          technologyId: technology._id                                                                                 // 44
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: [{                                                                                                       // 47
      find: function () {                                                                                              // 48
        function find(description) {                                                                                   //
          return _meteor.Meteor.users.find({                                                                           // 49
            _id: {                                                                                                     // 50
              $in: [description.createdBy, description.updatedBy]                                                      // 51
            }                                                                                                          //
          }, {                                                                                                         //
            fields: {                                                                                                  // 54
              'profile.fullName': 1                                                                                    // 55
            }                                                                                                          //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    }]                                                                                                                 //
  }];                                                                                                                  //
                                                                                                                       //
  if (options.organizations) {                                                                                         // 62
    children.push({                                                                                                    // 63
      find: function () {                                                                                              // 64
        function find(technology) {                                                                                    //
          return Organizations.find({ _id: { $in: technology.organizationsId || [] } });                               // 65
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    });                                                                                                                //
  }                                                                                                                    //
                                                                                                                       //
  if (options.projects) {                                                                                              // 70
    children.push({                                                                                                    // 71
      find: function () {                                                                                              // 72
        function find(technology) {                                                                                    //
          return Projects.find({ _id: { $in: technology.projectsId || [] } });                                         // 73
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    });                                                                                                                //
  }                                                                                                                    //
                                                                                                                       //
  if (options.attachments) {                                                                                           // 78
    children.push({                                                                                                    // 79
      find: function () {                                                                                              // 80
        function find(technology) {                                                                                    //
          return Attachments.find({ _id: { $in: technology.attachmentsId || [] } });                                   // 81
        }                                                                                                              //
                                                                                                                       //
        return find;                                                                                                   //
      }()                                                                                                              //
    });                                                                                                                //
  }                                                                                                                    //
                                                                                                                       //
  return {                                                                                                             // 86
    find: function () {                                                                                                // 87
      function find() {                                                                                                //
        this.unblock();                                                                                                // 88
        return _technologies.Technologies.find({                                                                       // 89
          _id: technologyId                                                                                            // 90
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return find;                                                                                                     //
    }(),                                                                                                               //
                                                                                                                       //
    children: children                                                                                                 // 93
  };                                                                                                                   //
});                                                                                                                    //
                                                                                                                       //
_meteor.Meteor.publish('technologies.quickList', function () {                                                         // 97
  return _technologies.Technologies.find({}, {                                                                         // 98
    fields: {                                                                                                          // 99
      name: 1                                                                                                          // 100
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
_meteor.Meteor.publish('technologies-status-counter', function () {                                                    // 105
  _tmeasdayPublishCounts.Counts.publish(this, 'technologies-total', _technologies.Technologies.find());                // 106
  _tmeasdayPublishCounts.Counts.publish(this, 'technologies-published', _technologies.Technologies.find({              // 107
    status: 'published'                                                                                                // 108
  }));                                                                                                                 //
  _tmeasdayPublishCounts.Counts.publish(this, 'technologies-review', _technologies.Technologies.find({                 // 110
    status: 'review'                                                                                                   // 111
  }));                                                                                                                 //
  _tmeasdayPublishCounts.Counts.publish(this, 'technologies-draft', _technologies.Technologies.find({                  // 113
    status: 'draft'                                                                                                    // 114
  }));                                                                                                                 //
});                                                                                                                    //
                                                                                                                       //
_meteor.Meteor.publish('last-technology-added', function () {                                                          // 118
  return _technologies.Technologies.find({}, {                                                                         // 119
    sort: {                                                                                                            // 120
      createdAt: -1                                                                                                    // 121
    },                                                                                                                 //
    limit: 1                                                                                                           // 123
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
_meteor.Meteor.publish('technology.status', function (techId) {                                                        // 128
  (0, _check.check)(techId, String);                                                                                   // 129
                                                                                                                       //
  return _technologies.Technologies.find({                                                                             // 131
    _id: techId                                                                                                        // 132
  }, {                                                                                                                 //
    fields: {                                                                                                          // 134
      status: 1                                                                                                        // 135
    }                                                                                                                  //
  });                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
_meteor.Meteor.publish('technology-relations-counter', function (technologyId) {                                       // 140
  (0, _check.check)(technologyId, String);                                                                             // 141
  _tmeasdayPublishCounts.Counts.publish(this, 'technology-attachments-' + technologyId, _technologies.Technologies.find({
    _id: technologyId                                                                                                  // 143
  }), { countFromFieldLength: 'attachmentsId' });                                                                      //
                                                                                                                       //
  _tmeasdayPublishCounts.Counts.publish(this, 'technology-projects-' + technologyId, _technologies.Technologies.find({
    _id: technologyId                                                                                                  // 147
  }), { countFromFieldLength: 'projectsId' });                                                                         //
                                                                                                                       //
  _tmeasdayPublishCounts.Counts.publish(this, 'technology-organizations-' + technologyId, _technologies.Technologies.find({
    _id: technologyId                                                                                                  // 151
  }), { countFromFieldLength: 'organizationsId' });                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"methods.js":["meteor/mdg:validated-method","./technologies.js","./schema.js",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/methods.js                                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.updateShowcasedImage = exports.unlinkImage = exports.linkImage = exports.remove = exports.update = exports.insert = undefined;
                                                                                                                       //
var _mdgValidatedMethod = require('meteor/mdg:validated-method');                                                      // 1
                                                                                                                       //
var _technologies = require('./technologies.js');                                                                      // 2
                                                                                                                       //
var _schema = require('./schema.js');                                                                                  // 3
                                                                                                                       //
function checkPermissions() {                                                                                          // 5
  if (Roles.userIsInRole(Meteor.user(), ['admin', 'editor'])) {                                                        // 6
    return true;                                                                                                       // 7
  }                                                                                                                    //
  throw new Meteor.Error(403, 'Not authorized');                                                                       // 9
}                                                                                                                      //
                                                                                                                       //
var insert = exports.insert = new _mdgValidatedMethod.ValidatedMethod({                                                // 12
  name: 'technologies.insert',                                                                                         // 13
  validate: _schema.TechnologySchema.validator(),                                                                      // 14
  run: function () {                                                                                                   // 15
    function run(doc) {                                                                                                //
      checkPermissions();                                                                                              // 16
      return _technologies.Technologies.insert(doc);                                                                   // 17
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var update = exports.update = new _mdgValidatedMethod.ValidatedMethod({                                                // 21
  name: 'technologies.update',                                                                                         // 22
  validate: new SimpleSchema({                                                                                         // 23
    _id: { type: String },                                                                                             // 24
    modifier: { type: Object, blackbox: true }                                                                         // 25
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 27
    function run(_ref) {                                                                                               //
      var _id = _ref._id;                                                                                              //
      var modifier = _ref.modifier;                                                                                    //
                                                                                                                       //
      checkPermissions();                                                                                              // 28
      return _technologies.Technologies.update(_id, modifier);                                                         // 29
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var remove = exports.remove = new _mdgValidatedMethod.ValidatedMethod({                                                // 33
  name: 'technologies.remove',                                                                                         // 34
  validate: new SimpleSchema({                                                                                         // 35
    _id: { type: String }                                                                                              // 36
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 38
    function run(_ref2) {                                                                                              //
      var _id = _ref2._id;                                                                                             //
                                                                                                                       //
      checkPermissions();                                                                                              // 39
      _technologies.Technologies.remove({                                                                              // 40
        _id: techId                                                                                                    // 41
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var linkImage = exports.linkImage = new _mdgValidatedMethod.ValidatedMethod({                                          // 47
  name: 'technologies.linkImage',                                                                                      // 48
  validate: new SimpleSchema({                                                                                         // 49
    _id: { type: String },                                                                                             // 50
    imageId: { type: String }                                                                                          // 51
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 53
    function run(_ref3) {                                                                                              //
      var _id = _ref3._id;                                                                                             //
      var imageId = _ref3.imageId;                                                                                     //
                                                                                                                       //
      checkPermissions();                                                                                              // 54
      var technology = _technologies.Technologies.findOne(_id);                                                        // 55
      var image = technology.images.find(function (i) {                                                                // 56
        return i.src === imageId;                                                                                      //
      });                                                                                                              //
                                                                                                                       //
      if (image) {                                                                                                     // 58
        throw new Meteor.Error('Image already linked with the given technology.');                                     // 59
      }                                                                                                                //
                                                                                                                       //
      return _technologies.Technologies.update(_id, {                                                                  // 62
        $push: {                                                                                                       // 63
          images: {                                                                                                    // 64
            src: imageId,                                                                                              // 65
            showcased: false                                                                                           // 66
          }                                                                                                            //
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var unlinkImage = exports.unlinkImage = new _mdgValidatedMethod.ValidatedMethod({                                      // 73
  name: 'technologies.unlinkImage',                                                                                    // 74
  validate: new SimpleSchema({                                                                                         // 75
    _id: { type: String },                                                                                             // 76
    imageId: { type: String }                                                                                          // 77
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 79
    function run(_ref4) {                                                                                              //
      var _id = _ref4._id;                                                                                             //
      var imageId = _ref4.imageId;                                                                                     //
                                                                                                                       //
      checkPermissions();                                                                                              // 80
      var technology = _technologies.Technologies.findOne(_id);                                                        // 81
      var image = technology.images.find(function (i) {                                                                // 82
        return i.src === imageId;                                                                                      //
      });                                                                                                              //
                                                                                                                       //
      if (image.showcased) {                                                                                           // 84
        throw new Meteor.Error("Can't remove showcased image.");                                                       // 85
      }                                                                                                                //
                                                                                                                       //
      return _technologies.Technologies.update(_id, {                                                                  // 88
        $pull: {                                                                                                       // 89
          images: image                                                                                                // 90
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
/**                                                                                                                    //
 * Update the current showcased image of a given technology.                                                           //
 * - It will update the current showcased image to false                                                               //
 * - And then update the new image with the given imageId to true                                                      //
 * @param {String} _id The technology _id                                                                              //
 * @param {String} imageId The image _id                                                                               //
 */                                                                                                                    //
var updateShowcasedImage = exports.updateShowcasedImage = new _mdgValidatedMethod.ValidatedMethod({                    // 103
  name: 'technologies.updateShowcasedImage',                                                                           // 104
  validate: new SimpleSchema({                                                                                         // 105
    _id: { type: String },                                                                                             // 106
    imageId: { type: String }                                                                                          // 107
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 109
    function run(_ref5) {                                                                                              //
      var _id = _ref5._id;                                                                                             //
      var imageId = _ref5.imageId;                                                                                     //
                                                                                                                       //
      checkPermissions();                                                                                              // 110
      var technology = _technologies.Technologies.findOne(_id);                                                        // 111
      var currentShowcasedImage = technology.images.find(function (i) {                                                // 112
        return i.showcased;                                                                                            //
      });                                                                                                              //
                                                                                                                       //
      if (currentShowcasedImage) {                                                                                     // 114
        _technologies.Technologies.update({                                                                            // 115
          _id: _id,                                                                                                    // 116
          'images.src': currentShowcasedImage.src                                                                      // 117
        }, {                                                                                                           //
          $set: {                                                                                                      // 119
            'images.$.showcased': false                                                                                // 120
          }                                                                                                            //
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      return _technologies.Technologies.update({                                                                       // 125
        _id: _id,                                                                                                      // 126
        'images.src': imageId                                                                                          // 127
      }, {                                                                                                             //
        $set: {                                                                                                        // 129
          'images.$.showcased': true                                                                                   // 130
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"schema.js":["meteor/aldeed:simple-schema",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/schema.js                                                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.TechnologySchema = undefined;                                                                                  //
                                                                                                                       //
var _aldeedSimpleSchema = require('meteor/aldeed:simple-schema');                                                      // 1
                                                                                                                       //
var TechnologySchema = exports.TechnologySchema = new _aldeedSimpleSchema.SimpleSchema({                               // 3
  techId: {                                                                                                            // 4
    type: String,                                                                                                      // 5
    label: 'techId',                                                                                                   // 6
    optional: true,                                                                                                    // 7
    esDriver: true                                                                                                     // 8
  },                                                                                                                   //
  name: {                                                                                                              // 10
    type: String,                                                                                                      // 11
    label: 'Title',                                                                                                    // 12
    esDriver: true,                                                                                                    // 13
    logDriver: true                                                                                                    // 14
  },                                                                                                                   //
  synonyms: {                                                                                                          // 16
    type: [String],                                                                                                    // 17
    optional: true,                                                                                                    // 18
    label: 'Alternative titles',                                                                                       // 19
    autoform: {                                                                                                        // 20
      type: 'tags'                                                                                                     // 21
    }                                                                                                                  //
  },                                                                                                                   //
  status: {                                                                                                            // 24
    type: String,                                                                                                      // 25
    esDriver: true,                                                                                                    // 26
    logDriver: true,                                                                                                   // 27
    allowedValues: ['draft', 'review', 'published'],                                                                   // 28
    autoform: {                                                                                                        // 29
      options: [{                                                                                                      // 30
        label: 'Draft',                                                                                                // 31
        value: 'draft'                                                                                                 // 32
      }, {                                                                                                             //
        label: 'Review',                                                                                               // 34
        value: 'review'                                                                                                // 35
      }, {                                                                                                             //
        label: 'Published',                                                                                            // 37
        value: 'published'                                                                                             // 38
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  tags: {                                                                                                              // 42
    type: [String],                                                                                                    // 43
    optional: true,                                                                                                    // 44
    autoform: {                                                                                                        // 45
      type: 'tags'                                                                                                     // 46
    }                                                                                                                  //
  },                                                                                                                   //
  contextualDescription: {                                                                                             // 49
    type: [Schemas.contextualDescription],                                                                             // 50
    label: 'Contextual Descriptions',                                                                                  // 51
    optional: true                                                                                                     // 52
  },                                                                                                                   //
  images: {                                                                                                            // 54
    type: [Schemas.Image],                                                                                             // 55
    optional: true                                                                                                     // 56
  },                                                                                                                   //
  urls: {                                                                                                              // 58
    type: [Schemas.Url],                                                                                               // 59
    optional: true                                                                                                     // 60
  },                                                                                                                   //
  readiness: {                                                                                                         // 62
    type: [Schemas.Readiness],                                                                                         // 63
    optional: true,                                                                                                    // 64
    autoform: {                                                                                                        // 65
      omit: true                                                                                                       // 66
    }                                                                                                                  //
  },                                                                                                                   //
  impact: {                                                                                                            // 69
    type: [Schemas.Impact],                                                                                            // 70
    optional: true                                                                                                     // 71
  },                                                                                                                   //
  attachmentsId: {                                                                                                     // 73
    type: [String],                                                                                                    // 74
    optional: true,                                                                                                    // 75
    label: 'Related Attachments',                                                                                      // 76
    autoform: {                                                                                                        // 77
      afFieldInput: {                                                                                                  // 78
        type: 'universe-select',                                                                                       // 79
        multiple: true,                                                                                                // 80
        uniPlaceholder: 'Search attachments by title...',                                                              // 81
        options: function () {                                                                                         // 82
          function options() {                                                                                         //
            return Attachments.find().map(function (attachment) {                                                      // 83
              return {                                                                                                 // 84
                label: attachment.name,                                                                                // 85
                value: attachment._id                                                                                  // 86
              };                                                                                                       //
            });                                                                                                        //
          }                                                                                                            //
                                                                                                                       //
          return options;                                                                                              //
        }()                                                                                                            //
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  organizationsId: {                                                                                                   // 93
    type: [String],                                                                                                    // 94
    optional: true,                                                                                                    // 95
    label: 'Related Organizations',                                                                                    // 96
    autoform: {                                                                                                        // 97
      type: 'universe-select',                                                                                         // 98
      multiple: true,                                                                                                  // 99
      uniPlaceholder: 'Search organizations by title...',                                                              // 100
      options: function () {                                                                                           // 101
        function options() {                                                                                           //
          return Organizations.find().map(function (org) {                                                             // 102
            return {                                                                                                   // 103
              label: org.name,                                                                                         // 104
              value: org._id                                                                                           // 105
            };                                                                                                         //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return options;                                                                                                //
      }()                                                                                                              //
    }                                                                                                                  //
  },                                                                                                                   //
  projectsId: {                                                                                                        // 111
    type: [String],                                                                                                    // 112
    optional: true,                                                                                                    // 113
    label: 'Related Projects',                                                                                         // 114
    autoform: {                                                                                                        // 115
      type: 'universe-select',                                                                                         // 116
      multiple: true,                                                                                                  // 117
      uniPlaceholder: 'Search projects by title...',                                                                   // 118
      options: function () {                                                                                           // 119
        function options() {                                                                                           //
          return Projects.find().map(function (project) {                                                              // 120
            return {                                                                                                   // 121
              label: project.name,                                                                                     // 122
              value: project._id                                                                                       // 123
            };                                                                                                         //
          });                                                                                                          //
        }                                                                                                              //
                                                                                                                       //
        return options;                                                                                                //
      }()                                                                                                              //
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"technologies.js":["meteor/mongo","./schema.js","../technologies_descriptions/technologies_descriptions.js","../technologies_descriptions/schema",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies/technologies.js                                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.Technologies = undefined;                                                                                      //
                                                                                                                       //
var _mongo = require('meteor/mongo');                                                                                  // 1
                                                                                                                       //
var _schema = require('./schema.js');                                                                                  // 3
                                                                                                                       //
var _technologies_descriptions = require('../technologies_descriptions/technologies_descriptions.js');                 // 4
                                                                                                                       //
var _schema2 = require('../technologies_descriptions/schema');                                                         // 5
                                                                                                                       //
var Technologies = exports.Technologies = new _mongo.Mongo.Collection('technologies');                                 // 7
                                                                                                                       //
Technologies.attachSchema(_schema.TechnologySchema);                                                                   // 9
Technologies.attachBehaviour('timestampable');                                                                         // 10
                                                                                                                       //
Technologies.helpers({                                                                                                 // 12
  descriptions: function () {                                                                                          // 13
    function descriptions() {                                                                                          //
      return _technologies_descriptions.TechnologiesDescriptions.find({                                                // 14
        technologyId: this._id                                                                                         // 15
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return descriptions;                                                                                               //
  }(),                                                                                                                 //
  organizations: function () {                                                                                         // 18
    function organizations() {                                                                                         //
      return Organizations.find({                                                                                      // 19
        _id: {                                                                                                         // 20
          $in: this.organizationsId || []                                                                              // 21
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return organizations;                                                                                              //
  }(),                                                                                                                 //
  projects: function () {                                                                                              // 25
    function projects() {                                                                                              //
      return Projects.find({                                                                                           // 26
        _id: {                                                                                                         // 27
          $in: this.projectsId || []                                                                                   // 28
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return projects;                                                                                                   //
  }(),                                                                                                                 //
  attachments: function () {                                                                                           // 32
    function attachments() {                                                                                           //
      return Attachments.find({                                                                                        // 33
        _id: {                                                                                                         // 34
          $in: this.attachmentsId || []                                                                                // 35
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return attachments;                                                                                                //
  }(),                                                                                                                 //
  getPublishedDescription: function () {                                                                               // 39
    function getPublishedDescription() {                                                                               //
      var publishedDescription = _technologies_descriptions.TechnologiesDescriptions.findOne({                         // 40
        technologyId: this._id,                                                                                        // 41
        status: _schema2.DESCRIPTION_STATUS.PUBLISHED                                                                  // 42
      });                                                                                                              //
                                                                                                                       //
      if (!publishedDescription) {                                                                                     // 45
        return {                                                                                                       // 46
          shortText: "There's no published description for this technology",                                           // 47
          longText: "There's no published description for this technology"                                             // 48
        };                                                                                                             //
      }                                                                                                                //
                                                                                                                       //
      return publishedDescription;                                                                                     // 52
    }                                                                                                                  //
                                                                                                                       //
    return getPublishedDescription;                                                                                    //
  }(),                                                                                                                 //
  getShowcasedImage: function () {                                                                                     // 54
    function getShowcasedImage() {                                                                                     //
      if (!this.images) return false;                                                                                  // 55
      this.images = this.images || [];                                                                                 // 56
      return _.find(this.images, function (desc) {                                                                     // 57
        return desc && desc.showcased;                                                                                 // 58
      }) || {};                                                                                                        //
    }                                                                                                                  //
                                                                                                                       //
    return getShowcasedImage;                                                                                          //
  }(),                                                                                                                 //
  getCollections: function () {                                                                                        // 61
    function getCollections() {                                                                                        //
      return Collections.find({                                                                                        // 62
        technologiesId: this._id                                                                                       // 63
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return getCollections;                                                                                             //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]},"technologies_descriptions":{"methods.js":["meteor/mdg:validated-method","../technologies/technologies","./technologies_descriptions.js","./schema.js",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies_descriptions/methods.js                                                                    //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.remove = exports.update = exports.publish = exports.insert = undefined;                                        //
                                                                                                                       //
var _mdgValidatedMethod = require('meteor/mdg:validated-method');                                                      // 1
                                                                                                                       //
var _technologies = require('../technologies/technologies');                                                           // 2
                                                                                                                       //
var _technologies_descriptions = require('./technologies_descriptions.js');                                            // 3
                                                                                                                       //
var _schema = require('./schema.js');                                                                                  // 4
                                                                                                                       //
/**                                                                                                                    //
 * Insert a new technology description                                                                                 //
 */                                                                                                                    //
var insert = exports.insert = new _mdgValidatedMethod.ValidatedMethod({                                                // 9
  name: 'technologies_descriptions.insert',                                                                            // 10
  validate: _schema.TechnologyDescriptionSchema.validator(),                                                           // 11
  run: function () {                                                                                                   // 12
    function run(doc) {                                                                                                //
      return _technologies_descriptions.TechnologiesDescriptions.insert(doc);                                          // 13
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
/**                                                                                                                    //
 * Publish a description for a technology.                                                                             //
 * It will make two update operations:                                                                                 //
 *  - Change the current description published to draft (if exists)                                                    //
 *  - Publish the description with the given {descriptionId}                                                           //
 */                                                                                                                    //
var publish = exports.publish = new _mdgValidatedMethod.ValidatedMethod({                                              // 23
  name: 'technologies_descriptions.publish',                                                                           // 24
  validate: new SimpleSchema({                                                                                         // 25
    technologyId: { type: String },                                                                                    // 26
    descriptionId: { type: String }                                                                                    // 27
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 29
    function run(_ref) {                                                                                               //
      var technologyId = _ref.technologyId;                                                                            //
      var descriptionId = _ref.descriptionId;                                                                          //
                                                                                                                       //
      var publishedDescription = _technologies_descriptions.TechnologiesDescriptions.findOne({                         // 30
        technologyId: technologyId,                                                                                    // 31
        status: _schema.DESCRIPTION_STATUS.PUBLISHED                                                                   // 32
      });                                                                                                              //
                                                                                                                       //
      if (publishedDescription) {                                                                                      // 35
        _technologies_descriptions.TechnologiesDescriptions.update(publishedDescription._id, {                         // 36
          $set: {                                                                                                      // 37
            status: _schema.DESCRIPTION_STATUS.DRAFT                                                                   // 38
          }                                                                                                            //
        });                                                                                                            //
      }                                                                                                                //
                                                                                                                       //
      _technologies_descriptions.TechnologiesDescriptions.update(descriptionId, {                                      // 43
        $set: {                                                                                                        // 44
          status: _schema.DESCRIPTION_STATUS.PUBLISHED                                                                 // 45
        }                                                                                                              //
      });                                                                                                              //
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var update = exports.update = new _mdgValidatedMethod.ValidatedMethod({                                                // 51
  name: 'technologies_descriptions.update',                                                                            // 52
  validate: new SimpleSchema({                                                                                         // 53
    _id: { type: String },                                                                                             // 54
    modifier: { type: Object, blackbox: true }                                                                         // 55
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 57
    function run(_ref2) {                                                                                              //
      var _id = _ref2._id;                                                                                             //
      var modifier = _ref2.modifier;                                                                                   //
                                                                                                                       //
      return _technologies_descriptions.TechnologiesDescriptions.update(_id, modifier);                                // 58
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
                                                                                                                       //
var remove = exports.remove = new _mdgValidatedMethod.ValidatedMethod({                                                // 62
  name: 'technologies_descriptions.remove',                                                                            // 63
  validate: new SimpleSchema({                                                                                         // 64
    descriptionId: { type: String }                                                                                    // 65
  }).validator(),                                                                                                      //
  run: function () {                                                                                                   // 67
    function run(_ref3) {                                                                                              //
      var descriptionId = _ref3.descriptionId;                                                                         //
                                                                                                                       //
      return _technologies_descriptions.TechnologiesDescriptions.remove(descriptionId);                                // 68
    }                                                                                                                  //
                                                                                                                       //
    return run;                                                                                                        //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"schema.js":["meteor/aldeed:simple-schema",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies_descriptions/schema.js                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.TechnologyDescriptionSchema = exports.DESCRIPTION_STATUS = undefined;                                          //
                                                                                                                       //
var _aldeedSimpleSchema = require('meteor/aldeed:simple-schema');                                                      // 1
                                                                                                                       //
var DESCRIPTION_STATUS = exports.DESCRIPTION_STATUS = {                                                                // 3
  DRAFT: 'draft',                                                                                                      // 4
  REVIEW: 'review',                                                                                                    // 5
  PUBLISHED: 'published'                                                                                               // 6
};                                                                                                                     //
                                                                                                                       //
var TechnologyDescriptionSchema = exports.TechnologyDescriptionSchema = new _aldeedSimpleSchema.SimpleSchema({         // 9
  technologyId: {                                                                                                      // 10
    type: String                                                                                                       // 11
  },                                                                                                                   //
  status: {                                                                                                            // 13
    type: String,                                                                                                      // 14
    allowedValues: Object.keys(DESCRIPTION_STATUS).map(function (key) {                                                // 15
      return DESCRIPTION_STATUS[key];                                                                                  //
    }),                                                                                                                //
    autoform: {                                                                                                        // 16
      type: 'selectize',                                                                                               // 17
      options: [{                                                                                                      // 18
        label: 'Draft',                                                                                                // 19
        value: DESCRIPTION_STATUS.DRAFT                                                                                // 20
      }, {                                                                                                             //
        label: 'Review',                                                                                               // 22
        value: DESCRIPTION_STATUS.REVIEW                                                                               // 23
      }, {                                                                                                             //
        label: 'Published',                                                                                            // 25
        value: DESCRIPTION_STATUS.PUBLISHED                                                                            // 26
      }]                                                                                                               //
    }                                                                                                                  //
  },                                                                                                                   //
  longText: {                                                                                                          // 30
    type: String,                                                                                                      // 31
    label: 'Description',                                                                                              // 32
    autoform: {                                                                                                        // 33
      type: 'markdownEditor'                                                                                           // 34
    }                                                                                                                  //
  },                                                                                                                   //
  shortText: {                                                                                                         // 37
    type: String,                                                                                                      // 38
    label: 'Summary',                                                                                                  // 39
    max: 140,                                                                                                          // 40
    autoform: {                                                                                                        // 41
      afFieldInput: {                                                                                                  // 42
        type: 'textarea',                                                                                              // 43
        rows: 3                                                                                                        // 44
      }                                                                                                                //
    }                                                                                                                  //
  },                                                                                                                   //
  applications: {                                                                                                      // 48
    type: [String],                                                                                                    // 49
    optional: true,                                                                                                    // 50
    autoform: {                                                                                                        // 51
      omit: true                                                                                                       // 52
    }                                                                                                                  //
  },                                                                                                                   //
  benefits: {                                                                                                          // 55
    type: [String],                                                                                                    // 56
    optional: true,                                                                                                    // 57
    autoform: {                                                                                                        // 58
      omit: true                                                                                                       // 59
    }                                                                                                                  //
  }                                                                                                                    //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"technologies_descriptions.js":["meteor/meteor","meteor/mongo","./schema.js",function(require,exports){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/api/technologies_descriptions/technologies_descriptions.js                                                  //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
exports.__esModule = true;                                                                                             //
exports.TechnologiesDescriptions = undefined;                                                                          //
                                                                                                                       //
var _meteor = require('meteor/meteor');                                                                                // 1
                                                                                                                       //
var _mongo = require('meteor/mongo');                                                                                  // 2
                                                                                                                       //
var _schema = require('./schema.js');                                                                                  // 3
                                                                                                                       //
var TechnologiesDescriptions = exports.TechnologiesDescriptions = new _mongo.Mongo.Collection('technologies_descriptions');
                                                                                                                       //
TechnologiesDescriptions.attachSchema(_schema.TechnologyDescriptionSchema);                                            // 7
TechnologiesDescriptions.attachBehaviour('timestampable');                                                             // 8
                                                                                                                       //
TechnologiesDescriptions.helpers({                                                                                     // 10
  modifiedAt: function () {                                                                                            // 11
    function modifiedAt() {                                                                                            //
      return this.updatedAt || this.createdAt;                                                                         // 12
    }                                                                                                                  //
                                                                                                                       //
    return modifiedAt;                                                                                                 //
  }(),                                                                                                                 //
  modifiedByUser: function () {                                                                                        // 14
    function modifiedByUser() {                                                                                        //
      return _meteor.Meteor.users.findOne(this.updatedBy || this.createdBy);                                           // 15
    }                                                                                                                  //
                                                                                                                       //
    return modifiedByUser;                                                                                             //
  }()                                                                                                                  //
});                                                                                                                    //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}},"startup":{"server":{"api.js":["../../api/technologies/methods.js","../../api/technologies/server/hooks.js","../../api/technologies/server/es_config.js","../../api/technologies/server/publications.js","../../api/technologies_descriptions/methods.js",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/startup/server/api.js                                                                                       //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('../../api/technologies/methods.js');                                                                          // 1
                                                                                                                       //
require('../../api/technologies/server/hooks.js');                                                                     // 2
                                                                                                                       //
require('../../api/technologies/server/es_config.js');                                                                 // 3
                                                                                                                       //
require('../../api/technologies/server/publications.js');                                                              // 4
                                                                                                                       //
require('../../api/technologies_descriptions/methods.js');                                                             // 6
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}],"index.js":["./api.js",function(require){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// imports/startup/server/index.js                                                                                     //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
require('./api.js');                                                                                                   // 3
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}]}}}},{"extensions":[".js",".json"]});
require("./lib/models/_shared/es_driver.js");
require("./lib/models/_shared/log_driver.js");
require("./lib/models/_shared/quick_list.js");
require("./lib/models/_shared/schemas.js");
require("./lib/models/_shared/simple_counter.js");
require("./lib/models/_shared/tabular_tables.js");
require("./lib/models/attachments/Attachments.js");
require("./lib/models/attachments/attachments_methods.js");
require("./lib/models/attachments/attachments_tabular.js");
require("./lib/models/collections/Collections.js");
require("./lib/models/collections/collections_hooks.js");
require("./lib/models/collections/collections_methods.js");
require("./lib/models/collectionsSet/CollectionsSet.js");
require("./lib/models/collectionsSet/collections_set_hooks.js");
require("./lib/models/collectionsSet/collections_set_methods.js");
require("./lib/models/organizations/Organizations.js");
require("./lib/models/organizations/organizations_methods.js");
require("./lib/models/organizations/organizations_tabular.js");
require("./lib/models/projects/Projects.js");
require("./lib/models/projects/projects_counters.js");
require("./lib/models/projects/projects_hooks.js");
require("./lib/models/projects/projects_methods.js");
require("./lib/models/projects/projects_tabular.js");
require("./lib/models/technologies/Technologies.js");
require("./lib/models/technologies/technologies_tabular.js");
require("./lib/models/users/Users.js");
require("./lib/models/users/user_methods.js");
require("./server/lib/stores/files.js");
require("./lib/config/cloudinary.js");
require("./lib/config/collection_behavior.js");
require("./lib/config/mo_format.js");
require("./lib/config/typeahead.js");
require("./lib/models/Backups.js");
require("./lib/models/Log.js");
require("./lib/models/images.js");
require("./lib/models/readiness.js");
require("./server/lib/elastic_search.js");
require("./server/lib/environment.js");
require("./server/lib/meta_inspector.js");
require("./server/lib/upload_file_from_url.js");
require("./server/lib/useraccounts.js");
require("./server/lib/yaml.min.js");
require("./lib/help.js");
require("./lib/subs.js");
require("./server/adapters/elastic_search_adapter.js");
require("./server/adapters/log_adapter.js");
require("./server/behaviours/river.js");
require("./server/config/cloudinary.js");
require("./server/config/kadira.js");
require("./server/config/security.js");
require("./server/fixtures/admin_account.js");
require("./server/publications/attachments_publications.js");
require("./server/publications/collections_publications.js");
require("./server/publications/collections_set_publications.js");
require("./server/publications/counters.js");
require("./server/publications/files_publications.js");
require("./server/publications/images.js");
require("./server/publications/organizations_publications.js");
require("./server/publications/projects_publications.js");
require("./server/publications/recent_updates.js");
require("./server/publications/roles_publications.js");
require("./server/publications/stashed_tech_publications.js");
require("./server/publications/users_publications.js");
require("./server/search/search_source.js");
require("./server/startup/loadFixtures.js");
require("./server/startup/loadUsers.js");
require("./server/bootstrap.js");
require("./server/main.js");
//# sourceMappingURL=app.js.map
