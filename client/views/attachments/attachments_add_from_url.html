<template name="attachmentsAddFromUrl">
  <div class="row">
    <div class="col-xs-8">
      {{> searchRemoteFile 
        onDownloadBegin=onDownloadBegin 
        onUploadBegin=onUploadBegin 
        onDownloadError=onDownloadError 
        onUploadSuccess=onUploadSuccess 
        onUploadError=onUploadError}}
      {{#autoForm id="insertAttachmentFromUrlForm" 
        doc=attachmentFromUrl 
        collection="Attachments" 
        type="method" 
        meteormethod="Attachments.methods.add" 
        class="form-horizontal"}}
        {{> afQuickField name="name" label-class="col-sm-2" input-col-class="col-sm-10"}}
        {{> afQuickField name="description" label-class="col-sm-2" input-col-class="col-sm-10"}} 
        {{> afQuickField name="from" type='hidden'}} 
        {{> afQuickField name="file._id" type='hidden'}} 
        {{> afQuickField name="file.type" type='hidden'}} 
        {{> afQuickField name="file.s3Url" type='hidden'}} 
        {{> afQuickField name="file.sourceUrl" type='hidden'}} 
        {{> submit texto="Create" buttonClass="col-sm-10" offsetClass="col-sm-offset-2"}}
      {{/autoForm}}
    </div>
    <div class="col-xs-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3>File Preview</h3>
        </div>
        <div class="panel-body">
          {{#if isDownloading}}
            <h3>Our servers are downloading your file...</h3>
            {{#with FS.GetFile "files" fileObjId}}
              {{> FS.UploadProgressBar bootstrap=true}}
            {{/with}}
          {{else}}
            {{> attachmentThumbnail 
              attachment=attachmentFromUrl 
              class="preview"
              width='400'
              height='400'
              crop='fit'}}
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</template>
